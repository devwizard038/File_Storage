{"version":3,"file":"Info-26407ef1.js","sources":["../../../node_modules/@react-aria/utils/dist/useGlobalListeners.mjs","../../../node_modules/@react-aria/interactions/dist/useInteractOutside.mjs","../../../node_modules/@internationalized/number/dist/NumberParser.mjs","../../../common/resources/client/ui/layout/dashboard-layout-context.ts","../../../common/resources/client/utils/hooks/use-block-body-overflow.ts","../../../common/resources/client/ui/layout/dashboard-layout.tsx","../../../common/resources/client/ui/layout/dashboard-content.tsx","../../../common/resources/client/ui/layout/dashboard-sidenav.tsx","../../../common/resources/client/icons/material/MenuOpen.tsx","../../../common/resources/client/ui/layout/dashboard-navbar.tsx","../../../common/resources/client/datatable/filters/backend-filter.ts","../../../common/resources/client/utils/date/start-of-day.ts","../../../common/resources/client/utils/date/end-of-day.ts","../../../common/resources/client/i18n/get-user-timezone.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets.ts","../../../common/resources/client/icons/material/DateRange.tsx","../../../common/resources/client/ui/forms/input-field/input.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-picker-field.tsx","../../../common/resources/client/ui/forms/input-field/date/utils.ts","../../../common/resources/client/ui/forms/input-field/date/use-base-date-picker-state.ts","../../../common/resources/client/i18n/use-current-date-time.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/use-date-range-picker-state.ts","../../../common/resources/client/icons/material/ArrowRightAlt.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/adjust-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/set-segment.ts","../../../common/resources/client/ui/forms/input-field/date/segments/utils/page-step.ts","../../../common/resources/client/ui/forms/input-field/date/segments/editable-date-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/literal-segment.tsx","../../../common/resources/client/ui/forms/input-field/date/segments/utils/get-segment-limits.ts","../../../common/resources/client/ui/forms/input-field/date/segments/date-segment-list.tsx","../../../common/resources/client/icons/material/KeyboardArrowRight.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-cell.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar-month.tsx","../../../common/resources/client/ui/forms/input-field/date/calendar/calendar.tsx","../../../common/resources/client/i18n/formatted-date-time-range.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-preset-list.tsx","../../../common/resources/client/utils/hooks/is-tablet-media-query.ts","../../../common/resources/client/ui/forms/toggle/switch.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets.ts","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/dialog/date-range-dialog.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/date-range-picker.tsx","../../../common/resources/client/ui/forms/input-field/date/date-range-picker/form-date-range-picker.tsx","../../../common/resources/client/datatable/filters/timestamp-filters.ts","../../../common/resources/client/datatable/filters/backend-filters-url-key.ts","../../../common/resources/client/datatable/filters/utils/decode-backend-filters.ts","../../../common/resources/client/datatable/filters/utils/encode-backend-filters.ts","../../../common/resources/client/datatable/filters/backend-filter-url-params.ts","../../../common/resources/client/utils/keybinds/is-ctrl-key-pressed.ts","../../../common/resources/client/ui/tables/navigate-grid.ts","../../../common/resources/client/ui/tables/table-context.ts","../../../common/resources/client/ui/tables/style/use-table-cell-style.ts","../../../common/resources/client/ui/tables/table-cell.tsx","../../../common/resources/client/ui/interactions/use-pointer-events.ts","../../../common/resources/client/utils/keybinds/is-ctrl-or-shift-pressed.ts","../../../common/resources/client/ui/tables/style/use-table-row-style.ts","../../../common/resources/client/ui/tables/table-row.tsx","../../../common/resources/client/ui/tables/checkbox-column-config.tsx","../../../common/resources/client/icons/material/ArrowDownward.tsx","../../../common/resources/client/ui/tables/header-cell.tsx","../../../common/resources/client/ui/tables/table-header-row.tsx","../../../common/resources/client/ui/tables/table.tsx","../../../common/resources/client/datatable/filters/panels/select-filter-panel.tsx","../../../common/resources/client/datatable/filters/panels/date-range-filter-panel.tsx","../../../common/resources/client/ui/images/avatar.tsx","../../../common/resources/client/users/queries/use-normalized-models.ts","../../../common/resources/client/users/queries/use-normalized-model.ts","../../../common/resources/client/ui/forms/normalized-model-field.tsx","../../../common/resources/client/datatable/filters/panels/normalized-model-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-operator-names.ts","../../../common/resources/client/datatable/filters/panels/input-filter-panel.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/chip-list.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/string-to-chip-value.ts","../../../common/resources/client/ui/forms/input-field/chip-field/chip-field.tsx","../../../common/resources/client/ui/forms/input-field/chip-field/form-chip-field.tsx","../../../common/resources/client/datatable/filters/panels/chip-field-filter-panel.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-trigger-button.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-item-dialog-trigger.tsx","../../../common/resources/client/i18n/formatted-number.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list-control.tsx","../../../common/resources/client/datatable/filters/filter-list/filter-list.tsx","../../../common/resources/client/icons/material/Add.tsx","../../../common/resources/client/icons/material/FileDownload.tsx","../../../common/resources/client/uploads/utils/download-file-from-url.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/use-date-picker-state.ts","../../../common/resources/client/ui/forms/input-field/date/date-picker/date-picker.tsx","../../../common/resources/client/icons/material/Delete.tsx","../../../common/resources/client/ui/interactions/dnd/drag-state.ts","../../../common/resources/client/ui/interactions/interactable-event.ts","../../../common/resources/client/ui/interactions/active-interaction.ts","../../../common/resources/client/ui/interactions/utils/dom-rect-to-obj.ts","../../../common/resources/client/ui/interactions/dnd/update-rects.ts","../../../common/resources/client/ui/interactions/dnd/use-draggable.ts","../../../common/resources/client/ui/interactions/dnd/read-files-from-data-transfer.ts","../../../common/resources/client/utils/array/async-iterable-to-array.ts","../../../common/resources/client/ui/interactions/dnd/use-droppable.ts","../../../common/resources/client/auth/user.ts","../../../common/resources/client/icons/material/Link.tsx","../../../common/resources/client/icons/material/MoreVert.tsx","../../../node_modules/@tanstack/virtual-core/dist/esm/utils.js","../../../node_modules/@tanstack/virtual-core/dist/esm/index.js","../../../node_modules/@tanstack/react-virtual/dist/esm/index.js","../../../common/resources/client/uploads/hooks/file-entry-urls.ts","../../../common/resources/client/uploads/preview/file-preview-context.ts","../../../common/resources/client/uploads/preview/file-preview/default-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/image-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/text-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/video-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/audio-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/pdf-file-preview.tsx","../../../common/resources/client/uploads/preview/file-preview/word-document-file-preview.tsx","../../../common/resources/client/uploads/preview/available-previews.ts","../../../common/resources/client/icons/material/ChevronLeft.tsx","../../../common/resources/client/uploads/file-type-icon/file-thumbnail.tsx","../../../common/resources/client/uploads/preview/file-preview-container.tsx","../../../common/resources/client/uploads/preview/file-preview-dialog.tsx","../../../common/resources/client/admin/file-entry/file-entry-index-filters.ts","../../../common/resources/client/icons/material/ArrowBack.tsx","../../../common/resources/client/icons/material/Info.tsx"],"sourcesContent":["import {useRef as $lPAwt$useRef, useCallback as $lPAwt$useCallback, useEffect as $lPAwt$useEffect} from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nfunction $03deb23ff14920c4$export$4eaf04e54aa8eed6() {\n    let globalListeners = (0, $lPAwt$useRef)(new Map());\n    let addGlobalListener = (0, $lPAwt$useCallback)((eventTarget, type, listener, options)=>{\n        // Make sure we remove the listener after it is called with the `once` option.\n        let fn = (options === null || options === void 0 ? void 0 : options.once) ? (...args)=>{\n            globalListeners.current.delete(listener);\n            listener(...args);\n        } : listener;\n        globalListeners.current.set(listener, {\n            type: type,\n            eventTarget: eventTarget,\n            fn: fn,\n            options: options\n        });\n        eventTarget.addEventListener(type, listener, options);\n    }, []);\n    let removeGlobalListener = (0, $lPAwt$useCallback)((eventTarget, type, listener, options)=>{\n        var _globalListeners_current_get;\n        let fn = ((_globalListeners_current_get = globalListeners.current.get(listener)) === null || _globalListeners_current_get === void 0 ? void 0 : _globalListeners_current_get.fn) || listener;\n        eventTarget.removeEventListener(type, fn, options);\n        globalListeners.current.delete(listener);\n    }, []);\n    let removeAllGlobalListeners = (0, $lPAwt$useCallback)(()=>{\n        globalListeners.current.forEach((value, key)=>{\n            removeGlobalListener(value.eventTarget, value.type, key, value.options);\n        });\n    }, [\n        removeGlobalListener\n    ]);\n    // eslint-disable-next-line arrow-body-style\n    (0, $lPAwt$useEffect)(()=>{\n        return removeAllGlobalListeners;\n    }, [\n        removeAllGlobalListeners\n    ]);\n    return {\n        addGlobalListener: addGlobalListener,\n        removeGlobalListener: removeGlobalListener,\n        removeAllGlobalListeners: removeAllGlobalListeners\n    };\n}\n\n\nexport {$03deb23ff14920c4$export$4eaf04e54aa8eed6 as useGlobalListeners};\n//# sourceMappingURL=useGlobalListeners.module.js.map\n","import {useEffectEvent as $ispOf$useEffectEvent, getOwnerDocument as $ispOf$getOwnerDocument} from \"@react-aria/utils\";\nimport {useRef as $ispOf$useRef, useEffect as $ispOf$useEffect} from \"react\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ // Portions of the code in this file are based on code from react.\n// Original licensing for the following can be found in the\n// NOTICE file in the root directory of this source tree.\n// See https://github.com/facebook/react/tree/cc7c1aece46a6b69b41958d731e0fd27c94bfc6c/packages/react-interactions\n\n\nfunction $e0b6e0b68ec7f50f$export$872b660ac5a1ff98(props) {\n    let { ref: ref, onInteractOutside: onInteractOutside, isDisabled: isDisabled, onInteractOutsideStart: onInteractOutsideStart } = props;\n    let stateRef = (0, $ispOf$useRef)({\n        isPointerDown: false,\n        ignoreEmulatedMouseEvents: false\n    });\n    let onPointerDown = (0, $ispOf$useEffectEvent)((e)=>{\n        if (onInteractOutside && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) {\n            if (onInteractOutsideStart) onInteractOutsideStart(e);\n            stateRef.current.isPointerDown = true;\n        }\n    });\n    let triggerInteractOutside = (0, $ispOf$useEffectEvent)((e)=>{\n        if (onInteractOutside) onInteractOutside(e);\n    });\n    (0, $ispOf$useEffect)(()=>{\n        let state = stateRef.current;\n        if (isDisabled) return;\n        const element = ref.current;\n        const documentObject = (0, $ispOf$getOwnerDocument)(element);\n        // Use pointer events if available. Otherwise, fall back to mouse and touch events.\n        if (typeof PointerEvent !== 'undefined') {\n            let onPointerUp = (e)=>{\n                if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\n                state.isPointerDown = false;\n            };\n            // changing these to capture phase fixed combobox\n            documentObject.addEventListener('pointerdown', onPointerDown, true);\n            documentObject.addEventListener('pointerup', onPointerUp, true);\n            return ()=>{\n                documentObject.removeEventListener('pointerdown', onPointerDown, true);\n                documentObject.removeEventListener('pointerup', onPointerUp, true);\n            };\n        } else {\n            let onMouseUp = (e)=>{\n                if (state.ignoreEmulatedMouseEvents) state.ignoreEmulatedMouseEvents = false;\n                else if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\n                state.isPointerDown = false;\n            };\n            let onTouchEnd = (e)=>{\n                state.ignoreEmulatedMouseEvents = true;\n                if (state.isPointerDown && $e0b6e0b68ec7f50f$var$isValidEvent(e, ref)) triggerInteractOutside(e);\n                state.isPointerDown = false;\n            };\n            documentObject.addEventListener('mousedown', onPointerDown, true);\n            documentObject.addEventListener('mouseup', onMouseUp, true);\n            documentObject.addEventListener('touchstart', onPointerDown, true);\n            documentObject.addEventListener('touchend', onTouchEnd, true);\n            return ()=>{\n                documentObject.removeEventListener('mousedown', onPointerDown, true);\n                documentObject.removeEventListener('mouseup', onMouseUp, true);\n                documentObject.removeEventListener('touchstart', onPointerDown, true);\n                documentObject.removeEventListener('touchend', onTouchEnd, true);\n            };\n        }\n    }, [\n        ref,\n        isDisabled,\n        onPointerDown,\n        triggerInteractOutside\n    ]);\n}\nfunction $e0b6e0b68ec7f50f$var$isValidEvent(event, ref) {\n    if (event.button > 0) return false;\n    if (event.target) {\n        // if the event target is no longer in the document, ignore\n        const ownerDocument = event.target.ownerDocument;\n        if (!ownerDocument || !ownerDocument.documentElement.contains(event.target)) return false;\n        // If the target is within a top layer element (e.g. toasts), ignore.\n        if (event.target.closest('[data-react-aria-top-layer]')) return false;\n    }\n    return ref.current && !ref.current.contains(event.target);\n}\n\n\nexport {$e0b6e0b68ec7f50f$export$872b660ac5a1ff98 as useInteractOutside};\n//# sourceMappingURL=useInteractOutside.module.js.map\n","import {NumberFormatter as $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5} from \"./NumberFormatter.mjs\";\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \nconst $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX = new RegExp('^.*\\\\(.*\\\\).*$');\nconst $6c7bd7858deea686$var$NUMBERING_SYSTEMS = [\n    'latn',\n    'arab',\n    'hanidec'\n];\nclass $6c7bd7858deea686$export$cd11ab140839f11d {\n    /**\n   * Parses the given string to a number. Returns NaN if a valid number could not be parsed.\n   */ parse(value) {\n        return $6c7bd7858deea686$var$getNumberParserImpl(this.locale, this.options, value).parse(value);\n    }\n    /**\n   * Returns whether the given string could potentially be a valid number. This should be used to\n   * validate user input as the user types. If a `minValue` or `maxValue` is provided, the validity\n   * of the minus/plus sign characters can be checked.\n   */ isValidPartialNumber(value, minValue, maxValue) {\n        return $6c7bd7858deea686$var$getNumberParserImpl(this.locale, this.options, value).isValidPartialNumber(value, minValue, maxValue);\n    }\n    /**\n   * Returns a numbering system for which the given string is valid in the current locale.\n   * If no numbering system could be detected, the default numbering system for the current\n   * locale is returned.\n   */ getNumberingSystem(value) {\n        return $6c7bd7858deea686$var$getNumberParserImpl(this.locale, this.options, value).options.numberingSystem;\n    }\n    constructor(locale, options = {}){\n        this.locale = locale;\n        this.options = options;\n    }\n}\nconst $6c7bd7858deea686$var$numberParserCache = new Map();\nfunction $6c7bd7858deea686$var$getNumberParserImpl(locale, options, value) {\n    // First try the default numbering system for the provided locale\n    let defaultParser = $6c7bd7858deea686$var$getCachedNumberParser(locale, options);\n    // If that doesn't match, and the locale doesn't include a hard coded numbering system,\n    // try each of the other supported numbering systems until we find one that matches.\n    if (!locale.includes('-nu-') && !defaultParser.isValidPartialNumber(value)) {\n        for (let numberingSystem of $6c7bd7858deea686$var$NUMBERING_SYSTEMS)if (numberingSystem !== defaultParser.options.numberingSystem) {\n            let parser = $6c7bd7858deea686$var$getCachedNumberParser(locale + (locale.includes('-u-') ? '-nu-' : '-u-nu-') + numberingSystem, options);\n            if (parser.isValidPartialNumber(value)) return parser;\n        }\n    }\n    return defaultParser;\n}\nfunction $6c7bd7858deea686$var$getCachedNumberParser(locale, options) {\n    let cacheKey = locale + (options ? Object.entries(options).sort((a, b)=>a[0] < b[0] ? -1 : 1).join() : '');\n    let parser = $6c7bd7858deea686$var$numberParserCache.get(cacheKey);\n    if (!parser) {\n        parser = new $6c7bd7858deea686$var$NumberParserImpl(locale, options);\n        $6c7bd7858deea686$var$numberParserCache.set(cacheKey, parser);\n    }\n    return parser;\n}\n// The actual number parser implementation. Instances of this class are cached\n// based on the locale, options, and detected numbering system.\nclass $6c7bd7858deea686$var$NumberParserImpl {\n    parse(value) {\n        // to parse the number, we need to remove anything that isn't actually part of the number, for example we want '-10.40' not '-10.40 USD'\n        let fullySanitizedValue = this.sanitize(value);\n        if (this.symbols.group) // Remove group characters, and replace decimal points and numerals with ASCII values.\n        fullySanitizedValue = $6c7bd7858deea686$var$replaceAll(fullySanitizedValue, this.symbols.group, '');\n        if (this.symbols.decimal) fullySanitizedValue = fullySanitizedValue.replace(this.symbols.decimal, '.');\n        if (this.symbols.minusSign) fullySanitizedValue = fullySanitizedValue.replace(this.symbols.minusSign, '-');\n        fullySanitizedValue = fullySanitizedValue.replace(this.symbols.numeral, this.symbols.index);\n        if (this.options.style === 'percent') {\n            // javascript is bad at dividing by 100 and maintaining the same significant figures, so perform it on the string before parsing\n            let isNegative = fullySanitizedValue.indexOf('-');\n            fullySanitizedValue = fullySanitizedValue.replace('-', '');\n            let index = fullySanitizedValue.indexOf('.');\n            if (index === -1) index = fullySanitizedValue.length;\n            fullySanitizedValue = fullySanitizedValue.replace('.', '');\n            if (index - 2 === 0) fullySanitizedValue = `0.${fullySanitizedValue}`;\n            else if (index - 2 === -1) fullySanitizedValue = `0.0${fullySanitizedValue}`;\n            else if (index - 2 === -2) fullySanitizedValue = '0.00';\n            else fullySanitizedValue = `${fullySanitizedValue.slice(0, index - 2)}.${fullySanitizedValue.slice(index - 2)}`;\n            if (isNegative > -1) fullySanitizedValue = `-${fullySanitizedValue}`;\n        }\n        let newValue = fullySanitizedValue ? +fullySanitizedValue : NaN;\n        if (isNaN(newValue)) return NaN;\n        if (this.options.style === 'percent') {\n            var _this_options_minimumFractionDigits, _this_options_maximumFractionDigits;\n            // extra step for rounding percents to what our formatter would output\n            let options = {\n                ...this.options,\n                style: 'decimal',\n                minimumFractionDigits: Math.min(((_this_options_minimumFractionDigits = this.options.minimumFractionDigits) !== null && _this_options_minimumFractionDigits !== void 0 ? _this_options_minimumFractionDigits : 0) + 2, 20),\n                maximumFractionDigits: Math.min(((_this_options_maximumFractionDigits = this.options.maximumFractionDigits) !== null && _this_options_maximumFractionDigits !== void 0 ? _this_options_maximumFractionDigits : 0) + 2, 20)\n            };\n            return new $6c7bd7858deea686$export$cd11ab140839f11d(this.locale, options).parse(new (0, $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5)(this.locale, options).format(newValue));\n        }\n        // accounting will always be stripped to a positive number, so if it's accounting and has a () around everything, then we need to make it negative again\n        if (this.options.currencySign === 'accounting' && $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX.test(value)) newValue = -1 * newValue;\n        return newValue;\n    }\n    sanitize(value) {\n        // Remove literals and whitespace, which are allowed anywhere in the string\n        value = value.replace(this.symbols.literals, '');\n        // Replace the ASCII minus sign with the minus sign used in the current locale\n        // so that both are allowed in case the user's keyboard doesn't have the locale's minus sign.\n        if (this.symbols.minusSign) value = value.replace('-', this.symbols.minusSign);\n        // In arab numeral system, their decimal character is 1643, but most keyboards don't type that\n        // instead they use the , (44) character or apparently the (1548) character.\n        if (this.options.numberingSystem === 'arab') {\n            if (this.symbols.decimal) {\n                value = value.replace(',', this.symbols.decimal);\n                value = value.replace(String.fromCharCode(1548), this.symbols.decimal);\n            }\n            if (this.symbols.group) value = $6c7bd7858deea686$var$replaceAll(value, '.', this.symbols.group);\n        }\n        // fr-FR group character is char code 8239, but that's not a key on the french keyboard,\n        // so allow 'period' as a group char and replace it with a space\n        if (this.options.locale === 'fr-FR') value = $6c7bd7858deea686$var$replaceAll(value, '.', String.fromCharCode(8239));\n        return value;\n    }\n    isValidPartialNumber(value, minValue = -Infinity, maxValue = Infinity) {\n        value = this.sanitize(value);\n        // Remove minus or plus sign, which must be at the start of the string.\n        if (this.symbols.minusSign && value.startsWith(this.symbols.minusSign) && minValue < 0) value = value.slice(this.symbols.minusSign.length);\n        else if (this.symbols.plusSign && value.startsWith(this.symbols.plusSign) && maxValue > 0) value = value.slice(this.symbols.plusSign.length);\n        // Numbers cannot start with a group separator\n        if (this.symbols.group && value.startsWith(this.symbols.group)) return false;\n        // Numbers that can't have any decimal values fail if a decimal character is typed\n        if (this.symbols.decimal && value.indexOf(this.symbols.decimal) > -1 && this.options.maximumFractionDigits === 0) return false;\n        // Remove numerals, groups, and decimals\n        if (this.symbols.group) value = $6c7bd7858deea686$var$replaceAll(value, this.symbols.group, '');\n        value = value.replace(this.symbols.numeral, '');\n        if (this.symbols.decimal) value = value.replace(this.symbols.decimal, '');\n        // The number is valid if there are no remaining characters\n        return value.length === 0;\n    }\n    constructor(locale, options = {}){\n        this.locale = locale;\n        this.formatter = new Intl.NumberFormat(locale, options);\n        this.options = this.formatter.resolvedOptions();\n        this.symbols = $6c7bd7858deea686$var$getSymbols(locale, this.formatter, this.options, options);\n        var _this_options_minimumFractionDigits, _this_options_maximumFractionDigits;\n        if (this.options.style === 'percent' && (((_this_options_minimumFractionDigits = this.options.minimumFractionDigits) !== null && _this_options_minimumFractionDigits !== void 0 ? _this_options_minimumFractionDigits : 0) > 18 || ((_this_options_maximumFractionDigits = this.options.maximumFractionDigits) !== null && _this_options_maximumFractionDigits !== void 0 ? _this_options_maximumFractionDigits : 0) > 18)) console.warn('NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.');\n    }\n}\nconst $6c7bd7858deea686$var$nonLiteralParts = new Set([\n    'decimal',\n    'fraction',\n    'integer',\n    'minusSign',\n    'plusSign',\n    'group'\n]);\n// This list is derived from https://www.unicode.org/cldr/charts/43/supplemental/language_plural_rules.html#comparison and includes\n// all unique numbers which we need to check in order to determine all the plural forms for a given locale.\n// See: https://github.com/adobe/react-spectrum/pull/5134/files#r1337037855 for used script\nconst $6c7bd7858deea686$var$pluralNumbers = [\n    0,\n    4,\n    2,\n    1,\n    11,\n    20,\n    3,\n    7,\n    100,\n    21,\n    0.1,\n    1.1\n];\nfunction $6c7bd7858deea686$var$getSymbols(locale, formatter, intlOptions, originalOptions) {\n    var _allParts_find, _posAllParts_find, _decimalParts_find, _allParts_find1;\n    // formatter needs access to all decimal places in order to generate the correct literal strings for the plural set\n    let symbolFormatter = new Intl.NumberFormat(locale, {\n        ...intlOptions,\n        minimumSignificantDigits: 1,\n        maximumSignificantDigits: 21\n    });\n    // Note: some locale's don't add a group symbol until there is a ten thousands place\n    let allParts = symbolFormatter.formatToParts(-10000.111);\n    let posAllParts = symbolFormatter.formatToParts(10000.111);\n    let pluralParts = $6c7bd7858deea686$var$pluralNumbers.map((n)=>symbolFormatter.formatToParts(n));\n    var _allParts_find_value;\n    let minusSign = (_allParts_find_value = (_allParts_find = allParts.find((p)=>p.type === 'minusSign')) === null || _allParts_find === void 0 ? void 0 : _allParts_find.value) !== null && _allParts_find_value !== void 0 ? _allParts_find_value : '-';\n    let plusSign = (_posAllParts_find = posAllParts.find((p)=>p.type === 'plusSign')) === null || _posAllParts_find === void 0 ? void 0 : _posAllParts_find.value;\n    // Safari does not support the signDisplay option, but our number parser polyfills it.\n    // If no plus sign was returned, but the original options contained signDisplay, default to the '+' character.\n    // @ts-ignore\n    if (!plusSign && ((originalOptions === null || originalOptions === void 0 ? void 0 : originalOptions.signDisplay) === 'exceptZero' || (originalOptions === null || originalOptions === void 0 ? void 0 : originalOptions.signDisplay) === 'always')) plusSign = '+';\n    // If maximumSignificantDigits is 1 (the minimum) then we won't get decimal characters out of the above formatters\n    // Percent also defaults to 0 fractionDigits, so we need to make a new one that isn't percent to get an accurate decimal\n    let decimalParts = new Intl.NumberFormat(locale, {\n        ...intlOptions,\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n    }).formatToParts(0.001);\n    let decimal = (_decimalParts_find = decimalParts.find((p)=>p.type === 'decimal')) === null || _decimalParts_find === void 0 ? void 0 : _decimalParts_find.value;\n    let group = (_allParts_find1 = allParts.find((p)=>p.type === 'group')) === null || _allParts_find1 === void 0 ? void 0 : _allParts_find1.value;\n    // this set is also for a regex, it's all literals that might be in the string we want to eventually parse that\n    // don't contribute to the numerical value\n    let allPartsLiterals = allParts.filter((p)=>!$6c7bd7858deea686$var$nonLiteralParts.has(p.type)).map((p)=>$6c7bd7858deea686$var$escapeRegex(p.value));\n    let pluralPartsLiterals = pluralParts.flatMap((p)=>p.filter((p)=>!$6c7bd7858deea686$var$nonLiteralParts.has(p.type)).map((p)=>$6c7bd7858deea686$var$escapeRegex(p.value)));\n    let sortedLiterals = [\n        ...new Set([\n            ...allPartsLiterals,\n            ...pluralPartsLiterals\n        ])\n    ].sort((a, b)=>b.length - a.length);\n    let literals = sortedLiterals.length === 0 ? new RegExp('[\\\\p{White_Space}]', 'gu') : new RegExp(`${sortedLiterals.join('|')}|[\\\\p{White_Space}]`, 'gu');\n    // These are for replacing non-latn characters with the latn equivalent\n    let numerals = [\n        ...new Intl.NumberFormat(intlOptions.locale, {\n            useGrouping: false\n        }).format(9876543210)\n    ].reverse();\n    let indexes = new Map(numerals.map((d, i)=>[\n            d,\n            i\n        ]));\n    let numeral = new RegExp(`[${numerals.join('')}]`, 'g');\n    let index = (d)=>String(indexes.get(d));\n    return {\n        minusSign: minusSign,\n        plusSign: plusSign,\n        decimal: decimal,\n        group: group,\n        literals: literals,\n        numeral: numeral,\n        index: index\n    };\n}\nfunction $6c7bd7858deea686$var$replaceAll(str, find, replace) {\n    // @ts-ignore\n    if (str.replaceAll) // @ts-ignore\n    return str.replaceAll(find, replace);\n    return str.split(find).join(replace);\n}\nfunction $6c7bd7858deea686$var$escapeRegex(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n\nexport {$6c7bd7858deea686$export$cd11ab140839f11d as NumberParser};\n//# sourceMappingURL=NumberParser.module.js.map\n","import {createContext} from 'react';\r\n\r\nexport type DashboardSidenavStatus = 'open' | 'closed' | 'compact';\r\n\r\nexport interface DashboardContextValue {\r\n  leftSidenavStatus: DashboardSidenavStatus;\r\n  setLeftSidenavStatus: (status: DashboardSidenavStatus) => void;\r\n  rightSidenavStatus: DashboardSidenavStatus;\r\n  setRightSidenavStatus: (status: DashboardSidenavStatus) => void;\r\n  isMobileMode: boolean | null;\r\n  leftSidenavCanBeCompact?: boolean;\r\n  name: string;\r\n}\r\n\r\nexport const DashboardLayoutContext = createContext<DashboardContextValue>(\r\n  null!\r\n);\r\n","import {useEffect} from 'react';\r\n\r\nexport function useBlockBodyOverflow(disable: boolean = false) {\r\n  useEffect(() => {\r\n    if (disable) {\r\n      document.documentElement.classList.remove('no-page-overflow');\r\n    } else {\r\n      document.documentElement.classList.add('no-page-overflow');\r\n    }\r\n    return () => {\r\n      document.documentElement.classList.remove('no-page-overflow');\r\n    };\r\n  }, [disable]);\r\n}\r\n","import {ComponentPropsWithoutRef, useCallback, useMemo} from 'react';\r\nimport {\r\n  DashboardLayoutContext,\r\n  DashboardSidenavStatus,\r\n} from './dashboard-layout-context';\r\nimport {Underlay} from '../overlays/underlay';\r\nimport {AnimatePresence} from 'framer-motion';\r\nimport {useControlledState} from '@react-stately/utils';\r\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\r\nimport {\r\n  getFromLocalStorage,\r\n  setInLocalStorage,\r\n} from '../../utils/hooks/local-storage';\r\nimport {useBlockBodyOverflow} from '../../utils/hooks/use-block-body-overflow';\r\nimport clsx from 'clsx';\r\n\r\ninterface DashboardLayoutProps extends ComponentPropsWithoutRef<'div'> {\r\n  name: string;\r\n  leftSidenavCanBeCompact?: boolean;\r\n  leftSidenavStatus?: DashboardSidenavStatus;\r\n  onLeftSidenavChange?: (status: DashboardSidenavStatus) => void;\r\n  rightSidenavStatus?: DashboardSidenavStatus;\r\n  initialRightSidenavStatus?: DashboardSidenavStatus;\r\n  onRightSidenavChange?: (status: DashboardSidenavStatus) => void;\r\n  height?: string;\r\n  gridClassName?: string;\r\n  blockBodyOverflow?: boolean;\r\n}\r\nexport function DashboardLayout({\r\n  children,\r\n  leftSidenavStatus: leftSidenav,\r\n  onLeftSidenavChange,\r\n  rightSidenavStatus: rightSidenav,\r\n  initialRightSidenavStatus,\r\n  onRightSidenavChange,\r\n  name,\r\n  leftSidenavCanBeCompact,\r\n  height = 'h-screen',\r\n  className,\r\n  gridClassName = 'dashboard-grid',\r\n  blockBodyOverflow = true,\r\n  ...domProps\r\n}: DashboardLayoutProps) {\r\n  useBlockBodyOverflow(!blockBodyOverflow);\r\n  const isMobile = useMediaQuery('(max-width: 1024px)');\r\n\r\n  const isCompactModeInitially = useMemo(() => {\r\n    return !name ? false : getFromLocalStorage(`${name}.sidenav.compact`);\r\n  }, [name]);\r\n  const defaultLeftSidenavStatus = isCompactModeInitially ? 'compact' : 'open';\r\n  const [leftSidenavStatus, setLeftSidenavStatus] = useControlledState(\r\n    leftSidenav,\r\n    isMobile ? 'closed' : defaultLeftSidenavStatus,\r\n    onLeftSidenavChange,\r\n  );\r\n\r\n  const rightSidenavStatusDefault = useMemo(() => {\r\n    if (isMobile) {\r\n      return 'closed';\r\n    }\r\n    if (initialRightSidenavStatus != null) {\r\n      return initialRightSidenavStatus;\r\n    }\r\n    const userSelected = getFromLocalStorage(\r\n      `${name}.sidenav.right.position`,\r\n      'open',\r\n    );\r\n    if (userSelected != null) {\r\n      return userSelected;\r\n    }\r\n    return initialRightSidenavStatus || 'closed';\r\n  }, [isMobile, name, initialRightSidenavStatus]);\r\n  const [rightSidenavStatus, _setRightSidenavStatus] = useControlledState(\r\n    rightSidenav,\r\n    rightSidenavStatusDefault,\r\n    onRightSidenavChange,\r\n  );\r\n  const setRightSidenavStatus = useCallback(\r\n    (status: DashboardSidenavStatus) => {\r\n      _setRightSidenavStatus(status);\r\n      setInLocalStorage(`${name}.sidenav.right.position`, status);\r\n    },\r\n    [_setRightSidenavStatus, name],\r\n  );\r\n\r\n  const shouldShowUnderlay =\r\n    isMobile && (leftSidenavStatus === 'open' || rightSidenavStatus === 'open');\r\n\r\n  return (\r\n    <DashboardLayoutContext.Provider\r\n      value={{\r\n        leftSidenavStatus,\r\n        setLeftSidenavStatus,\r\n        rightSidenavStatus,\r\n        setRightSidenavStatus,\r\n        leftSidenavCanBeCompact,\r\n        name,\r\n        isMobileMode: isMobile,\r\n      }}\r\n    >\r\n      <div\r\n        {...domProps}\r\n        className={clsx('relative isolate', gridClassName, className, height)}\r\n      >\r\n        {children}\r\n        <AnimatePresence>\r\n          {shouldShowUnderlay && (\r\n            <Underlay\r\n              position=\"fixed\"\r\n              key=\"dashboard-underlay\"\r\n              onClick={() => {\r\n                setLeftSidenavStatus('closed');\r\n                setRightSidenavStatus('closed');\r\n              }}\r\n            />\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </DashboardLayoutContext.Provider>\r\n  );\r\n}\r\n","import {cloneElement, ReactElement} from 'react';\r\nimport clsx from 'clsx';\r\n\r\ninterface DashboardContentProps {\r\n  children: ReactElement<{className: string}>;\r\n  isScrollable?: boolean;\r\n}\r\nexport function DashboardContent({\r\n  children,\r\n  isScrollable = true,\r\n}: DashboardContentProps) {\r\n  return cloneElement(children, {\r\n    className: clsx(\r\n      children.props.className,\r\n      isScrollable && 'overflow-y-auto stable-scrollbar',\r\n      'dashboard-grid-content'\r\n    ),\r\n  });\r\n}\r\n","import clsx from 'clsx';\r\nimport {m} from 'framer-motion';\r\nimport {cloneElement, ReactElement, useContext} from 'react';\r\nimport {DashboardLayoutContext} from './dashboard-layout-context';\r\n\r\nexport interface DashboardSidenavChildrenProps {\r\n  className?: string;\r\n  isCompactMode?: boolean;\r\n}\r\n\r\nexport interface SidenavProps {\r\n  className?: string;\r\n  children: ReactElement<DashboardSidenavChildrenProps>;\r\n  position?: 'left' | 'right';\r\n  size?: 'sm' | 'md' | 'lg' | string;\r\n  mode?: 'overlay';\r\n  // absolute will place sidenav between navbar/footer, fixed will overlay it over nav/footer.\r\n  overlayPosition?: 'absolute' | 'fixed';\r\n  display?: 'flex' | 'block';\r\n  overflow?: string;\r\n  forceClosed?: boolean;\r\n}\r\nexport function DashboardSidenav({\r\n  className,\r\n  position,\r\n  children,\r\n  size = 'md',\r\n  mode,\r\n  overlayPosition = 'fixed',\r\n  display = 'flex',\r\n  overflow = 'overflow-hidden',\r\n  forceClosed = false,\r\n}: SidenavProps) {\r\n  const {\r\n    isMobileMode,\r\n    leftSidenavStatus,\r\n    setLeftSidenavStatus,\r\n    rightSidenavStatus,\r\n    setRightSidenavStatus,\r\n  } = useContext(DashboardLayoutContext);\r\n  const status = position === 'left' ? leftSidenavStatus : rightSidenavStatus;\r\n  const isOverlayMode = isMobileMode || mode === 'overlay';\r\n\r\n  const variants = {\r\n    open: {display, width: null as any},\r\n    compact: {\r\n      display,\r\n      width: null as any,\r\n    },\r\n    closed: {\r\n      width: 0,\r\n      transitionEnd: {\r\n        display: 'none',\r\n      },\r\n    },\r\n  };\r\n\r\n  const sizeClassName = getSize(status === 'compact' ? 'compact' : size);\r\n\r\n  return (\r\n    <m.div\r\n      variants={variants}\r\n      initial={false}\r\n      animate={forceClosed ? 'closed' : status}\r\n      transition={{type: 'tween', duration: 0.15}}\r\n      onClick={e => {\r\n        // close sidenav when user clicks a link or button on mobile\r\n        const target = e.target as HTMLElement;\r\n        if (isMobileMode && (target.closest('button') || target.closest('a'))) {\r\n          setLeftSidenavStatus('closed');\r\n          setRightSidenavStatus('closed');\r\n        }\r\n      }}\r\n      className={clsx(\r\n        className,\r\n        position === 'left'\r\n          ? 'dashboard-grid-sidenav-left'\r\n          : 'dashboard-grid-sidenav-right',\r\n        'will-change-[width]',\r\n        overflow,\r\n        sizeClassName,\r\n        isOverlayMode && `${overlayPosition} bottom-0 top-0 z-20 shadow-2xl`,\r\n        isOverlayMode && position === 'left' && 'left-0',\r\n        isOverlayMode && position === 'right' && 'right-0',\r\n      )}\r\n    >\r\n      {cloneElement<DashboardSidenavChildrenProps>(children, {\r\n        className: clsx(\r\n          children.props.className,\r\n          'w-full h-full',\r\n          status === 'compact' && 'compact-scrollbar',\r\n        ),\r\n        isCompactMode: status === 'compact',\r\n      })}\r\n    </m.div>\r\n  );\r\n}\r\n\r\nfunction getSize(size: SidenavProps['size'] | 'compact'): string {\r\n  switch (size) {\r\n    case 'compact':\r\n      return 'w-80';\r\n    case 'sm':\r\n      return 'w-224';\r\n    case 'md':\r\n      return 'w-240';\r\n    case 'lg':\r\n      return 'w-288';\r\n    default:\r\n      return size || '';\r\n  }\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const MenuOpenIcon = createSvgIcon(\r\n  <path d=\"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z\" />\r\n, 'MenuOpenOutlined');\r\n","import {Navbar, NavbarProps} from '../navigation/navbar/navbar';\r\nimport {IconButton} from '../buttons/icon-button';\r\nimport React, {useContext} from 'react';\r\nimport clsx from 'clsx';\r\nimport {DashboardLayoutContext} from './dashboard-layout-context';\r\nimport {setInLocalStorage} from '../../utils/hooks/local-storage';\r\nimport {MenuOpenIcon} from '@common/icons/material/MenuOpen';\r\n\r\nexport interface DashboardNavbarProps\r\n  extends Omit<NavbarProps, 'toggleButton'> {\r\n  hideToggleButton?: boolean;\r\n}\r\nexport function DashboardNavbar({\r\n  children,\r\n  className,\r\n  hideToggleButton,\r\n  ...props\r\n}: DashboardNavbarProps) {\r\n  const {\r\n    isMobileMode,\r\n    leftSidenavStatus,\r\n    setLeftSidenavStatus,\r\n    name,\r\n    leftSidenavCanBeCompact,\r\n  } = useContext(DashboardLayoutContext);\r\n\r\n  const shouldToggleCompactMode = leftSidenavCanBeCompact && !isMobileMode;\r\n  const shouldShowToggle =\r\n    !hideToggleButton && (isMobileMode || leftSidenavCanBeCompact);\r\n\r\n  const handleToggle = () => {\r\n    setLeftSidenavStatus(leftSidenavStatus === 'open' ? 'closed' : 'open');\r\n  };\r\n\r\n  const handleCompactModeToggle = () => {\r\n    const newStatus = leftSidenavStatus === 'compact' ? 'open' : 'compact';\r\n    setInLocalStorage(`${name}.sidenav.compact`, newStatus === 'compact');\r\n    setLeftSidenavStatus(newStatus);\r\n  };\r\n\r\n  return (\r\n    <Navbar\r\n      className={clsx('dashboard-grid-navbar', className)}\r\n      border=\"border-b\"\r\n      size=\"sm\"\r\n      toggleButton={\r\n        shouldShowToggle ? (\r\n          <IconButton\r\n            size=\"md\"\r\n            onClick={() => {\r\n              if (shouldToggleCompactMode) {\r\n                handleCompactModeToggle();\r\n              } else {\r\n                handleToggle();\r\n              }\r\n            }}\r\n          >\r\n            <MenuOpenIcon />\r\n          </IconButton>\r\n        ) : undefined\r\n      }\r\n      {...props}\r\n    >\r\n      {children}\r\n    </Navbar>\r\n  );\r\n}\r\n","import {ComponentType} from 'react';\r\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\r\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\r\nimport {ChipValue} from '@common/ui/forms/input-field/chip-field/chip-field';\r\nimport {AbsoluteDateRange} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\r\nimport {DateValue} from '@internationalized/date';\r\nimport {FilterListControlProps} from '@common/datatable/filters/filter-list/filter-list-control';\r\n\r\nexport interface FilterSelectControl {\r\n  type: FilterControlType.Select;\r\n  options: {label: MessageDescriptor; key: string | number; value: any}[];\r\n  defaultValue?: string | number | boolean;\r\n  placeholder?: MessageDescriptor;\r\n  searchPlaceholder?: MessageDescriptor;\r\n  showSearchField?: boolean;\r\n}\r\n\r\nexport interface FilterNumberInputControl {\r\n  type: FilterControlType.Input;\r\n  placeholder?: MessageDescriptor;\r\n  inputType: 'number';\r\n  minValue?: number;\r\n  maxValue?: number;\r\n  defaultValue: number;\r\n}\r\n\r\nexport interface FilterTextInputControl {\r\n  type: FilterControlType.Input;\r\n  placeholder?: MessageDescriptor;\r\n  inputType: 'string';\r\n  minLength?: number;\r\n  maxLength?: number;\r\n  defaultValue: string;\r\n}\r\n\r\nexport interface FilterSelectModelControl {\r\n  type: FilterControlType.SelectModel;\r\n  model: string;\r\n  defaultValue?: NormalizedModel;\r\n}\r\n\r\nexport interface FilterChipFieldControl {\r\n  type: FilterControlType.ChipField;\r\n  options: FilterSelectControl['options'];\r\n  placeholder?: MessageDescriptor;\r\n  defaultValue: ChipValue[];\r\n}\r\n\r\nexport interface FilterBooleanToggleControl {\r\n  type: FilterControlType.BooleanToggle;\r\n  // value can be something other than boolean, toggling will either send that value or nothing\r\n  defaultValue: string | number | boolean | null;\r\n}\r\n\r\nexport interface DatePickerFilterControl {\r\n  type: FilterControlType.DateRangePicker;\r\n  defaultValue: AbsoluteDateRange;\r\n  min?: DateValue;\r\n  max?: DateValue;\r\n}\r\n\r\nexport interface CustomFilterControl {\r\n  type: FilterControlType.Custom;\r\n  panel: ComponentType<{filter: BackendFilter<CustomFilterControl>}>;\r\n  listItem: ComponentType<FilterListControlProps<number, CustomFilterControl>>;\r\n  defaultValue?: any;\r\n}\r\n\r\nexport type FilterControl =\r\n  | FilterSelectControl\r\n  | FilterNumberInputControl\r\n  | FilterTextInputControl\r\n  | FilterSelectModelControl\r\n  | FilterChipFieldControl\r\n  | DatePickerFilterControl\r\n  | FilterBooleanToggleControl\r\n  | CustomFilterControl;\r\n\r\nexport interface BackendFilter<T = FilterControl> {\r\n  key: string;\r\n  label: MessageDescriptor;\r\n  description?: MessageDescriptor;\r\n  control: T;\r\n  defaultOperator: FilterOperator;\r\n  operators?: FilterOperator[];\r\n  extraFilters?: {key: string; operator: FilterOperator; value: any}[];\r\n}\r\n\r\nexport enum FilterControlType {\r\n  Select = 'select',\r\n  DateRangePicker = 'dateRangePicker',\r\n  SelectModel = 'selectModel',\r\n  Input = 'input',\r\n  BooleanToggle = 'booleanToggle',\r\n  ChipField = 'chipField',\r\n  Custom = 'custom',\r\n}\r\n\r\nexport enum FilterOperator {\r\n  eq = '=',\r\n  ne = '!=',\r\n  gt = '>',\r\n  gte = '>=',\r\n  lt = '<',\r\n  lte = '<=',\r\n  has = 'has',\r\n  hasAll = 'hasAll',\r\n  doesntHave = 'doesntHave',\r\n  between = 'between',\r\n}\r\n\r\nexport const ALL_PRIMITIVE_OPERATORS = [\r\n  FilterOperator.eq,\r\n  FilterOperator.ne,\r\n  FilterOperator.gt,\r\n  FilterOperator.gte,\r\n  FilterOperator.lt,\r\n  FilterOperator.lte,\r\n];\r\n","import {ZonedDateTime} from '@internationalized/date';\r\n\r\nexport function startOfDay(date: ZonedDateTime): ZonedDateTime {\r\n  return date.set({hour: 0, minute: 0, second: 0, millisecond: 0});\r\n}\r\n","import {ZonedDateTime} from '@internationalized/date';\r\n\r\nexport function endOfDay(date: ZonedDateTime): ZonedDateTime {\r\n  return date.set({\r\n    hour: 24 - 1,\r\n    minute: 60 - 1,\r\n    second: 60 - 1,\r\n    millisecond: 1000 - 1,\r\n  });\r\n}\r\n","import {getBootstrapData} from '../core/bootstrap-data/use-backend-bootstrap-data';\r\nimport {getLocalTimeZone} from '@internationalized/date';\r\n\r\nexport function getUserTimezone(): string {\r\n  const defaultTimezone = getBootstrapData()?.settings.dates.default_timezone;\r\n  const preferredTimezone =\r\n    getBootstrapData()?.user?.timezone || defaultTimezone || 'auto';\r\n\r\n  if (!preferredTimezone || preferredTimezone === 'auto') {\r\n    return getLocalTimeZone();\r\n  }\r\n  return preferredTimezone;\r\n}\r\n","import {DateRangeValue} from '../date-range-value';\r\nimport {message} from '@common/i18n/message';\r\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\r\nimport {\r\n  endOfMonth,\r\n  endOfWeek,\r\n  endOfYear,\r\n  now,\r\n  startOfMonth,\r\n  startOfWeek,\r\n  startOfYear,\r\n} from '@internationalized/date';\r\nimport {startOfDay} from '@common/utils/date/start-of-day';\r\nimport {endOfDay} from '@common/utils/date/end-of-day';\r\nimport {getBootstrapData} from '@common/core/bootstrap-data/use-backend-bootstrap-data';\r\nimport {getUserTimezone} from '@common/i18n/get-user-timezone';\r\n\r\nconst Now = startOfDay(now(getUserTimezone()));\r\nconst locale = getBootstrapData()?.i18n?.language || 'en';\r\n\r\nexport interface DateRangePreset {\r\n  key: number;\r\n  label: MessageDescriptor;\r\n  getRangeValue: () => DateRangeValue;\r\n}\r\n\r\nexport const DateRangePresets: DateRangePreset[] = [\r\n  {\r\n    key: 0,\r\n    label: message('Today'),\r\n    getRangeValue: () => ({\r\n      preset: 0,\r\n      start: Now,\r\n      end: endOfDay(Now),\r\n    }),\r\n  },\r\n  {\r\n    key: 1,\r\n    label: message('Yesterday'),\r\n    getRangeValue: () => ({\r\n      preset: 1,\r\n      start: Now.subtract({days: 1}),\r\n      end: endOfDay(Now).subtract({days: 1}),\r\n    }),\r\n  },\r\n  {\r\n    key: 2,\r\n    label: message('This week'),\r\n    getRangeValue: () => ({\r\n      preset: 2,\r\n      start: startOfWeek(Now, locale),\r\n      end: endOfWeek(endOfDay(Now), locale),\r\n    }),\r\n  },\r\n  {\r\n    key: 3,\r\n    label: message('Last week'),\r\n    getRangeValue: () => {\r\n      const start = startOfWeek(Now, locale).subtract({days: 7});\r\n      return {\r\n        preset: 3,\r\n        start,\r\n        end: start.add({days: 6}),\r\n      };\r\n    },\r\n  },\r\n  {\r\n    key: 4,\r\n    label: message('Last 7 days'),\r\n    getRangeValue: () => ({\r\n      preset: 4,\r\n      start: Now.subtract({days: 7}),\r\n      end: endOfDay(Now),\r\n    }),\r\n  },\r\n  {\r\n    key: 6,\r\n    label: message('Last 30 days'),\r\n    getRangeValue: () => ({\r\n      preset: 6,\r\n      start: Now.subtract({days: 30}),\r\n      end: endOfDay(Now),\r\n    }),\r\n  },\r\n  {\r\n    key: 7,\r\n    label: message('Last 3 months'),\r\n    getRangeValue: () => ({\r\n      preset: 7,\r\n      start: Now.subtract({months: 3}),\r\n      end: endOfDay(Now),\r\n    }),\r\n  },\r\n  {\r\n    key: 8,\r\n    label: message('Last 12 months'),\r\n    getRangeValue: () => ({\r\n      preset: 8,\r\n      start: Now.subtract({months: 12}),\r\n      end: endOfDay(Now),\r\n    }),\r\n  },\r\n  {\r\n    key: 9,\r\n    label: message('This month'),\r\n    getRangeValue: () => ({\r\n      preset: 9,\r\n      start: startOfMonth(Now),\r\n      end: endOfMonth(endOfDay(Now)),\r\n    }),\r\n  },\r\n  {\r\n    key: 10,\r\n    label: message('This year'),\r\n    getRangeValue: () => ({\r\n      preset: 10,\r\n      start: startOfYear(Now),\r\n      end: endOfYear(endOfDay(Now)),\r\n    }),\r\n  },\r\n  {\r\n    key: 11,\r\n    label: message('Last year'),\r\n    getRangeValue: () => ({\r\n      preset: 11,\r\n      start: startOfYear(Now).subtract({years: 1}),\r\n      end: endOfYear(endOfDay(Now)).subtract({years: 1}),\r\n    }),\r\n  },\r\n];\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const DateRangeIcon = createSvgIcon(\r\n  <path d=\"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z\" />\r\n, 'DateRangeOutlined');\r\n","import {FocusScope} from '@react-aria/focus';\r\nimport React, {ComponentPropsWithoutRef, CSSProperties, ReactNode} from 'react';\r\nimport clsx from 'clsx';\r\n\r\ninterface InputProps {\r\n  className?: string;\r\n  children: ReactNode;\r\n  autoFocus?: boolean;\r\n  disabled?: boolean;\r\n  style?: CSSProperties;\r\n  inputProps?: ComponentPropsWithoutRef<'div'>;\r\n  wrapperProps?: ComponentPropsWithoutRef<'div'>;\r\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\r\n}\r\n\r\nexport const Input = React.forwardRef<HTMLDivElement, InputProps>(\r\n  (props, ref) => {\r\n    const {\r\n      children,\r\n      inputProps,\r\n      wrapperProps,\r\n      className,\r\n      autoFocus,\r\n      style,\r\n      onClick,\r\n    } = props;\r\n\r\n    return (\r\n      <div {...wrapperProps} onClick={onClick}>\r\n        <div\r\n          {...inputProps}\r\n          role=\"group\"\r\n          className={clsx(\r\n            className,\r\n            'flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60'\r\n          )}\r\n          ref={ref}\r\n          style={style}\r\n        >\r\n          <FocusScope autoFocus={autoFocus}>{children}</FocusScope>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React, {ComponentPropsWithoutRef, FocusEventHandler, Ref} from 'react';\r\nimport clsx from 'clsx';\r\nimport {createFocusManager} from '@react-aria/focus';\r\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\r\nimport {getInputFieldClassNames} from '../../get-input-field-class-names';\r\nimport {Field, FieldProps} from '../../field';\r\nimport {Input} from '../../input';\r\nimport {useField} from '../../use-field';\r\n\r\nexport interface DatePickerFieldProps\r\n  extends Omit<FieldProps, 'fieldClassNames'> {\r\n  inputRef?: Ref<HTMLDivElement>;\r\n  onBlur?: FocusEventHandler;\r\n  showCalendarFooter?: boolean;\r\n}\r\nexport const DatePickerField = React.forwardRef<\r\n  HTMLDivElement,\r\n  DatePickerFieldProps\r\n>(({inputRef, wrapperProps, children, onBlur, ...other}, ref) => {\r\n  const fieldClassNames = getInputFieldClassNames(other);\r\n  const objRef = useObjectRef(ref);\r\n\r\n  const {fieldProps, inputProps} = useField({\r\n    ...other,\r\n    focusRef: objRef,\r\n    labelElementType: 'span',\r\n  });\r\n\r\n  fieldClassNames.wrapper = clsx(\r\n    fieldClassNames.wrapper,\r\n    other.disabled && 'pointer-events-none',\r\n  );\r\n\r\n  return (\r\n    <Field\r\n      wrapperProps={mergeProps<ComponentPropsWithoutRef<'div'>[]>(\r\n        wrapperProps!,\r\n        {\r\n          onBlur: e => {\r\n            if (!objRef.current?.contains(e.relatedTarget)) {\r\n              onBlur?.(e);\r\n            }\r\n          },\r\n          onClick: () => {\r\n            // focus first segment when clicking on label or somewhere else in the field, but no directly on segment\r\n            const focusManager = createFocusManager(objRef);\r\n            focusManager?.focusFirst();\r\n          },\r\n        },\r\n      )}\r\n      fieldClassNames={fieldClassNames}\r\n      ref={objRef}\r\n      {...fieldProps}\r\n    >\r\n      <Input\r\n        inputProps={inputProps}\r\n        className={clsx(fieldClassNames.input, 'gap-10')}\r\n        ref={inputRef}\r\n      >\r\n        {children}\r\n      </Input>\r\n    </Field>\r\n  );\r\n});\r\n","import {CalendarDate, DateValue} from '@internationalized/date';\r\n\r\nexport function getDefaultGranularity(date: DateValue) {\r\n  if (date instanceof CalendarDate) {\r\n    return 'day';\r\n  }\r\n  return 'minute';\r\n}\r\n\r\nexport function dateIsInvalid(\r\n  date: CalendarDate,\r\n  min?: DateValue,\r\n  max?: DateValue\r\n) {\r\n  return (\r\n    (min != null && date.compare(min) < 0) ||\r\n    (max != null && date.compare(max) > 0)\r\n  );\r\n}\r\n","import {useState} from 'react';\r\nimport {DateValue, toZoned, ZonedDateTime} from '@internationalized/date';\r\nimport {getDefaultGranularity} from './utils';\r\nimport type {DatePickerValueProps} from './date-picker/use-date-picker-state';\r\nimport {DateRangeValue} from './date-range-picker/date-range-value';\r\nimport {useUserTimezone} from '@common/i18n/use-user-timezone';\r\n\r\nexport function useBaseDatePickerState(\r\n  selectedDate: DateValue,\r\n  props:\r\n    | DatePickerValueProps<ZonedDateTime>\r\n    | DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>\r\n) {\r\n  const timezone = useUserTimezone();\r\n  const [calendarIsOpen, setCalendarIsOpen] = useState(false);\r\n  const closeDialogOnSelection = props.closeDialogOnSelection ?? true;\r\n\r\n  const granularity = props.granularity || getDefaultGranularity(selectedDate);\r\n  const min = props.min ? toZoned(props.min, timezone) : undefined;\r\n  const max = props.max ? toZoned(props.max, timezone) : undefined;\r\n\r\n  return {\r\n    timezone,\r\n    granularity,\r\n    min,\r\n    max,\r\n    calendarIsOpen,\r\n    setCalendarIsOpen,\r\n    closeDialogOnSelection,\r\n  };\r\n}\r\n","import {useMemo} from 'react';\r\nimport {now} from '@internationalized/date';\r\nimport {useUserTimezone} from './use-user-timezone';\r\n\r\nexport function useCurrentDateTime() {\r\n  const timezone = useUserTimezone();\r\n  return useMemo(() => {\r\n    return now(timezone);\r\n  }, [timezone]);\r\n}\r\n","import {useControlledState} from '@react-stately/utils';\r\nimport {HTMLAttributes, useCallback, useState} from 'react';\r\nimport {\r\n  CalendarDate,\r\n  DateValue,\r\n  endOfMonth,\r\n  isSameDay,\r\n  isSameMonth,\r\n  maxDate,\r\n  minDate,\r\n  startOfMonth,\r\n  toCalendarDate,\r\n  toZoned,\r\n  ZonedDateTime,\r\n} from '@internationalized/date';\r\nimport {\r\n  BaseDatePickerState,\r\n  DatePickerValueProps,\r\n} from '../date-picker/use-date-picker-state';\r\nimport {DateRangeValue} from './date-range-value';\r\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\r\nimport {startOfDay} from '@common/utils/date/start-of-day';\r\nimport {endOfDay} from '@common/utils/date/end-of-day';\r\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\r\n\r\nexport interface IsPlaceholderValue {\r\n  start: boolean;\r\n  end: boolean;\r\n}\r\n\r\nexport type DateRangePickerState = BaseDatePickerState<\r\n  DateRangeValue,\r\n  IsPlaceholderValue\r\n>;\r\n\r\nexport function useDateRangePickerState(\r\n  props: DatePickerValueProps<Partial<DateRangeValue>, DateRangeValue>,\r\n): DateRangePickerState {\r\n  const now = useCurrentDateTime();\r\n  const [isPlaceholder, setIsPlaceholder] = useState<IsPlaceholderValue>({\r\n    start: (!props.value || !props.value.start) && !props.defaultValue?.start,\r\n    end: (!props.value || !props.value.end) && !props.defaultValue?.end,\r\n  });\r\n\r\n  // if user clears the date, we will want to still keep an\r\n  // instance internally, but return null via \"onChange\" callback\r\n  const setStateValue = props.onChange;\r\n  const [internalValue, setInternalValue] = useControlledState(\r\n    props.value ? completeRange(props.value, now) : undefined,\r\n    !props.value ? completeRange(props.defaultValue, now) : undefined,\r\n    value => {\r\n      setIsPlaceholder({start: false, end: false});\r\n      setStateValue?.(value);\r\n    },\r\n  );\r\n\r\n  const {\r\n    min,\r\n    max,\r\n    granularity,\r\n    timezone,\r\n    calendarIsOpen,\r\n    setCalendarIsOpen,\r\n    closeDialogOnSelection,\r\n  } = useBaseDatePickerState(internalValue.start, props);\r\n\r\n  const clear = useCallback(() => {\r\n    setIsPlaceholder({start: true, end: true});\r\n    setInternalValue(completeRange(null, now));\r\n    setStateValue?.(null);\r\n    setCalendarIsOpen(false);\r\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\r\n\r\n  const [anchorDate, setAnchorDate] = useState<CalendarDate | null>(null);\r\n  const [isHighlighting, setIsHighlighting] = useState(false);\r\n  const [highlightedRange, setHighlightedRange] =\r\n    useState<DateRangeValue>(internalValue);\r\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\r\n    return rangeToCalendarDates(internalValue, max);\r\n  });\r\n\r\n  const constrainRange = useCallback(\r\n    (range: DateRangeValue): DateRangeValue => {\r\n      let start = range.start;\r\n      let end = range.end;\r\n\r\n      // make sure start date is after min date and before max date/range end\r\n      if (min) {\r\n        start = maxDate(start, min);\r\n      }\r\n      const startMax = max ? minDate(max, end) : end;\r\n      start = minDate(start, startMax);\r\n\r\n      // make sure end date is after min date/range start and before max date\r\n      const endMin = min ? maxDate(min, start) : start;\r\n      end = maxDate(end, endMin);\r\n\r\n      if (max) {\r\n        end = minDate(end, max);\r\n      }\r\n\r\n      return {start: toZoned(start, timezone), end: toZoned(end, timezone)};\r\n    },\r\n    [min, max, timezone],\r\n  );\r\n\r\n  const setSelectedValue = useCallback(\r\n    (newRange: DateRangeValue) => {\r\n      const value = {\r\n        ...constrainRange(newRange),\r\n        preset: newRange.preset,\r\n      };\r\n      setInternalValue(value);\r\n      setHighlightedRange(value);\r\n      setCalendarDates(rangeToCalendarDates(value, max));\r\n      setIsPlaceholder({start: false, end: false});\r\n    },\r\n    [setInternalValue, constrainRange, max],\r\n  );\r\n\r\n  const dayIsActive = useCallback(\r\n    (day: CalendarDate) => {\r\n      return (\r\n        (!isPlaceholder.start && isSameDay(day, highlightedRange.start)) ||\r\n        (!isPlaceholder.end && isSameDay(day, highlightedRange.end))\r\n      );\r\n    },\r\n    [highlightedRange, isPlaceholder],\r\n  );\r\n\r\n  const dayIsHighlighted = useCallback(\r\n    (day: CalendarDate) => {\r\n      return (\r\n        (isHighlighting || (!isPlaceholder.start && !isPlaceholder.end)) &&\r\n        day.compare(highlightedRange.start) >= 0 &&\r\n        day.compare(highlightedRange.end) <= 0\r\n      );\r\n    },\r\n    [highlightedRange, isPlaceholder, isHighlighting],\r\n  );\r\n\r\n  const dayIsRangeStart = useCallback(\r\n    (day: CalendarDate) => isSameDay(day, highlightedRange.start),\r\n    [highlightedRange],\r\n  );\r\n\r\n  const dayIsRangeEnd = useCallback(\r\n    (day: CalendarDate) => isSameDay(day, highlightedRange.end),\r\n    [highlightedRange],\r\n  );\r\n\r\n  const getCellProps = useCallback(\r\n    (date: CalendarDate, isSameMonth: boolean): HTMLAttributes<HTMLElement> => {\r\n      return {\r\n        onPointerEnter: () => {\r\n          if (isHighlighting && isSameMonth) {\r\n            setHighlightedRange(\r\n              makeRange({start: anchorDate!, end: date, timezone}),\r\n            );\r\n          }\r\n        },\r\n        onClick: () => {\r\n          if (!isHighlighting) {\r\n            setIsHighlighting(true);\r\n            setAnchorDate(date);\r\n            setHighlightedRange(makeRange({start: date, end: date, timezone}));\r\n          } else {\r\n            const finalRange = makeRange({\r\n              start: anchorDate!,\r\n              end: date,\r\n              timezone,\r\n            });\r\n            // cast to start and end of day after making range, because \"makeRange\"\r\n            // will flip start and end dates, if they are out of order\r\n            finalRange.start = startOfDay(finalRange.start);\r\n            finalRange.end = endOfDay(finalRange.end);\r\n            setIsHighlighting(false);\r\n            setAnchorDate(null);\r\n            setSelectedValue?.(finalRange);\r\n            if (closeDialogOnSelection) {\r\n              setCalendarIsOpen?.(false);\r\n            }\r\n          }\r\n        },\r\n      };\r\n    },\r\n    [\r\n      anchorDate,\r\n      isHighlighting,\r\n      setSelectedValue,\r\n      setCalendarIsOpen,\r\n      closeDialogOnSelection,\r\n      timezone,\r\n    ],\r\n  );\r\n\r\n  return {\r\n    selectedValue: internalValue,\r\n    setSelectedValue,\r\n    calendarIsOpen,\r\n    setCalendarIsOpen,\r\n    dayIsActive,\r\n    dayIsHighlighted,\r\n    dayIsRangeStart,\r\n    dayIsRangeEnd,\r\n    getCellProps,\r\n    calendarDates,\r\n    setIsPlaceholder,\r\n    isPlaceholder,\r\n    clear,\r\n    setCalendarDates,\r\n    min,\r\n    max,\r\n    granularity,\r\n    timezone,\r\n    closeDialogOnSelection,\r\n  };\r\n}\r\n\r\nfunction rangeToCalendarDates(\r\n  range: DateRangeValue,\r\n  max?: DateValue,\r\n): CalendarDate[] {\r\n  let start = toCalendarDate(startOfMonth(range.start));\r\n  let end = toCalendarDate(endOfMonth(range.end));\r\n\r\n  // make sure we don't show the same month twice\r\n  if (isSameMonth(start, end)) {\r\n    end = endOfMonth(end.add({months: 1}));\r\n  }\r\n\r\n  // if next month is disabled, show previous instead\r\n  if (max && end.compare(max) > 0) {\r\n    end = start;\r\n    start = startOfMonth(start.subtract({months: 1}));\r\n  }\r\n  return [start, end];\r\n}\r\n\r\ninterface MakeRangeProps {\r\n  start: DateValue;\r\n  end: DateValue;\r\n  timezone: string;\r\n}\r\nfunction makeRange(props: MakeRangeProps): DateRangeValue {\r\n  const start = toZoned(props.start, props.timezone);\r\n  const end = toZoned(props.end, props.timezone);\r\n  if (start.compare(end) > 0) {\r\n    return {start: end, end: start};\r\n  }\r\n  return {start, end};\r\n}\r\n\r\nfunction completeRange(\r\n  range: Partial<DateRangeValue> | null | undefined,\r\n  now: ZonedDateTime,\r\n): DateRangeValue {\r\n  if (range?.start && range?.end) {\r\n    return range as DateRangeValue;\r\n  } else if (!range?.start && range?.end) {\r\n    range.start = range.end.subtract({months: 1});\r\n    return range as DateRangeValue;\r\n  } else if (!range?.end && range?.start) {\r\n    range.end = range.start.add({months: 1});\r\n    return range as DateRangeValue;\r\n  }\r\n  return {start: now, end: now.add({months: 1})};\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const ArrowRightAltIcon = createSvgIcon(\r\n  <path d=\"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z\" />\r\n, 'ArrowRightAltOutlined');\r\n","import {ZonedDateTime} from '@internationalized/date';\r\n\r\nexport function adjustSegment(\r\n  value: ZonedDateTime,\r\n  part: string,\r\n  amount: number,\r\n  options: Intl.ResolvedDateTimeFormatOptions\r\n) {\r\n  switch (part) {\r\n    case 'era':\r\n    case 'year':\r\n    case 'month':\r\n    case 'day':\r\n      return value.cycle(part, amount, {round: part === 'year'});\r\n  }\r\n\r\n  if ('hour' in value) {\r\n    switch (part) {\r\n      case 'dayPeriod': {\r\n        const hours = value.hour;\r\n        const isPM = hours >= 12;\r\n        return value.set({hour: isPM ? hours - 12 : hours + 12});\r\n      }\r\n      case 'hour':\r\n      case 'minute':\r\n      case 'second':\r\n        return value.cycle(part, amount, {\r\n          round: part !== 'hour',\r\n          hourCycle: options.hour12 ? 12 : 24,\r\n        });\r\n    }\r\n  }\r\n\r\n  return value;\r\n}\r\n","import {ZonedDateTime} from '@internationalized/date';\r\n\r\nexport function setSegment(\r\n  value: ZonedDateTime,\r\n  part: string,\r\n  segmentValue: number,\r\n  options: Intl.ResolvedDateTimeFormatOptions\r\n) {\r\n  switch (part) {\r\n    case 'day':\r\n    case 'month':\r\n    case 'year':\r\n      return value.set({[part]: segmentValue});\r\n  }\r\n\r\n  if ('hour' in value) {\r\n    switch (part) {\r\n      case 'dayPeriod': {\r\n        const hours = value.hour;\r\n        const wasPM = hours >= 12;\r\n        const isPM = segmentValue >= 12;\r\n        if (isPM === wasPM) {\r\n          return value;\r\n        }\r\n        return value.set({hour: wasPM ? hours - 12 : hours + 12});\r\n      }\r\n      case 'hour':\r\n        // In 12 hour time, ensure that AM/PM does not change\r\n        if (options.hour12) {\r\n          const hours = value.hour;\r\n          const wasPM = hours >= 12;\r\n          if (!wasPM && segmentValue === 12) {\r\n            segmentValue = 0;\r\n          }\r\n          if (wasPM && segmentValue < 12) {\r\n            segmentValue += 12;\r\n          }\r\n        }\r\n      // fallthrough\r\n      case 'minute':\r\n      case 'second':\r\n        return value.set({[part]: segmentValue});\r\n    }\r\n  }\r\n\r\n  return value;\r\n}\r\n","export const PAGE_STEP = {\r\n  year: 5,\r\n  month: 2,\r\n  day: 7,\r\n  hour: 2,\r\n  minute: 15,\r\n  second: 15,\r\n  dayPeriod: 1,\r\n};\r\n","import {useFocusManager} from '@react-aria/focus';\r\nimport React, {\r\n  ComponentPropsWithoutRef,\r\n  HTMLAttributes,\r\n  KeyboardEventHandler,\r\n  useMemo,\r\n  useRef,\r\n} from 'react';\r\nimport {NumberParser} from '@internationalized/number';\r\nimport {mergeProps} from '@react-aria/utils';\r\nimport {today, ZonedDateTime} from '@internationalized/date';\r\nimport {useSelectedLocale} from '@common/i18n/selected-locale';\r\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\r\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\r\nimport {adjustSegment} from './utils/adjust-segment';\r\nimport {setSegment} from './utils/set-segment';\r\nimport {PAGE_STEP} from './utils/page-step';\r\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\r\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\r\n\r\nexport interface EditableSegment {\r\n  type: 'day' | 'dayPeriod' | 'hour' | 'minute' | 'month' | 'second' | 'year';\r\n  text: string;\r\n  value: number;\r\n  minValue: number;\r\n  maxValue: number;\r\n  minLength: number;\r\n}\r\n\r\ninterface DatePickerSegmentProps {\r\n  segment: EditableSegment;\r\n  domProps?: ComponentPropsWithoutRef<'div'>;\r\n  state: DatePickerState | DateRangePickerState;\r\n  value: ZonedDateTime;\r\n  onChange: (newValue: ZonedDateTime) => void;\r\n  isPlaceholder?: boolean;\r\n}\r\nexport function EditableDateSegment({\r\n  segment,\r\n  domProps,\r\n  value,\r\n  onChange,\r\n  isPlaceholder,\r\n  state: {timezone, calendarIsOpen, setCalendarIsOpen},\r\n}: DatePickerSegmentProps) {\r\n  const isMobile = useIsMobileMediaQuery();\r\n  const enteredKeys = useRef('');\r\n  const {localeCode} = useSelectedLocale();\r\n  const focusManager = useFocusManager();\r\n  const formatter = useDateFormatter({timeZone: timezone});\r\n  const parser = useMemo(\r\n    () => new NumberParser(localeCode, {maximumFractionDigits: 0}),\r\n    [localeCode],\r\n  );\r\n\r\n  const setSegmentValue = (newValue: number) => {\r\n    onChange(\r\n      setSegment(value, segment.type, newValue, formatter.resolvedOptions()),\r\n    );\r\n  };\r\n\r\n  const adjustSegmentValue = (amount: number) => {\r\n    onChange(\r\n      adjustSegment(value, segment.type, amount, formatter.resolvedOptions()),\r\n    );\r\n  };\r\n\r\n  const backspace = () => {\r\n    if (parser.isValidPartialNumber(segment.text)) {\r\n      const newValue = segment.text.slice(0, -1);\r\n      const parsed = parser.parse(newValue);\r\n      if (newValue.length === 0 || parsed === 0) {\r\n        const now = today(timezone);\r\n        if (segment.type in now) {\r\n          // @ts-ignore\r\n          setSegmentValue(now[segment.type]);\r\n        }\r\n      } else {\r\n        setSegmentValue(parsed);\r\n      }\r\n      enteredKeys.current = newValue;\r\n    } else if (segment.type === 'dayPeriod') {\r\n      adjustSegmentValue(-1);\r\n    }\r\n  };\r\n\r\n  const onKeyDown: KeyboardEventHandler = e => {\r\n    if (e.ctrlKey || e.metaKey || e.shiftKey || e.altKey) {\r\n      return;\r\n    }\r\n\r\n    // Navigation between date segments and deletion\r\n    switch (e.key) {\r\n      case 'ArrowLeft':\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        focusManager?.focusPrevious();\r\n        break;\r\n      case 'ArrowRight':\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        focusManager?.focusNext();\r\n        break;\r\n      case 'Enter':\r\n        (e.target as HTMLElement).closest('form')?.requestSubmit();\r\n        setCalendarIsOpen(!calendarIsOpen);\r\n        break;\r\n      case 'Tab':\r\n        break;\r\n      case 'Backspace':\r\n      case 'Delete': {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        backspace();\r\n        break;\r\n      }\r\n\r\n      // Spinbutton incrementing/decrementing\r\n      case 'ArrowUp':\r\n        e.preventDefault();\r\n        enteredKeys.current = '';\r\n        adjustSegmentValue(1);\r\n        break;\r\n      case 'ArrowDown':\r\n        e.preventDefault();\r\n        enteredKeys.current = '';\r\n        adjustSegmentValue(-1);\r\n        break;\r\n      case 'PageUp':\r\n        e.preventDefault();\r\n        enteredKeys.current = '';\r\n        adjustSegmentValue(PAGE_STEP[segment.type] || 1);\r\n        break;\r\n      case 'PageDown':\r\n        e.preventDefault();\r\n        enteredKeys.current = '';\r\n        adjustSegmentValue(-(PAGE_STEP[segment.type] || 1));\r\n        break;\r\n      case 'Home':\r\n        e.preventDefault();\r\n        enteredKeys.current = '';\r\n        setSegmentValue(segment.maxValue);\r\n        break;\r\n      case 'End':\r\n        e.preventDefault();\r\n        enteredKeys.current = '';\r\n        setSegmentValue(segment.minValue);\r\n        break;\r\n    }\r\n\r\n    onInput(e.key);\r\n  };\r\n\r\n  const amPmFormatter = useDateFormatter({hour: 'numeric', hour12: true});\r\n  const am = useMemo(() => {\r\n    const amDate = new Date();\r\n    amDate.setHours(0);\r\n    return amPmFormatter\r\n      .formatToParts(amDate)\r\n      .find(part => part.type === 'dayPeriod')!.value;\r\n  }, [amPmFormatter]);\r\n  const pm = useMemo(() => {\r\n    const pmDate = new Date();\r\n    pmDate.setHours(12);\r\n    return amPmFormatter\r\n      .formatToParts(pmDate)\r\n      .find(part => part.type === 'dayPeriod')!.value;\r\n  }, [amPmFormatter]);\r\n\r\n  // Update date values on user keyboard input\r\n  const onInput = (key: string) => {\r\n    const newValue = enteredKeys.current + key;\r\n\r\n    switch (segment.type) {\r\n      case 'dayPeriod':\r\n        if (am.toLowerCase().startsWith(key)) {\r\n          setSegmentValue(0);\r\n        } else if (pm.toLowerCase().startsWith(key)) {\r\n          setSegmentValue(12);\r\n        } else {\r\n          break;\r\n        }\r\n        focusManager?.focusNext();\r\n        break;\r\n      case 'day':\r\n      case 'hour':\r\n      case 'minute':\r\n      case 'second':\r\n      case 'month':\r\n      case 'year': {\r\n        if (!parser.isValidPartialNumber(newValue)) {\r\n          return;\r\n        }\r\n\r\n        let numberValue = parser.parse(newValue);\r\n        let segmentValue = numberValue;\r\n        let allowsZero = segment.minValue === 0;\r\n        if (segment.type === 'hour' && formatter.resolvedOptions().hour12) {\r\n          switch (formatter.resolvedOptions().hourCycle) {\r\n            case 'h11':\r\n              if (numberValue > 11) {\r\n                segmentValue = parser.parse(key);\r\n              }\r\n              break;\r\n            case 'h12':\r\n              allowsZero = false;\r\n              if (numberValue > 12) {\r\n                segmentValue = parser.parse(key);\r\n              }\r\n              break;\r\n          }\r\n\r\n          if (segment.value >= 12 && numberValue > 1) {\r\n            numberValue += 12;\r\n          }\r\n        } else if (numberValue > segment.maxValue) {\r\n          segmentValue = parser.parse(key);\r\n        }\r\n\r\n        if (Number.isNaN(numberValue)) {\r\n          return;\r\n        }\r\n\r\n        const shouldSetValue = segmentValue !== 0 || allowsZero;\r\n        if (shouldSetValue) {\r\n          setSegmentValue(segmentValue);\r\n        }\r\n\r\n        if (\r\n          Number(`${numberValue}0`) > segment.maxValue ||\r\n          newValue.length >= String(segment.maxValue).length\r\n        ) {\r\n          enteredKeys.current = '';\r\n          if (shouldSetValue) {\r\n            focusManager?.focusNext();\r\n          }\r\n        } else {\r\n          enteredKeys.current = newValue;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  const spinButtonProps: HTMLAttributes<HTMLDivElement> = isMobile\r\n    ? {}\r\n    : {\r\n        'aria-label': segment.type,\r\n        'aria-valuetext': isPlaceholder ? undefined : `${segment.value}`,\r\n        'aria-valuemin': segment.minValue,\r\n        'aria-valuemax': segment.maxValue,\r\n        'aria-valuenow': isPlaceholder ? undefined : segment.value,\r\n        tabIndex: 0,\r\n        onKeyDown,\r\n      };\r\n\r\n  return (\r\n    <div\r\n      {...mergeProps(domProps!, {\r\n        ...spinButtonProps,\r\n        onFocus: e => {\r\n          enteredKeys.current = '';\r\n          e.target.scrollIntoView({block: 'nearest'});\r\n        },\r\n        onClick: e => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        },\r\n      } as HTMLAttributes<HTMLDivElement>)}\r\n      className=\"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary\"\r\n    >\r\n      {segment.text.padStart(segment.minLength, '0')}\r\n    </div>\r\n  );\r\n}\r\n","import {useFocusManager} from '@react-aria/focus';\r\nimport {ComponentPropsWithoutRef} from 'react';\r\n\r\nexport interface LiteralSegment {\r\n  type: 'literal';\r\n  minLength: 1;\r\n  text: string;\r\n}\r\n\r\ninterface LiteralSegmentProps extends ComponentPropsWithoutRef<'div'> {\r\n  segment: LiteralSegment;\r\n  domProps?: ComponentPropsWithoutRef<'div'>;\r\n}\r\nexport function LiteralDateSegment({segment, domProps}: LiteralSegmentProps) {\r\n  const focusManager = useFocusManager();\r\n  return (\r\n    <div\r\n      {...domProps}\r\n      onPointerDown={e => {\r\n        if (e.pointerType === 'mouse') {\r\n          e.preventDefault();\r\n          const res = focusManager?.focusNext({from: e.target as HTMLElement});\r\n          if (!res) {\r\n            focusManager?.focusPrevious({from: e.target as HTMLElement});\r\n          }\r\n        }\r\n      }}\r\n      aria-hidden\r\n      className=\"min-w-4 cursor-default select-none\"\r\n    >\r\n      {segment.text}\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  DateValue,\r\n  getMinimumDayInMonth,\r\n  getMinimumMonthInYear,\r\n} from '@internationalized/date';\r\n\r\nexport function getSegmentLimits(\r\n  date: DateValue,\r\n  type: string,\r\n  options: Intl.ResolvedDateTimeFormatOptions\r\n) {\r\n  switch (type) {\r\n    case 'year':\r\n      return {\r\n        value: date.year,\r\n        placeholder: 'yyyy',\r\n        minValue: 1,\r\n        maxValue: date.calendar.getYearsInEra(date),\r\n      };\r\n    case 'month':\r\n      return {\r\n        value: date.month,\r\n        placeholder: 'mm',\r\n        minValue: getMinimumMonthInYear(date),\r\n        maxValue: date.calendar.getMonthsInYear(date),\r\n      };\r\n    case 'day':\r\n      return {\r\n        value: date.day,\r\n        minValue: getMinimumDayInMonth(date),\r\n        maxValue: date.calendar.getDaysInMonth(date),\r\n        placeholder: 'dd',\r\n      };\r\n  }\r\n\r\n  if ('hour' in date) {\r\n    switch (type) {\r\n      case 'dayPeriod':\r\n        return {\r\n          value: date.hour >= 12 ? 12 : 0,\r\n          minValue: 0,\r\n          maxValue: 12,\r\n          placeholder: '--',\r\n        };\r\n      case 'hour':\r\n        if (options.hour12) {\r\n          const isPM = date.hour >= 12;\r\n          return {\r\n            value: date.hour,\r\n            minValue: isPM ? 12 : 0,\r\n            maxValue: isPM ? 23 : 11,\r\n            placeholder: '--',\r\n          };\r\n        }\r\n\r\n        return {\r\n          value: date.hour,\r\n          minValue: 0,\r\n          maxValue: 23,\r\n          placeholder: '--',\r\n        };\r\n      case 'minute':\r\n        return {\r\n          value: date.minute,\r\n          minValue: 0,\r\n          maxValue: 59,\r\n          placeholder: '--',\r\n        };\r\n    }\r\n  }\r\n\r\n  return {};\r\n}\r\n","import React, {ComponentPropsWithoutRef, useMemo} from 'react';\r\nimport {ZonedDateTime} from '@internationalized/date';\r\nimport {EditableDateSegment, EditableSegment} from './editable-date-segment';\r\nimport {LiteralDateSegment, LiteralSegment} from './literal-segment';\r\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\r\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\r\nimport {getSegmentLimits} from './utils/get-segment-limits';\r\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\r\n\r\ninterface DateSegmentListProps {\r\n  segmentProps?: ComponentPropsWithoutRef<'div'>;\r\n  state: DatePickerState | DateRangePickerState;\r\n  value: ZonedDateTime;\r\n  onChange: (newValue: ZonedDateTime) => void;\r\n  isPlaceholder?: boolean;\r\n}\r\nexport function DateSegmentList({\r\n  segmentProps,\r\n  state,\r\n  value,\r\n  onChange,\r\n  isPlaceholder,\r\n}: DateSegmentListProps) {\r\n  const {granularity} = state;\r\n  const options = useMemo(() => {\r\n    const memoOptions: Intl.DateTimeFormatOptions = {\r\n      year: 'numeric',\r\n      month: 'numeric',\r\n      day: 'numeric',\r\n    };\r\n    if (granularity === 'minute') {\r\n      memoOptions.hour = 'numeric';\r\n      memoOptions.minute = 'numeric';\r\n    }\r\n    return memoOptions;\r\n  }, [granularity]);\r\n\r\n  const formatter = useDateFormatter(options);\r\n\r\n  const dateValue = useMemo(() => value.toDate(), [value]);\r\n  const segments = useMemo(() => {\r\n    return formatter.formatToParts(dateValue).map(segment => {\r\n      const limits = getSegmentLimits(\r\n        value,\r\n        segment.type,\r\n        formatter.resolvedOptions(),\r\n      );\r\n      const textValue =\r\n        isPlaceholder && segment.type !== 'literal'\r\n          ? limits.placeholder\r\n          : segment.value;\r\n      return {\r\n        type: segment.type,\r\n        text: segment.value === ', ' ? ' ' : textValue,\r\n        ...limits,\r\n        minLength:\r\n          segment.type !== 'literal' ? String(limits.maxValue).length : 1,\r\n      } as LiteralSegment | EditableSegment;\r\n    });\r\n  }, [dateValue, formatter, isPlaceholder, value]);\r\n\r\n  return (\r\n    <div className=\"flex items-center\">\r\n      {segments.map((segment, index) => {\r\n        if (segment.type === 'literal') {\r\n          return (\r\n            <LiteralDateSegment\r\n              domProps={segmentProps}\r\n              key={index}\r\n              segment={segment}\r\n            />\r\n          );\r\n        }\r\n        return (\r\n          <EditableDateSegment\r\n            isPlaceholder={isPlaceholder}\r\n            domProps={segmentProps}\r\n            state={state}\r\n            value={value}\r\n            onChange={onChange}\r\n            segment={segment}\r\n            key={index}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const KeyboardArrowRightIcon = createSvgIcon(\r\n  <path d=\"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\r\n, 'KeyboardArrowRightOutlined');\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport {\r\n  CalendarDate,\r\n  DateValue,\r\n  getDayOfWeek,\r\n  isSameMonth,\r\n  isToday,\r\n} from '@internationalized/date';\r\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\r\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\r\nimport {dateIsInvalid} from '../utils';\r\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\r\n\r\ninterface CalendarCellProps {\r\n  date: CalendarDate;\r\n  currentMonth: DateValue;\r\n  state: DatePickerState | DateRangePickerState;\r\n}\r\nexport function CalendarCell({\r\n  date,\r\n  currentMonth,\r\n  state: {\r\n    dayIsActive,\r\n    dayIsHighlighted,\r\n    dayIsRangeStart,\r\n    dayIsRangeEnd,\r\n    getCellProps,\r\n    timezone,\r\n    min,\r\n    max,\r\n  },\r\n}: CalendarCellProps) {\r\n  const {localeCode} = useSelectedLocale();\r\n  const dayOfWeek = getDayOfWeek(date, localeCode);\r\n  const isActive = dayIsActive(date);\r\n  const isHighlighted = dayIsHighlighted(date);\r\n  const isRangeStart = dayIsRangeStart(date);\r\n  const isRangeEnd = dayIsRangeEnd(date);\r\n  const dayIsToday = isToday(date, timezone);\r\n  const sameMonth = isSameMonth(date, currentMonth);\r\n  const isDisabled = dateIsInvalid(date, min, max);\r\n\r\n  return (\r\n    <div\r\n      role=\"button\"\r\n      aria-disabled={isDisabled}\r\n      className={clsx(\r\n        'w-40 h-40 text-sm relative isolate flex-shrink-0',\r\n        isDisabled && 'text-disabled pointer-events-none',\r\n        !sameMonth && 'invisible pointer-events-none'\r\n      )}\r\n      {...getCellProps(date, sameMonth)}\r\n    >\r\n      <span\r\n        className={clsx(\r\n          'absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer',\r\n          !isActive && !dayIsToday && 'hover:bg-hover',\r\n          isActive && 'bg-primary text-on-primary font-semibold',\r\n          dayIsToday && !isActive && 'bg-chip'\r\n        )}\r\n      >\r\n        {date.day}\r\n      </span>\r\n      {isHighlighted && sameMonth && (\r\n        <span\r\n          className={clsx(\r\n            'absolute w-full h-full inset-0 bg-primary/focus',\r\n            (isRangeStart || dayOfWeek === 0 || date.day === 1) &&\r\n              'rounded-l-full',\r\n            (isRangeEnd ||\r\n              dayOfWeek === 6 ||\r\n              date.day ===\r\n                currentMonth.calendar.getDaysInMonth(currentMonth)) &&\r\n              'rounded-r-full'\r\n          )}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport {m} from 'framer-motion';\r\nimport {\r\n  CalendarDate,\r\n  endOfMonth,\r\n  getWeeksInMonth,\r\n  startOfMonth,\r\n  startOfWeek,\r\n} from '@internationalized/date';\r\nimport {KeyboardArrowLeftIcon} from '../../../../../icons/material/KeyboardArrowLeft';\r\nimport {IconButton} from '../../../../buttons/icon-button';\r\nimport {KeyboardArrowRightIcon} from '../../../../../icons/material/KeyboardArrowRight';\r\nimport {CalendarCell} from './calendar-cell';\r\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\r\nimport {useDateFormatter} from '../../../../../i18n/use-date-formatter';\r\nimport {useSelectedLocale} from '../../../../../i18n/selected-locale';\r\nimport {dateIsInvalid} from '../utils';\r\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\r\n\r\nexport interface CalendarMonthProps {\r\n  state: DatePickerState | DateRangePickerState;\r\n  startDate: CalendarDate;\r\n  isFirst: boolean;\r\n  isLast: boolean;\r\n}\r\nexport function CalendarMonth({\r\n  startDate,\r\n  state,\r\n  isFirst,\r\n  isLast,\r\n}: CalendarMonthProps) {\r\n  const {localeCode} = useSelectedLocale();\r\n  const weeksInMonth = getWeeksInMonth(startDate, localeCode);\r\n  const monthStart = startOfWeek(startDate, localeCode);\r\n\r\n  return (\r\n    <div className=\"w-280 flex-shrink-0\">\r\n      <CalendarMonthHeader\r\n        isFirst={isFirst}\r\n        isLast={isLast}\r\n        state={state}\r\n        currentMonth={startDate}\r\n      />\r\n      <div className=\"block\" role=\"grid\">\r\n        <WeekdayHeader state={state} startDate={startDate} />\r\n        {[...new Array(weeksInMonth).keys()].map(weekIndex => (\r\n          <m.div className=\"flex mb-6\" key={weekIndex}>\r\n            {[...new Array(7).keys()].map(dayIndex => (\r\n              <CalendarCell\r\n                key={dayIndex}\r\n                date={monthStart.add({weeks: weekIndex, days: dayIndex})}\r\n                currentMonth={startDate}\r\n                state={state}\r\n              />\r\n            ))}\r\n          </m.div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface CalendarMonthHeaderProps {\r\n  state: DatePickerState | DateRangePickerState;\r\n  currentMonth: CalendarDate;\r\n  isFirst: boolean;\r\n  isLast: boolean;\r\n}\r\nfunction CalendarMonthHeader({\r\n  currentMonth,\r\n  isFirst,\r\n  isLast,\r\n  state: {calendarDates, setCalendarDates, timezone, min, max},\r\n}: CalendarMonthHeaderProps) {\r\n  const shiftCalendars = (direction: 'forward' | 'backward') => {\r\n    const count = calendarDates.length;\r\n    let newDates: CalendarDate[];\r\n    if (direction === 'forward') {\r\n      newDates = calendarDates.map(date =>\r\n        endOfMonth(date.add({months: count}))\r\n      );\r\n    } else {\r\n      newDates = calendarDates.map(date =>\r\n        endOfMonth(date.subtract({months: count}))\r\n      );\r\n    }\r\n    setCalendarDates(newDates);\r\n  };\r\n\r\n  const monthFormatter = useDateFormatter({\r\n    month: 'long',\r\n    year: 'numeric',\r\n    era: currentMonth.calendar.identifier !== 'gregory' ? 'long' : undefined,\r\n    calendar: currentMonth.calendar.identifier,\r\n  });\r\n\r\n  const isBackwardDisabled = dateIsInvalid(\r\n    currentMonth.subtract({days: 1}),\r\n    min,\r\n    max\r\n  );\r\n  const isForwardDisabled = dateIsInvalid(\r\n    startOfMonth(currentMonth.add({months: 1})),\r\n    min,\r\n    max\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between gap-10\">\r\n      <IconButton\r\n        size=\"md\"\r\n        className={clsx('text-muted', !isFirst && 'invisible')}\r\n        disabled={!isFirst || isBackwardDisabled}\r\n        aria-hidden={!isFirst}\r\n        onClick={() => {\r\n          shiftCalendars('backward');\r\n        }}\r\n      >\r\n        <KeyboardArrowLeftIcon />\r\n      </IconButton>\r\n      <div className=\"text-sm font-semibold select-none\">\r\n        {monthFormatter.format(currentMonth.toDate(timezone))}\r\n      </div>\r\n      <IconButton\r\n        size=\"md\"\r\n        className={clsx('text-muted', !isLast && 'invisible')}\r\n        disabled={!isLast || isForwardDisabled}\r\n        aria-hidden={!isLast}\r\n        onClick={() => {\r\n          shiftCalendars('forward');\r\n        }}\r\n      >\r\n        <KeyboardArrowRightIcon />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface WeekdayHeaderProps {\r\n  state: DatePickerState | DateRangePickerState;\r\n  startDate: CalendarDate;\r\n}\r\nfunction WeekdayHeader({state: {timezone}, startDate}: WeekdayHeaderProps) {\r\n  const {localeCode} = useSelectedLocale();\r\n  const dayFormatter = useDateFormatter({weekday: 'short'});\r\n\r\n  const monthStart = startOfWeek(startDate, localeCode);\r\n\r\n  return (\r\n    <div className=\"flex\">\r\n      {[...new Array(7).keys()].map(index => {\r\n        const date = monthStart.add({days: index});\r\n        const dateDay = date.toDate(timezone);\r\n        const weekday = dayFormatter.format(dateDay);\r\n        return (\r\n          <div\r\n            className=\"w-40 h-40 text-sm font-semibold relative flex-shrink-0\"\r\n            key={index}\r\n          >\r\n            <div className=\"absolute flex items-center justify-center w-full h-full select-none\">\r\n              {weekday}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import React, {Fragment} from 'react';\r\nimport {startOfMonth, toCalendarDate} from '@internationalized/date';\r\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\r\nimport {CalendarMonth} from './calendar-month';\r\nimport {DatePickerState} from '../date-picker/use-date-picker-state';\r\nimport {DateRangePickerState} from '../date-range-picker/use-date-range-picker-state';\r\n\r\ninterface CalendarProps {\r\n  state: DatePickerState | DateRangePickerState;\r\n  visibleMonths?: 1 | 2;\r\n}\r\nexport function Calendar({state, visibleMonths = 1}: CalendarProps) {\r\n  const isMobile = useIsMobileMediaQuery();\r\n\r\n  if (isMobile) {\r\n    visibleMonths = 1;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {[...new Array(visibleMonths).keys()].map(index => {\r\n        const startDate = toCalendarDate(\r\n          startOfMonth(state.calendarDates[index])\r\n        );\r\n        const isFirst = index === 0;\r\n        const isLast = index === visibleMonths - 1;\r\n        return (\r\n          <CalendarMonth\r\n            key={index}\r\n            state={state}\r\n            startDate={startDate}\r\n            isFirst={isFirst}\r\n            isLast={isLast}\r\n          />\r\n        );\r\n      })}\r\n    </Fragment>\r\n  );\r\n}\r\n","import {DateValue, parseAbsolute} from '@internationalized/date';\r\nimport {Fragment, memo} from 'react';\r\nimport {useDateFormatter} from './use-date-formatter';\r\nimport {useSettings} from '../core/settings/use-settings';\r\nimport {shallowEqual} from '../utils/shallow-equal';\r\nimport {useUserTimezone} from './use-user-timezone';\r\nimport {DateFormatPresets} from '@common/i18n/formatted-date';\r\n\r\ninterface FormattedDateTimeRangeProps {\r\n  start?: string | DateValue | Date;\r\n  end?: string | DateValue | Date;\r\n  options?: Intl.DateTimeFormatOptions;\r\n  preset?: keyof typeof DateFormatPresets;\r\n}\r\nexport const FormattedDateTimeRange = memo(\r\n  ({start, end, options, preset}: FormattedDateTimeRangeProps) => {\r\n    const {dates} = useSettings();\r\n    const timezone = useUserTimezone();\r\n    const formatter = useDateFormatter(\r\n      options ||\r\n        (DateFormatPresets as Record<string, Intl.DateTimeFormatOptions>)[\r\n          preset || dates?.format\r\n        ]\r\n    );\r\n\r\n    if (!start || !end) {\r\n      return null;\r\n    }\r\n\r\n    let value: string;\r\n\r\n    try {\r\n      value = formatter.formatRange(\r\n        castToDate(start, timezone),\r\n        castToDate(end, timezone)\r\n      );\r\n    } catch (e) {\r\n      value = '';\r\n    }\r\n\r\n    return <Fragment>{value}</Fragment>;\r\n  },\r\n  shallowEqual\r\n);\r\n\r\nfunction castToDate(date: string | DateValue | Date, timezone: string): Date {\r\n  if (typeof date === 'string') {\r\n    return parseAbsolute(date, timezone).toDate();\r\n  }\r\n  if ('toDate' in date) {\r\n    return date.toDate(timezone);\r\n  }\r\n  return date;\r\n}\r\n","import {List, ListItem} from '@common/ui/list/list';\r\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\r\n\r\ninterface DateRangePresetList {\r\n  onPresetSelected: (value: DateRangeValue) => void;\r\n  selectedValue?: DateRangeValue | null;\r\n}\r\nexport function DatePresetList({\r\n  onPresetSelected,\r\n  selectedValue,\r\n}: DateRangePresetList) {\r\n  return (\r\n    <List>\r\n      {DateRangePresets.map(preset => (\r\n        <ListItem\r\n          borderRadius=\"rounded-none\"\r\n          capitalizeFirst\r\n          key={preset.key}\r\n          isSelected={selectedValue?.preset === preset.key}\r\n          onSelected={() => {\r\n            const newValue = preset.getRangeValue();\r\n            onPresetSelected(newValue);\r\n          }}\r\n        >\r\n          <Trans {...preset.label} />\r\n        </ListItem>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n","import {useMediaQuery, UseMediaQueryOptions} from './use-media-query';\r\n\r\nexport function useIsTabletMediaQuery(options?: UseMediaQueryOptions) {\r\n  return useMediaQuery('(max-width: 1024px)', options);\r\n}\r\n","import React, {ComponentPropsWithoutRef, ReactNode, useId} from 'react';\r\nimport clsx from 'clsx';\r\nimport {useController} from 'react-hook-form';\r\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\r\nimport {InputSize} from '../input-field/input-size';\r\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\r\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\r\n\r\ninterface SwitchProps\r\n  extends AutoFocusProps,\r\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\r\n  size?: InputSize;\r\n  className?: string;\r\n  description?: ReactNode;\r\n  invalid?: boolean;\r\n  errorMessage?: string;\r\n  iconRight?: ReactNode;\r\n}\r\nexport const Switch = React.forwardRef<HTMLInputElement, SwitchProps>(\r\n  (props, ref) => {\r\n    const {\r\n      children,\r\n      size = 'sm',\r\n      description,\r\n      className,\r\n      invalid,\r\n      autoFocus,\r\n      errorMessage,\r\n      iconRight,\r\n      ...domProps\r\n    } = props;\r\n\r\n    const inputRef = useObjectRef(ref);\r\n    useAutoFocus({autoFocus}, inputRef);\r\n\r\n    const style = getSizeClassName(size);\r\n    const fieldClassNames = getInputFieldClassNames(props);\r\n\r\n    const descriptionId = useId();\r\n\r\n    return (\r\n      <div className={clsx(className, 'isolate')}>\r\n        <label className=\"flex select-none items-center\">\r\n          <input\r\n            {...domProps}\r\n            type=\"checkbox\"\r\n            role=\"switch\"\r\n            aria-invalid={invalid || undefined}\r\n            aria-describedby={description ? descriptionId : undefined}\r\n            ref={inputRef}\r\n            aria-checked={domProps.checked}\r\n            className={clsx(\r\n              style,\r\n              !invalid &&\r\n                'checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark',\r\n              invalid && 'checked:border-danger checked:bg-danger',\r\n              'relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary',\r\n              'before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform',\r\n              'checked:before:border-white',\r\n              'focus-visible:ring',\r\n              props.disabled && 'cursor-not-allowed opacity-80',\r\n            )}\r\n          />\r\n          {children && (\r\n            <span\r\n              className={clsx(\r\n                fieldClassNames.size.font,\r\n                'ml-12',\r\n                invalid && 'text-danger',\r\n                props.disabled && 'text-disabled',\r\n              )}\r\n            >\r\n              {children}\r\n            </span>\r\n          )}\r\n          {iconRight}\r\n        </label>\r\n        {description && !errorMessage && (\r\n          <div id={descriptionId} className={fieldClassNames.description}>\r\n            {description}\r\n          </div>\r\n        )}\r\n        {errorMessage && (\r\n          <div id={descriptionId} className={fieldClassNames.error}>\r\n            {errorMessage}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n);\r\n\r\ninterface FormSwitchProps extends SwitchProps {\r\n  name: string;\r\n}\r\nexport function FormSwitch(props: FormSwitchProps) {\r\n  const {\r\n    field: {onChange, onBlur, value = false, ref},\r\n    fieldState: {invalid, error},\r\n  } = useController({\r\n    name: props.name,\r\n  });\r\n\r\n  const formProps: Partial<SwitchProps> = {\r\n    onChange: e => {\r\n      if (e.target.value && e.target.value !== 'on') {\r\n        onChange(e.target.checked ? e.target.value : false);\r\n      } else {\r\n        onChange(e);\r\n      }\r\n    },\r\n    onBlur,\r\n    checked: !!value,\r\n    invalid,\r\n    errorMessage: error?.message,\r\n    name: props.name,\r\n  };\r\n\r\n  return <Switch ref={ref} {...mergeProps(props, formProps)} />;\r\n}\r\n\r\nfunction getSizeClassName(size: InputSize): string {\r\n  switch (size) {\r\n    case 'xl':\r\n      return 'w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36';\r\n    case 'lg':\r\n      return 'w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30';\r\n    case 'md':\r\n      return 'w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24';\r\n    case 'xs':\r\n      return 'w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14';\r\n    default:\r\n      return 'w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20';\r\n  }\r\n}\r\n","import {message} from '@common/i18n/message';\r\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\r\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\r\n\r\nexport interface DateRangeComparePreset {\r\n  key: number;\r\n  label: MessageDescriptor;\r\n  getRangeValue: (range: DateRangeValue) => DateRangeValue;\r\n}\r\n\r\nexport const DateRangeComparePresets: DateRangeComparePreset[] = [\r\n  {\r\n    key: 0,\r\n    label: message('Preceding period'),\r\n    getRangeValue: (range: DateRangeValue) => {\r\n      const startDate = range.start;\r\n      const endDate = range.end;\r\n\r\n      const diffInMilliseconds =\r\n        endDate.toDate().getTime() - startDate.toDate().getTime();\r\n      const diffInMinutes = diffInMilliseconds / (1000 * 60);\r\n      const newStart = startDate.subtract({minutes: diffInMinutes});\r\n      return {\r\n        preset: 0,\r\n        start: newStart,\r\n        end: startDate,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    key: 1,\r\n    label: message('Same period last year'),\r\n    getRangeValue: (range: DateRangeValue) => {\r\n      return {\r\n        start: range.start.subtract({years: 1}),\r\n        end: range.end.subtract({years: 1}),\r\n        preset: 1,\r\n      };\r\n    },\r\n  },\r\n  {\r\n    key: 2,\r\n    label: message('Custom'),\r\n    getRangeValue: (range: DateRangeValue) => {\r\n      return {\r\n        start: range.start.subtract({weeks: 1}),\r\n        end: range.end.subtract({weeks: 1}),\r\n        preset: 2,\r\n      };\r\n    },\r\n  },\r\n];\r\n","import {List, ListItem} from '@common/ui/list/list';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {DateRangeValue} from '@common/ui/forms/input-field/date/date-range-picker/date-range-value';\r\nimport {DateRangeComparePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-presets';\r\n\r\ninterface DateRangePresetList {\r\n  originalRangeValue: DateRangeValue;\r\n  onPresetSelected: (value: DateRangeValue) => void;\r\n  selectedValue?: DateRangeValue | null;\r\n}\r\nexport function DateRangeComparePresetList({\r\n  originalRangeValue,\r\n  onPresetSelected,\r\n  selectedValue,\r\n}: DateRangePresetList) {\r\n  return (\r\n    <List>\r\n      {DateRangeComparePresets.map(preset => (\r\n        <ListItem\r\n          borderRadius=\"rounded-none\"\r\n          capitalizeFirst\r\n          key={preset.key}\r\n          isSelected={selectedValue?.preset === preset.key}\r\n          onSelected={() => {\r\n            const newValue = preset.getRangeValue(originalRangeValue);\r\n            onPresetSelected(newValue);\r\n          }}\r\n        >\r\n          <Trans {...preset.label} />\r\n        </ListItem>\r\n      ))}\r\n    </List>\r\n  );\r\n}\r\n","import React, {Fragment, ReactNode, useRef, useState} from 'react';\r\nimport {AnimatePresence, m} from 'framer-motion';\r\nimport {DatePickerField} from '../date-picker-field';\r\nimport {DateRangePickerState} from '../use-date-range-picker-state';\r\nimport {Calendar} from '../../calendar/calendar';\r\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\r\nimport {Button} from '@common/ui/buttons/button';\r\nimport {useDialogContext} from '@common/ui/overlays/dialog/dialog-context';\r\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\r\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\r\nimport {ArrowRightAltIcon} from '@common/icons/material/ArrowRightAlt';\r\nimport {DateSegmentList} from '../../segments/date-segment-list';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\r\nimport {DatePresetList} from './date-range-preset-list';\r\nimport {useIsTabletMediaQuery} from '@common/utils/hooks/is-tablet-media-query';\r\nimport {Switch} from '@common/ui/forms/toggle/switch';\r\nimport {DateRangeComparePresetList} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-compare-preset-list';\r\n\r\ninterface DateRangeDialogProps {\r\n  state: DateRangePickerState;\r\n  compareState?: DateRangePickerState;\r\n  compareVisibleDefault?: boolean;\r\n  showInlineDatePickerField?: boolean;\r\n}\r\nexport function DateRangeDialog({\r\n  state,\r\n  compareState,\r\n  showInlineDatePickerField = false,\r\n  compareVisibleDefault = false,\r\n}: DateRangeDialogProps) {\r\n  const isTablet = useIsTabletMediaQuery();\r\n  const {close} = useDialogContext();\r\n  const initialStateRef = useRef<DateRangePickerState>(state);\r\n  const hasPlaceholder = state.isPlaceholder.start || state.isPlaceholder.end;\r\n  const [compareVisible, setCompareVisible] = useState(compareVisibleDefault);\r\n\r\n  const footer = (\r\n    <DialogFooter\r\n      dividerTop\r\n      startAction={\r\n        !hasPlaceholder && !isTablet ? (\r\n          <div className=\"text-xs\">\r\n            <FormattedDateTimeRange\r\n              start={state.selectedValue.start.toDate()}\r\n              end={state.selectedValue.end.toDate()}\r\n              options={{dateStyle: 'medium'}}\r\n            />\r\n          </div>\r\n        ) : undefined\r\n      }\r\n    >\r\n      <Button\r\n        variant=\"text\"\r\n        size=\"xs\"\r\n        onClick={() => {\r\n          state.setSelectedValue(initialStateRef.current.selectedValue);\r\n          state.setIsPlaceholder(initialStateRef.current.isPlaceholder);\r\n          close();\r\n        }}\r\n      >\r\n        <Trans message=\"Cancel\" />\r\n      </Button>\r\n      <Button\r\n        variant=\"flat\"\r\n        color=\"primary\"\r\n        size=\"xs\"\r\n        onClick={() => {\r\n          const value = state.selectedValue;\r\n          if (compareState && compareVisible) {\r\n            value.compareStart = compareState.selectedValue.start;\r\n            value.compareEnd = compareState.selectedValue.end;\r\n          }\r\n          close(value);\r\n        }}\r\n      >\r\n        <Trans message=\"Select\" />\r\n      </Button>\r\n    </DialogFooter>\r\n  );\r\n\r\n  return (\r\n    <Dialog size=\"auto\">\r\n      <DialogBody className=\"flex\" padding=\"p-0\">\r\n        {!isTablet && (\r\n          <div className=\"min-w-192 py-14\">\r\n            <DatePresetList\r\n              selectedValue={state.selectedValue}\r\n              onPresetSelected={preset => {\r\n                state.setSelectedValue(preset);\r\n                if (state.closeDialogOnSelection) {\r\n                  close(preset);\r\n                }\r\n              }}\r\n            />\r\n            {!!compareState && (\r\n              <Fragment>\r\n                <Switch\r\n                  className=\"mx-20 mb-10 mt-14\"\r\n                  checked={compareVisible}\r\n                  onChange={e => setCompareVisible(e.target.checked)}\r\n                >\r\n                  <Trans message=\"Compare\" />\r\n                </Switch>\r\n                {compareVisible && (\r\n                  <DateRangeComparePresetList\r\n                    originalRangeValue={state.selectedValue}\r\n                    selectedValue={compareState.selectedValue}\r\n                    onPresetSelected={preset => {\r\n                      compareState.setSelectedValue(preset);\r\n                    }}\r\n                  />\r\n                )}\r\n              </Fragment>\r\n            )}\r\n          </div>\r\n        )}\r\n        <AnimatePresence initial={false}>\r\n          <Calendars\r\n            state={state}\r\n            compareState={compareState}\r\n            showInlineDatePickerField={showInlineDatePickerField}\r\n            compareVisible={compareVisible}\r\n          />\r\n        </AnimatePresence>\r\n      </DialogBody>\r\n      {!state.closeDialogOnSelection && footer}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\ninterface CustomRangePanelProps {\r\n  state: DateRangePickerState;\r\n  compareState?: DateRangePickerState;\r\n  showInlineDatePickerField?: boolean;\r\n  compareVisible: boolean;\r\n}\r\nfunction Calendars({\r\n  state,\r\n  compareState,\r\n  showInlineDatePickerField,\r\n  compareVisible,\r\n}: CustomRangePanelProps) {\r\n  return (\r\n    <m.div\r\n      initial={{width: 0, overflow: 'hidden'}}\r\n      animate={{width: 'auto'}}\r\n      exit={{width: 0, overflow: 'hidden'}}\r\n      transition={{type: 'tween', duration: 0.125}}\r\n      className=\"border-l px-20 pb-20 pt-10\"\r\n    >\r\n      {showInlineDatePickerField && (\r\n        <div>\r\n          <InlineDatePickerField state={state} />\r\n          {!!compareState && compareVisible && (\r\n            <InlineDatePickerField\r\n              state={compareState}\r\n              label={<Trans message=\"Compare\" />}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n      <div className=\"flex items-start gap-36\">\r\n        <Calendar state={state} visibleMonths={2} />\r\n      </div>\r\n    </m.div>\r\n  );\r\n}\r\n\r\ninterface InlineDatePickerFieldProps {\r\n  state: DateRangePickerState;\r\n  label?: ReactNode;\r\n}\r\nfunction InlineDatePickerField({state, label}: InlineDatePickerFieldProps) {\r\n  const {selectedValue, setSelectedValue} = state;\r\n  return (\r\n    <DatePickerField className=\"mb-20 mt-10\" label={label}>\r\n      <DateSegmentList\r\n        state={state}\r\n        value={selectedValue.start}\r\n        onChange={newValue => {\r\n          setSelectedValue({...selectedValue, start: newValue});\r\n        }}\r\n      />\r\n      <ArrowRightAltIcon className=\"block flex-shrink-0 text-muted\" size=\"md\" />\r\n      <DateSegmentList\r\n        state={state}\r\n        value={selectedValue.end}\r\n        onChange={newValue => {\r\n          setSelectedValue({...selectedValue, end: newValue});\r\n        }}\r\n      />\r\n    </DatePickerField>\r\n  );\r\n}\r\n","import React, {\r\n  ComponentPropsWithoutRef,\r\n  Fragment,\r\n  MouseEvent,\r\n  useRef,\r\n} from 'react';\r\nimport {DateRangeIcon} from '../../../../../icons/material/DateRange';\r\nimport {DialogTrigger} from '../../../../overlays/dialog/dialog-trigger';\r\nimport {DatePickerField, DatePickerFieldProps} from './date-picker-field';\r\nimport {useDateRangePickerState} from './use-date-range-picker-state';\r\nimport {ArrowRightAltIcon} from '../../../../../icons/material/ArrowRightAlt';\r\nimport {DatePickerValueProps} from '../date-picker/use-date-picker-state';\r\nimport {DateRangeValue} from './date-range-value';\r\nimport {DateSegmentList} from '../segments/date-segment-list';\r\nimport {DateRangeDialog} from './dialog/date-range-dialog';\r\nimport {useIsMobileMediaQuery} from '../../../../../utils/hooks/is-mobile-media-query';\r\n\r\nexport interface DateRangePickerProps\r\n  extends DatePickerValueProps<Partial<DateRangeValue>>,\r\n    Omit<DatePickerFieldProps, 'children'> {}\r\nexport function DateRangePicker(props: DateRangePickerProps) {\r\n  const {granularity, closeDialogOnSelection, ...fieldProps} = props;\r\n  const state = useDateRangePickerState(props);\r\n  const inputRef = useRef<HTMLDivElement>(null);\r\n  const isMobile = useIsMobileMediaQuery();\r\n  const hideCalendarIcon = isMobile && granularity !== 'day';\r\n\r\n  const dialog = (\r\n    <DialogTrigger\r\n      offset={8}\r\n      placement=\"bottom-start\"\r\n      isOpen={state.calendarIsOpen}\r\n      onOpenChange={state.setCalendarIsOpen}\r\n      type=\"popover\"\r\n      triggerRef={inputRef}\r\n      returnFocusToTrigger={false}\r\n      moveFocusToDialog={false}\r\n    >\r\n      <DateRangeDialog state={state} />\r\n    </DialogTrigger>\r\n  );\r\n\r\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\r\n    onClick: e => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      if (!isHourSegment(e)) {\r\n        state.setCalendarIsOpen(true);\r\n      } else {\r\n        state.setCalendarIsOpen(false);\r\n      }\r\n    },\r\n  };\r\n\r\n  const value = state.selectedValue;\r\n  const onChange = state.setSelectedValue;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DatePickerField\r\n        ref={inputRef}\r\n        wrapperProps={openOnClick}\r\n        endAdornment={!hideCalendarIcon ? <DateRangeIcon /> : undefined}\r\n        {...fieldProps}\r\n      >\r\n        <DateSegmentList\r\n          isPlaceholder={state.isPlaceholder?.start}\r\n          state={state}\r\n          segmentProps={openOnClick}\r\n          value={value.start}\r\n          onChange={newValue => {\r\n            onChange({start: newValue, end: value.end});\r\n          }}\r\n        />\r\n        <ArrowRightAltIcon\r\n          className=\"block flex-shrink-0 text-muted\"\r\n          size=\"md\"\r\n        />\r\n        <DateSegmentList\r\n          isPlaceholder={state.isPlaceholder?.end}\r\n          state={state}\r\n          segmentProps={openOnClick}\r\n          value={value.end}\r\n          onChange={newValue => {\r\n            onChange({start: value.start, end: newValue});\r\n          }}\r\n        />\r\n      </DatePickerField>\r\n      {dialog}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\r\n  return ['hour', 'minute', 'dayPeriod'].includes(\r\n    (e.currentTarget as HTMLElement).ariaLabel || ''\r\n  );\r\n}\r\n","import {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\r\nimport {DateRangeValue} from './date-range-value';\r\nimport {useController} from 'react-hook-form';\r\nimport {mergeProps} from '@react-aria/utils';\r\nimport React from 'react';\r\nimport {DateRangePicker, DateRangePickerProps} from './date-range-picker';\r\n\r\nexport interface AbsoluteDateRange {\r\n  start?: string;\r\n  end?: string;\r\n  preset?: number;\r\n}\r\n\r\ninterface FormDateRange {\r\n  start?: string | ZonedDateTime;\r\n  end?: string | ZonedDateTime;\r\n  preset?: number;\r\n}\r\n\r\nexport interface FormDateRangePickerProps extends DateRangePickerProps {\r\n  name: string;\r\n}\r\nexport function FormDateRangePicker(props: FormDateRangePickerProps) {\r\n  const {\r\n    field: {onChange, onBlur, value, ref},\r\n    fieldState: {invalid, error},\r\n  } = useController({\r\n    name: props.name,\r\n  });\r\n\r\n  const formProps: Partial<DateRangePickerProps> = {\r\n    onChange: e => {\r\n      onChange(e ? dateRangeToAbsoluteRange(e) : null);\r\n    },\r\n    onBlur,\r\n    value: absoluteRangeToDateRange(value),\r\n    invalid,\r\n    errorMessage: error?.message,\r\n    inputRef: ref,\r\n  };\r\n\r\n  return <DateRangePicker {...mergeProps(formProps, props)} />;\r\n}\r\n\r\nexport function absoluteRangeToDateRange(props: FormDateRange | null) {\r\n  const {start, end, preset} = props || {};\r\n  const dateRange: Partial<DateRangeValue> = {preset};\r\n  try {\r\n    if (start) {\r\n      dateRange.start =\r\n        typeof start === 'string' ? parseAbsoluteToLocal(start) : start;\r\n    }\r\n    if (end) {\r\n      dateRange.end = typeof end === 'string' ? parseAbsoluteToLocal(end) : end;\r\n    }\r\n  } catch (e) {\r\n    // ignore\r\n  }\r\n  return dateRange;\r\n}\r\n\r\nexport function dateRangeToAbsoluteRange({\r\n  start,\r\n  end,\r\n  preset,\r\n}: Partial<DateRangeValue> = {}): AbsoluteDateRange {\r\n  const absoluteRange: AbsoluteDateRange = {\r\n    preset,\r\n  };\r\n  if (start) {\r\n    absoluteRange.start = start.toAbsoluteString();\r\n  }\r\n  if (end) {\r\n    absoluteRange.end = end.toAbsoluteString();\r\n  }\r\n  return absoluteRange;\r\n}\r\n","import {\r\n  BackendFilter,\r\n  DatePickerFilterControl,\r\n  FilterControlType,\r\n  FilterOperator,\r\n} from './backend-filter';\r\nimport {\r\n  DateRangePreset,\r\n  DateRangePresets,\r\n} from '../../ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\r\nimport {message} from '../../i18n/message';\r\nimport {dateRangeToAbsoluteRange} from '../../ui/forms/input-field/date/date-range-picker/form-date-range-picker';\r\nimport {PartialWithRequired} from '@common/utils/ts/partial-with-required';\r\n\r\nexport function timestampFilter(\r\n  options: PartialWithRequired<\r\n    BackendFilter<DatePickerFilterControl>,\r\n    'key' | 'label'\r\n  >\r\n): BackendFilter<DatePickerFilterControl> {\r\n  return {\r\n    ...options,\r\n    defaultOperator: FilterOperator.between,\r\n    control: {\r\n      type: FilterControlType.DateRangePicker,\r\n      defaultValue:\r\n        options.control?.defaultValue ||\r\n        dateRangeToAbsoluteRange(\r\n          (DateRangePresets[3] as Required<DateRangePreset>).getRangeValue()\r\n        ),\r\n    },\r\n  };\r\n}\r\n\r\nexport function createdAtFilter(\r\n  options: Partial<BackendFilter<DatePickerFilterControl>>\r\n): BackendFilter<DatePickerFilterControl> {\r\n  return timestampFilter({\r\n    key: 'created_at',\r\n    label: message('Date created'),\r\n    ...options,\r\n  });\r\n}\r\n\r\nexport function updatedAtFilter(\r\n  options: Partial<BackendFilter<DatePickerFilterControl>>\r\n): BackendFilter<DatePickerFilterControl> {\r\n  return timestampFilter({\r\n    key: 'updated_at',\r\n    label: message('Last updated'),\r\n    ...options,\r\n  });\r\n}\r\n","export const BackendFiltersUrlKey = 'filters';\r\n","import {FilterListValue} from './encode-backend-filters';\r\n\r\nexport function decodeBackendFilters(\r\n  encodedFilters: string | null\r\n): FilterListValue[] {\r\n  if (!encodedFilters) return [];\r\n  let filtersFromQuery: FilterListValue[] = [];\r\n  try {\r\n    filtersFromQuery = JSON.parse(atob(decodeURIComponent(encodedFilters)));\r\n    filtersFromQuery.map(filterValue => {\r\n      // set value key as value so selects work properly\r\n      if (filterValue.valueKey != null) {\r\n        filterValue.value = filterValue.valueKey;\r\n      }\r\n      return filterValue;\r\n    });\r\n  } catch (e) {\r\n    //\r\n  }\r\n  return filtersFromQuery;\r\n}\r\n","import {BackendFilter} from '../backend-filter';\r\n\r\nexport interface FilterListValue {\r\n  key: string | number;\r\n  value: BackendFilter['control']['defaultValue'];\r\n  operator?: BackendFilter['defaultOperator'];\r\n  valueKey?: string | number;\r\n  isInactive?: boolean;\r\n  extraFilters?: {key: string; operator: string; value: any}[];\r\n}\r\n\r\nexport function encodeBackendFilters(\r\n  filterValues: FilterListValue[] | null,\r\n  filters?: BackendFilter[],\r\n): string {\r\n  if (!filterValues) return '';\r\n\r\n  // prepare values for backend\r\n  filterValues = !filters\r\n    ? filterValues\r\n    : filterValues\r\n        .filter(item => item.value !== '')\r\n        .map(item => transformValue(item, filters));\r\n\r\n  // remove all placeholder filters\r\n  filterValues = filterValues.filter(fm => !fm.isInactive);\r\n\r\n  if (!filterValues.length) {\r\n    return '';\r\n  }\r\n\r\n  return encodeURIComponent(btoa(JSON.stringify(filterValues)));\r\n}\r\n\r\nfunction transformValue(\r\n  filterValue: FilterListValue,\r\n  filters: BackendFilter[],\r\n) {\r\n  const filterConfig = filters.find(f => f.key === filterValue.key);\r\n  // select components will use a key always, because we can't use objects as\r\n  // value. Map over select options and replace key with actual value\r\n  if (filterConfig?.control.type === 'select') {\r\n    const option = (filterConfig.control.options || []).find(\r\n      o => o.key === filterValue.value,\r\n    );\r\n    // if it's language or country select, there might not be an option\r\n    if (option) {\r\n      return {...filterValue, value: option.value, valueKey: option.key};\r\n    }\r\n  }\r\n\r\n  if (filterConfig?.extraFilters?.length) {\r\n    filterValue['extraFilters'] = filterConfig.extraFilters;\r\n  }\r\n\r\n  return filterValue;\r\n}\r\n","import {useNavigate, useSearchParams} from 'react-router-dom';\r\nimport {Key, useCallback, useMemo} from 'react';\r\nimport {BackendFilter} from './backend-filter';\r\nimport {BackendFiltersUrlKey} from './backend-filters-url-key';\r\nimport {decodeBackendFilters} from './utils/decode-backend-filters';\r\nimport {\r\n  encodeBackendFilters,\r\n  FilterListValue,\r\n} from './utils/encode-backend-filters';\r\n\r\nexport function useBackendFilterUrlParams(\r\n  filters?: BackendFilter[],\r\n  pinnedFilters?: string[]\r\n) {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n\r\n  const encodedFilters = searchParams.get(BackendFiltersUrlKey);\r\n\r\n  const decodedFilters: FilterListValue[] = useMemo(() => {\r\n    if (!filters) return [];\r\n    const decoded = decodeBackendFilters(encodedFilters);\r\n\r\n    // if filter is pinned, and it is not applied yet, add a placeholder\r\n    (pinnedFilters || []).forEach(key => {\r\n      if (!decoded.find(f => f.key === key)) {\r\n        const config = filters.find(f => f.key === key)!;\r\n        decoded.push({\r\n          key,\r\n          value: config.control.defaultValue,\r\n          operator: config.defaultOperator,\r\n          isInactive: true,\r\n        });\r\n      }\r\n    });\r\n\r\n    // preserve original filter order from configuration\r\n    decoded.sort(\r\n      (a, b) =>\r\n        filters.findIndex(f => f.key === a.key) -\r\n        filters.findIndex(f => f.key === b.key)\r\n    );\r\n\r\n    return decoded;\r\n  }, [encodedFilters, pinnedFilters, filters]);\r\n\r\n  const getDecodedWithoutKeys = useCallback(\r\n    (values: (FilterListValue | Key)[]) => {\r\n      const newFilters = [...decodedFilters];\r\n      values.forEach(value => {\r\n        const key = typeof value === 'object' ? value.key : value;\r\n        const index = newFilters.findIndex(f => f.key === key);\r\n        if (index > -1) {\r\n          newFilters.splice(index, 1);\r\n        }\r\n      });\r\n      return newFilters;\r\n    },\r\n    [decodedFilters]\r\n  );\r\n\r\n  const replaceAll = useCallback(\r\n    (filterValues: FilterListValue[]) => {\r\n      const encodedFilters = encodeBackendFilters(filterValues, filters);\r\n      if (encodedFilters) {\r\n        searchParams.set(BackendFiltersUrlKey, encodedFilters);\r\n      } else {\r\n        searchParams.delete(BackendFiltersUrlKey);\r\n      }\r\n      navigate({search: `?${searchParams}`}, {replace: true});\r\n    },\r\n    [filters, navigate, searchParams]\r\n  );\r\n\r\n  const add = useCallback(\r\n    (filterValues: FilterListValue[]) => {\r\n      const existing = getDecodedWithoutKeys(filterValues);\r\n      const decodedFilters = [...existing, ...filterValues];\r\n      replaceAll(decodedFilters);\r\n    },\r\n    [getDecodedWithoutKeys, replaceAll]\r\n  );\r\n\r\n  const remove = useCallback(\r\n    (key: Key) => replaceAll(getDecodedWithoutKeys([key])),\r\n    [getDecodedWithoutKeys, replaceAll]\r\n  );\r\n\r\n  return {\r\n    add,\r\n    remove,\r\n    replaceAll,\r\n    decodedFilters,\r\n    encodedFilters,\r\n  };\r\n}\r\n","import {isMac} from '@react-aria/utils';\r\n\r\ninterface Event {\r\n  altKey: boolean;\r\n  ctrlKey: boolean;\r\n  metaKey: boolean;\r\n}\r\n\r\nexport function isCtrlKeyPressed(e: Event) {\r\n  if (isMac()) {\r\n    return e.metaKey;\r\n  }\r\n\r\n  return e.ctrlKey;\r\n}\r\n","import React, {KeyboardEventHandler} from 'react';\r\nimport {getFocusableTreeWalker} from '@react-aria/focus';\r\nimport {focusWithoutScrolling} from '@react-aria/utils';\r\nimport {isCtrlKeyPressed} from '../../utils/keybinds/is-ctrl-key-pressed';\r\n\r\ninterface Props {\r\n  cellCount: number;\r\n  rowCount: number;\r\n}\r\nexport function useGridNavigation(props: Props) {\r\n  const {cellCount, rowCount} = props;\r\n  const onKeyDown: KeyboardEventHandler<HTMLElement> = e => {\r\n    switch (e.key) {\r\n      case 'ArrowLeft':\r\n        focusSiblingCell(e, {cell: {op: 'decrement'}}, props);\r\n        break;\r\n      case 'ArrowRight':\r\n        focusSiblingCell(e, {cell: {op: 'increment'}}, props);\r\n        break;\r\n      case 'ArrowUp':\r\n        focusSiblingCell(e, {row: {op: 'decrement'}}, props);\r\n        break;\r\n      case 'ArrowDown':\r\n        focusSiblingCell(e, {row: {op: 'increment'}}, props);\r\n        break;\r\n      case 'PageUp':\r\n        focusSiblingCell(e, {row: {op: 'decrement', count: 5}}, props);\r\n        break;\r\n      case 'PageDown':\r\n        focusSiblingCell(e, {row: {op: 'increment', count: 5}}, props);\r\n        break;\r\n      case 'Tab':\r\n        focusFirstElementAfterGrid(e);\r\n        break;\r\n      case 'Home':\r\n        if (isCtrlKeyPressed(e)) {\r\n          // move to first cell in first row\r\n          focusSiblingCell(\r\n            e,\r\n            {\r\n              row: {op: 'decrement', count: rowCount},\r\n              cell: {op: 'decrement', count: cellCount},\r\n            },\r\n            props\r\n          );\r\n        } else {\r\n          // move to first cell in current row\r\n          focusSiblingCell(\r\n            e,\r\n            {cell: {op: 'decrement', count: cellCount}},\r\n            props\r\n          );\r\n        }\r\n        break;\r\n      case 'End':\r\n        if (isCtrlKeyPressed(e)) {\r\n          // move to last cell in last row\r\n          focusSiblingCell(\r\n            e,\r\n            {\r\n              row: {op: 'increment', count: rowCount},\r\n              cell: {op: 'increment', count: cellCount},\r\n            },\r\n            props\r\n          );\r\n        } else {\r\n          // move to last cell in current row\r\n          focusSiblingCell(\r\n            e,\r\n            {cell: {op: 'increment', count: cellCount}},\r\n            props\r\n          );\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  return {onKeyDown};\r\n}\r\n\r\ninterface Operations {\r\n  cell?: {\r\n    op: 'increment' | 'decrement';\r\n    count?: number;\r\n  };\r\n  row?: {\r\n    op: 'increment' | 'decrement';\r\n    count?: number;\r\n  };\r\n}\r\nfunction focusSiblingCell(\r\n  e: React.KeyboardEvent,\r\n  operations: Operations,\r\n  {cellCount, rowCount}: Props\r\n) {\r\n  if (document.activeElement?.tagName === 'input') return;\r\n  e.preventDefault();\r\n  const grid = e.currentTarget as HTMLElement;\r\n\r\n  // focused element might be inside the cell and not the cell itself\r\n  const currentCell = (e.target as HTMLElement).closest('[aria-colindex]');\r\n  if (!currentCell || !grid) return;\r\n\r\n  const row = currentCell.closest('[aria-rowindex]');\r\n  if (!row) return;\r\n\r\n  // grab row and cell index from aria attributes\r\n  let rowIndex = parseInt(row.getAttribute('aria-rowindex') as string);\r\n  let cellIndex = parseInt(currentCell.getAttribute('aria-colindex') as string);\r\n  if (Number.isNaN(rowIndex) || Number.isNaN(cellIndex)) return;\r\n\r\n  // adjust row index for next cell selector\r\n  const rowOpCount = operations.row?.count ?? 1;\r\n  if (operations.row?.op === 'increment') {\r\n    rowIndex = Math.min(rowCount, rowIndex + rowOpCount);\r\n  } else if (operations.row?.op === 'decrement') {\r\n    rowIndex = Math.max(1, rowIndex - rowOpCount);\r\n  }\r\n\r\n  // adjust cell index for next cell selector\r\n  const cellOpCount = operations.cell?.count ?? 1;\r\n  if (operations.cell?.op === 'increment') {\r\n    cellIndex = Math.min(cellCount, cellIndex + cellOpCount);\r\n  } else if (operations.cell?.op === 'decrement') {\r\n    cellIndex = Math.max(1, cellIndex - cellOpCount);\r\n  }\r\n\r\n  // find the next cell that should be focused\r\n  const nextCell = grid.querySelector(\r\n    `[aria-rowindex=\"${rowIndex}\"] [aria-colindex=\"${cellIndex}\"]`\r\n  ) as HTMLElement | undefined;\r\n  if (!nextCell) return;\r\n\r\n  // find any focusable elements inside the cell\r\n  const walker = getFocusableTreeWalker(nextCell);\r\n  const nextFocusableElement = (walker.nextNode() || nextCell) as HTMLElement;\r\n\r\n  // adjust tab index on current and next cells and focus either next cell or first focusable element inside that cell\r\n  currentCell.setAttribute('tabindex', '-1');\r\n  nextFocusableElement.setAttribute('tabindex', '0');\r\n  nextFocusableElement.focus();\r\n}\r\n\r\n// grid is treated as a single tab stop, focus first element after grid, instead of moving focus withing grid on tab press\r\nfunction focusFirstElementAfterGrid(e: React.KeyboardEvent) {\r\n  const grid = e.currentTarget as HTMLElement;\r\n  if (e.shiftKey) {\r\n    grid.focus();\r\n  } else {\r\n    const walker = getFocusableTreeWalker(grid, {tabbable: true});\r\n    let next: HTMLElement;\r\n    let last: HTMLElement;\r\n    do {\r\n      last = walker.lastChild() as HTMLElement;\r\n      if (last) {\r\n        next = last;\r\n      }\r\n    } while (last);\r\n\r\n    // @ts-ignore\r\n    if (next && !next.contains(document.activeElement)) {\r\n      focusWithoutScrolling(next);\r\n    }\r\n  }\r\n}\r\n","import {createContext} from 'react';\r\nimport type {SortDescriptor} from './types/sort-descriptor';\r\nimport type {TableProps} from './table';\r\nimport type {ColumnConfig} from '../../datatable/column-config';\r\nimport type {TableDataItem} from './types/table-data-item';\r\n\r\nexport type TableSelectionStyle = 'checkbox' | 'highlight';\r\n\r\nexport interface TableContextValue<T extends TableDataItem = TableDataItem> {\r\n  isCollapsedMode: boolean;\r\n  selectedRows: (string | number)[];\r\n  onSelectionChange: (keys: (string | number)[]) => void;\r\n  sortDescriptor?: SortDescriptor;\r\n  onSortChange?: (descriptor: SortDescriptor) => any;\r\n  enableSelection?: boolean;\r\n  enableSorting?: boolean;\r\n  selectionStyle: TableSelectionStyle;\r\n  data: T[];\r\n  meta?: any;\r\n  columns: ColumnConfig<T>[];\r\n  toggleRow: (item: T) => void;\r\n  selectRow: (item: T | null, merge?: boolean) => void;\r\n  hideBorder: boolean;\r\n  hideHeaderRow: boolean;\r\n  collapseOnMobile: boolean;\r\n  onAction: TableProps<T>['onAction'];\r\n  selectRowOnContextMenu: TableProps<T>['selectRowOnContextMenu'];\r\n  cellHeight: string | undefined;\r\n  headerCellHeight: string | undefined;\r\n}\r\nexport const TableContext = createContext<TableContextValue>(null!);\r\n","import clsx from 'clsx';\r\nimport {useContext} from 'react';\r\nimport {TableContext} from '@common/ui/tables/table-context';\r\n\r\ninterface Props {\r\n  index: number;\r\n  isHeader: boolean;\r\n}\r\nexport function useTableCellStyle({index, isHeader}: Props) {\r\n  const {\r\n    columns,\r\n    cellHeight = 'h-46',\r\n    headerCellHeight = 'h-46',\r\n  } = useContext(TableContext);\r\n  const column = columns[index];\r\n\r\n  const userPadding = column?.padding;\r\n\r\n  let justify = 'justify-start';\r\n  if (column?.align === 'center') {\r\n    justify = 'justify-center';\r\n  } else if (column?.align === 'end') {\r\n    justify = 'justify-end';\r\n  }\r\n\r\n  return clsx(\r\n    'flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2',\r\n    isHeader ? headerCellHeight : cellHeight,\r\n    column?.width ?? 'flex-1',\r\n    column?.maxWidth,\r\n    column?.minWidth,\r\n    justify,\r\n    userPadding,\r\n    column?.className\r\n  );\r\n}\r\n","import {useContext, useMemo} from 'react';\r\nimport {TableContext} from './table-context';\r\nimport {TableDataItem} from './types/table-data-item';\r\nimport {RowContext} from '@common/datatable/column-config';\r\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\r\n\r\ninterface TableCellProps {\r\n  rowIsHovered: boolean;\r\n  rowIndex: number;\r\n  index: number;\r\n  item: TableDataItem;\r\n  id?: string;\r\n}\r\nexport function TableCell({\r\n  rowIndex,\r\n  rowIsHovered,\r\n  index,\r\n  item,\r\n  id,\r\n}: TableCellProps) {\r\n  const {columns} = useContext(TableContext);\r\n  const column = columns[index];\r\n\r\n  const rowContext: RowContext = useMemo(() => {\r\n    return {\r\n      index: rowIndex,\r\n      isHovered: rowIsHovered,\r\n      isPlaceholder: item.isPlaceholder,\r\n    };\r\n  }, [rowIndex, rowIsHovered, item.isPlaceholder]);\r\n\r\n  const style = useTableCellStyle({\r\n    index: index,\r\n    isHeader: false,\r\n  });\r\n\r\n  return (\r\n    <div\r\n      tabIndex={-1}\r\n      role=\"gridcell\"\r\n      aria-colindex={index + 1}\r\n      id={id}\r\n      className={style}\r\n    >\r\n      <div className=\"overflow-x-hidden overflow-ellipsis min-w-0 w-full\">\r\n        {column.body(item, rowContext)}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, {HTMLAttributes, useRef} from 'react';\r\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\r\nimport {useGlobalListeners} from '@react-aria/utils';\r\n\r\ninterface PointerState {\r\n  lastPosition: {x: number; y: number};\r\n  id?: number;\r\n  started: boolean;\r\n  el?: HTMLElement;\r\n  originalTouchAction?: string;\r\n  originalUserSelect?: string;\r\n  longPressTimer?: any;\r\n  longPressTriggered?: boolean;\r\n}\r\n\r\ninterface UsePointerEventsReturn {\r\n  domProps: HTMLAttributes<HTMLElement>;\r\n}\r\n\r\nexport interface UsePointerEventsProps {\r\n  onMoveStart?: (e: PointerEvent, el: HTMLElement) => false | void;\r\n  onMove?: (e: PointerEvent, deltaX: number, deltaY: number) => void;\r\n  onMoveEnd?: (e: PointerEvent) => void;\r\n  onPointerDown?: (e: React.PointerEvent) => void | false;\r\n  onPointerUp?: (e: PointerEvent, el: HTMLElement) => void;\r\n  onPress?: (e: PointerEvent, el: HTMLElement) => void;\r\n  onLongPress?: (e: PointerEvent | React.PointerEvent, el: HTMLElement) => void;\r\n  preventDefault?: boolean;\r\n  stopPropagation?: boolean;\r\n  minimumMovement?: number;\r\n}\r\nexport function usePointerEvents({\r\n  onMoveStart,\r\n  onMove,\r\n  onMoveEnd,\r\n  minimumMovement = 0,\r\n  preventDefault,\r\n  stopPropagation = true,\r\n  onPress,\r\n  onLongPress,\r\n  ...props\r\n}: UsePointerEventsProps): UsePointerEventsReturn {\r\n  const stateRef = useRef<PointerState>({\r\n    lastPosition: {x: 0, y: 0},\r\n    started: false,\r\n    longPressTriggered: false,\r\n  });\r\n  const state = stateRef.current;\r\n\r\n  const {addGlobalListener, removeGlobalListener} = useGlobalListeners();\r\n\r\n  const start = (e: PointerEvent) => {\r\n    if (!state.el) return;\r\n    const result = onMoveStart?.(e, state.el);\r\n\r\n    // allow user to cancel interaction\r\n    if (result === false) return;\r\n\r\n    state.originalTouchAction = state.el.style.touchAction;\r\n    state.el.style.touchAction = 'none';\r\n    state.originalUserSelect = document.documentElement.style.userSelect;\r\n    document.documentElement.style.userSelect = 'none';\r\n    state.started = true;\r\n  };\r\n\r\n  const onPointerDown = (e: React.PointerEvent) => {\r\n    if (e.button === 0 && state.id == null) {\r\n      state.started = false;\r\n\r\n      const result = props.onPointerDown?.(e);\r\n      if (result === false) return;\r\n\r\n      if (stopPropagation) {\r\n        e.stopPropagation();\r\n      }\r\n      if (preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n      state.id = e.pointerId;\r\n      state.el = e.currentTarget as HTMLElement;\r\n      state.lastPosition = {x: e.clientX, y: e.clientY};\r\n\r\n      // use global listeners, so we don't have to capture pointer,\r\n      // which would prevent click events on child nodes\r\n\r\n      if (onLongPress) {\r\n        state.longPressTimer = setTimeout(() => {\r\n          onLongPress(e, state.el!);\r\n          state.longPressTriggered = true;\r\n        }, 400);\r\n      }\r\n\r\n      if (onMoveStart || onMove) {\r\n        addGlobalListener(window, 'pointermove', onPointerMove, false);\r\n      }\r\n      addGlobalListener(window, 'pointerup', onPointerUp, false);\r\n      addGlobalListener(window, 'pointercancel', onPointerUp, false);\r\n    }\r\n  };\r\n\r\n  const onPointerMove = (e: PointerEvent) => {\r\n    if (e.pointerId === state.id) {\r\n      const deltaX = e.clientX - state.lastPosition.x;\r\n      const deltaY = e.clientY - state.lastPosition.y;\r\n\r\n      if (\r\n        (Math.abs(deltaX) >= minimumMovement ||\r\n          Math.abs(deltaY) >= minimumMovement) &&\r\n        !state.started\r\n      ) {\r\n        start(e);\r\n      }\r\n\r\n      if (state.started) {\r\n        onMove?.(e, deltaX, deltaY);\r\n        state.lastPosition = {x: e.clientX, y: e.clientY};\r\n      }\r\n    }\r\n  };\r\n\r\n  const onPointerUp = (e: PointerEvent) => {\r\n    if (e.pointerId === state.id) {\r\n      // cancel long press timer, if exists\r\n      if (state.longPressTimer) {\r\n        clearTimeout(state.longPressTimer);\r\n      }\r\n\r\n      const longPressTriggered = state.longPressTriggered;\r\n      state.longPressTriggered = false;\r\n\r\n      // only call onMoveEnd if we actually started moving\r\n      if (state.started) {\r\n        onMoveEnd?.(e);\r\n      }\r\n\r\n      if (state.el) {\r\n        // handle press only if event was not cancelled (via touch scroll on mobile for example)\r\n        if (e.type !== 'pointercancel') {\r\n          props.onPointerUp?.(e, state.el);\r\n\r\n          // only call onPress if pointer did not leave onPointerDown element\r\n          if (e.target && state.el.contains(e.target as HTMLElement)) {\r\n            // trigger either onPress or onLongPress\r\n            if (longPressTriggered) {\r\n              onLongPress?.(e, state.el);\r\n            } else {\r\n              onPress?.(e, state.el);\r\n            }\r\n          }\r\n        }\r\n\r\n        document.documentElement.style.userSelect =\r\n          state.originalUserSelect || '';\r\n        state.el.style.touchAction = state.originalTouchAction || '';\r\n      }\r\n      state.id = undefined;\r\n      state.started = false;\r\n      removeGlobalListener(window, 'pointermove', onPointerMove, false);\r\n      removeGlobalListener(window, 'pointerup', onPointerUp, false);\r\n      removeGlobalListener(window, 'pointercancel', onPointerUp, false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    domProps: {\r\n      onPointerDown: createEventHandler(onPointerDown),\r\n    },\r\n  };\r\n}\r\n","import {isCtrlKeyPressed} from './is-ctrl-key-pressed';\r\n\r\ninterface Event {\r\n  altKey: boolean;\r\n  ctrlKey: boolean;\r\n  metaKey: boolean;\r\n  shiftKey: boolean;\r\n}\r\n\r\nexport function isCtrlOrShiftPressed(e: Event) {\r\n  return e.shiftKey || isCtrlKeyPressed(e);\r\n}\r\n","import clsx from 'clsx';\r\nimport {useContext} from 'react';\r\nimport {TableContext} from '@common/ui/tables/table-context';\r\nimport {useIsDarkMode} from '@common/ui/themes/use-is-dark-mode';\r\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\r\n\r\ninterface Props {\r\n  index: number;\r\n  isSelected: boolean;\r\n  isHeader?: boolean;\r\n}\r\nexport function useTableRowStyle({index, isSelected, isHeader}: Props) {\r\n  const isDarkMode = useIsDarkMode();\r\n  const isMobile = useIsMobileMediaQuery();\r\n  const {hideBorder, enableSelection, collapseOnMobile, onAction} =\r\n    useContext(TableContext);\r\n  const isFirst = index === 0;\r\n  return clsx(\r\n    'flex gap-x-16 break-inside-avoid outline-none border border-transparent',\r\n    onAction && 'cursor-pointer',\r\n    isMobile && collapseOnMobile && hideBorder\r\n      ? 'mb-8 pl-8 pr-0 rounded'\r\n      : 'px-16',\r\n    !hideBorder && 'border-b-divider',\r\n    !hideBorder && isFirst && 'border-t-divider',\r\n    isSelected &&\r\n      !isDarkMode &&\r\n      'bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus',\r\n    isSelected &&\r\n      isDarkMode &&\r\n      'bg-selected hover:bg-focus focus-visible:bg-focus',\r\n    !isSelected &&\r\n      !isHeader &&\r\n      (enableSelection || onAction) &&\r\n      'focus-visible:bg-focus hover:bg-hover'\r\n  );\r\n}\r\n","import React, {\r\n  ComponentPropsWithoutRef,\r\n  JSXElementConstructor,\r\n  KeyboardEventHandler,\r\n  MouseEventHandler,\r\n  useContext,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport {TableContext} from './table-context';\r\nimport {TableCell} from './table-cell';\r\nimport {TableDataItem} from './types/table-data-item';\r\nimport {createEventHandler} from '../../utils/dom/create-event-handler';\r\nimport {usePointerEvents} from '../interactions/use-pointer-events';\r\nimport {isCtrlOrShiftPressed} from '../../utils/keybinds/is-ctrl-or-shift-pressed';\r\nimport {useTableRowStyle} from '@common/ui/tables/style/use-table-row-style';\r\nimport clsx from 'clsx';\r\n\r\nconst interactableElements = ['button', 'a', 'input', 'select', 'textarea'];\r\n\r\nexport interface RowElementProps<T = TableDataItem>\r\n  extends ComponentPropsWithoutRef<'tr'> {\r\n  item: T & {isPlaceholder?: boolean};\r\n}\r\n\r\ninterface TableRowProps {\r\n  item: TableDataItem;\r\n  index: number;\r\n  renderAs?: JSXElementConstructor<RowElementProps>;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n}\r\nexport function TableRow({\r\n  item,\r\n  index,\r\n  renderAs,\r\n  className,\r\n  style,\r\n}: TableRowProps) {\r\n  const {\r\n    selectedRows,\r\n    columns,\r\n    toggleRow,\r\n    selectRow,\r\n    onAction,\r\n    selectRowOnContextMenu,\r\n    enableSelection,\r\n    selectionStyle,\r\n    hideHeaderRow,\r\n  } = useContext(TableContext);\r\n\r\n  const isTouchDevice = useRef(false);\r\n  const isSelected = selectedRows.includes(item.id);\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  const clickedOnInteractable = (e: React.MouseEvent | PointerEvent) => {\r\n    return (e.target as HTMLElement).closest(interactableElements.join(','));\r\n  };\r\n\r\n  const doubleClickHandler: MouseEventHandler<HTMLDivElement> = e => {\r\n    if (\r\n      selectionStyle === 'highlight' &&\r\n      onAction &&\r\n      !isTouchDevice.current &&\r\n      !clickedOnInteractable(e)\r\n    ) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      onAction(item, index);\r\n    }\r\n  };\r\n\r\n  const anyRowsSelected = !!selectedRows.length;\r\n\r\n  const handleRowTap = (e: PointerEvent) => {\r\n    if (clickedOnInteractable(e)) return;\r\n    if (selectionStyle === 'checkbox') {\r\n      if (enableSelection && (anyRowsSelected || !onAction)) {\r\n        toggleRow(item);\r\n      } else if (onAction) {\r\n        onAction(item, index);\r\n      }\r\n    } else if (selectionStyle === 'highlight') {\r\n      if (isTouchDevice.current) {\r\n        if (enableSelection && anyRowsSelected) {\r\n          toggleRow(item);\r\n        } else {\r\n          onAction?.(item, index);\r\n        }\r\n      } else if (enableSelection) {\r\n        selectRow(item, isCtrlOrShiftPressed(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  const {domProps} = usePointerEvents({\r\n    onPointerDown: e => {\r\n      isTouchDevice.current = e.pointerType === 'touch';\r\n    },\r\n    onPress: handleRowTap,\r\n    onLongPress: enableSelection\r\n      ? () => {\r\n          if (isTouchDevice.current) {\r\n            toggleRow(item);\r\n          }\r\n        }\r\n      : undefined,\r\n  });\r\n\r\n  const keyboardHandler: KeyboardEventHandler = e => {\r\n    if (enableSelection && e.key === ' ') {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      if (selectionStyle === 'checkbox') {\r\n        toggleRow(item);\r\n      } else {\r\n        selectRow(item);\r\n      }\r\n    } else if (e.key === 'Enter' && !selectedRows.length && onAction) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      onAction(item, index);\r\n    }\r\n  };\r\n\r\n  const contextMenuHandler: MouseEventHandler = e => {\r\n    if (selectRowOnContextMenu && enableSelection) {\r\n      if (!selectedRows.includes(item.id)) {\r\n        selectRow(item);\r\n      }\r\n    }\r\n    // prevent context menu on mobile\r\n    if (isTouchDevice.current) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  };\r\n\r\n  const styleClassName = useTableRowStyle({index, isSelected});\r\n\r\n  const RowElement = renderAs || 'div';\r\n  return (\r\n    <RowElement\r\n      role=\"row\"\r\n      aria-rowindex={index + 1 + (hideHeaderRow ? 0 : 1)}\r\n      aria-selected={isSelected}\r\n      tabIndex={-1}\r\n      className={clsx(className, styleClassName)}\r\n      item={RowElement === 'div' ? (undefined as any) : item}\r\n      onDoubleClick={createEventHandler(doubleClickHandler)}\r\n      onKeyDown={createEventHandler(keyboardHandler)}\r\n      onContextMenu={createEventHandler(contextMenuHandler)}\r\n      onPointerEnter={createEventHandler(() => setIsHovered(true))}\r\n      onPointerLeave={createEventHandler(() => setIsHovered(false))}\r\n      style={style}\r\n      {...domProps}\r\n    >\r\n      {columns.map((column, cellIndex) => (\r\n        <TableCell\r\n          rowIndex={index}\r\n          rowIsHovered={isHovered}\r\n          index={cellIndex}\r\n          item={item}\r\n          key={`${item.id}-${column.key}`}\r\n        />\r\n      ))}\r\n    </RowElement>\r\n  );\r\n}\r\n","import {ColumnConfig} from '@common/datatable/column-config';\r\nimport {TableDataItem} from '@common/ui/tables/types/table-data-item';\r\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\r\nimport React, {useContext} from 'react';\r\nimport {Checkbox} from '@common/ui/forms/toggle/checkbox';\r\nimport {useTrans} from '@common/i18n/use-trans';\r\nimport {TableContext} from '@common/ui/tables/table-context';\r\n\r\nexport const CheckboxColumnConfig: ColumnConfig<TableDataItem> = {\r\n  key: 'checkbox',\r\n  header: () => <SelectAllCheckbox />,\r\n  align: 'center',\r\n  width: 'w-24 flex-shrink-0',\r\n  body: (item, row) => {\r\n    if (row.isPlaceholder) {\r\n      return <Skeleton size=\"w-24 h-24\" variant=\"rect\" />;\r\n    }\r\n    return <SelectRowCheckbox item={item} />;\r\n  },\r\n};\r\n\r\ninterface SelectRowCheckboxProps {\r\n  item: TableDataItem;\r\n}\r\nfunction SelectRowCheckbox({item}: SelectRowCheckboxProps) {\r\n  const {selectedRows, toggleRow} = useContext(TableContext);\r\n  return (\r\n    <Checkbox\r\n      checked={selectedRows.includes(item.id)}\r\n      onChange={() => toggleRow(item)}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SelectAllCheckbox() {\r\n  const {trans} = useTrans();\r\n\r\n  const {data, selectedRows, onSelectionChange} = useContext(TableContext);\r\n  const allRowsSelected = !!data.length && data.length === selectedRows.length;\r\n  const someRowsSelected = !allRowsSelected && !!selectedRows.length;\r\n\r\n  return (\r\n    <Checkbox\r\n      aria-label={trans({message: 'Select all'})}\r\n      isIndeterminate={someRowsSelected}\r\n      checked={allRowsSelected}\r\n      onChange={() => {\r\n        if (allRowsSelected) {\r\n          onSelectionChange([]);\r\n        } else {\r\n          onSelectionChange(data.map(d => d.id));\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const ArrowDownwardIcon = createSvgIcon(\r\n  <path d=\"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" />\r\n, 'ArrowDownwardOutlined');\r\n","import {useContext, useState} from 'react';\r\nimport clsx from 'clsx';\r\nimport {AnimatePresence, m} from 'framer-motion';\r\nimport {TableContext} from './table-context';\r\nimport {SortDescriptor} from './types/sort-descriptor';\r\nimport {ArrowDownwardIcon} from '../../icons/material/ArrowDownward';\r\nimport {useTableCellStyle} from '@common/ui/tables/style/use-table-cell-style';\r\n\r\ninterface HeaderCellProps {\r\n  index: number;\r\n}\r\nexport function HeaderCell({index}: HeaderCellProps) {\r\n  const {columns, sortDescriptor, onSortChange, enableSorting} =\r\n    useContext(TableContext);\r\n  const column = columns[index];\r\n\r\n  const style = useTableCellStyle({\r\n    index: index,\r\n    isHeader: true,\r\n  });\r\n\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  const sortingKey = column.sortingKey || column.key;\r\n  const allowSorting = column.allowsSorting && enableSorting;\r\n  const {orderBy, orderDir} = sortDescriptor || {};\r\n\r\n  const sortActive = allowSorting && orderBy === sortingKey;\r\n\r\n  let ariaSort: 'ascending' | 'descending' | 'none' | undefined;\r\n  if (sortActive && orderDir === 'asc') {\r\n    ariaSort = 'ascending';\r\n  } else if (sortActive && orderDir === 'desc') {\r\n    ariaSort = 'descending';\r\n  } else if (allowSorting) {\r\n    ariaSort = 'none';\r\n  }\r\n\r\n  const toggleSorting = () => {\r\n    if (!allowSorting) return;\r\n\r\n    let newSort: SortDescriptor;\r\n\r\n    // if this col was sorted desc, go to asc\r\n    if (sortActive && orderDir === 'desc') {\r\n      newSort = {orderDir: 'asc', orderBy: sortingKey};\r\n\r\n      // if this col was sorted asc, clear sort\r\n    } else if (sortActive && orderDir === 'asc') {\r\n      newSort = {orderBy: undefined, orderDir: undefined};\r\n\r\n      // if sort was on another col, or no sort was applied yet, start from desc\r\n    } else {\r\n      newSort = {orderDir: 'desc', orderBy: sortingKey};\r\n    }\r\n\r\n    onSortChange?.(newSort);\r\n  };\r\n\r\n  const sortVisible = sortActive || isHovered;\r\n  const sortVariants = {\r\n    visible: {opacity: 1, y: 0},\r\n    hidden: {opacity: 0, y: '-25%'},\r\n  };\r\n\r\n  return (\r\n    <div\r\n      role=\"columnheader\"\r\n      tabIndex={-1}\r\n      aria-colindex={index + 1}\r\n      aria-sort={ariaSort}\r\n      className={clsx(\r\n        style,\r\n        'text-muted font-medium text-xs',\r\n        allowSorting && 'cursor-pointer'\r\n      )}\r\n      onMouseEnter={() => {\r\n        setIsHovered(true);\r\n      }}\r\n      onMouseLeave={() => {\r\n        setIsHovered(false);\r\n      }}\r\n      onKeyDown={e => {\r\n        if (e.key === ' ' || e.key === 'Enter') {\r\n          e.preventDefault();\r\n          toggleSorting();\r\n        }\r\n      }}\r\n      onClick={toggleSorting}\r\n    >\r\n      {column.hideHeader ? (\r\n        <div className=\"sr-only\">{column.header()}</div>\r\n      ) : (\r\n        column.header()\r\n      )}\r\n      <AnimatePresence>\r\n        {allowSorting && (\r\n          <m.span\r\n            variants={sortVariants}\r\n            animate={sortVisible ? 'visible' : 'hidden'}\r\n            initial={false}\r\n            transition={{type: 'tween'}}\r\n            key=\"sort-icon\"\r\n            className=\"inline-block ml-6 -mt-2\"\r\n            data-testid=\"table-sort-button\"\r\n            aria-hidden={!sortVisible}\r\n          >\r\n            <ArrowDownwardIcon\r\n              size=\"xs\"\r\n              className={clsx(\r\n                'text-muted',\r\n                orderDir === 'asc' &&\r\n                  orderBy === sortingKey &&\r\n                  'rotate-180 transition-transform'\r\n              )}\r\n            />\r\n          </m.span>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import {HeaderCell} from '@common/ui/tables/header-cell';\r\nimport React, {useContext} from 'react';\r\nimport {TableContext} from '@common/ui/tables/table-context';\r\n\r\nexport function TableHeaderRow() {\r\n  const {columns} = useContext(TableContext);\r\n  return (\r\n    <div\r\n      role=\"row\"\r\n      aria-rowindex={1}\r\n      tabIndex={-1}\r\n      className=\"flex gap-x-16 px-16\"\r\n    >\r\n      {columns.map((column, columnIndex) => (\r\n        <HeaderCell index={columnIndex} key={column.key} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, {\r\n  cloneElement,\r\n  ComponentPropsWithoutRef,\r\n  Fragment,\r\n  JSXElementConstructor,\r\n  MutableRefObject,\r\n  ReactElement,\r\n  useCallback,\r\n  useContext,\r\n  useMemo,\r\n} from 'react';\r\nimport {useControlledState} from '@react-stately/utils';\r\nimport {SortDescriptor} from './types/sort-descriptor';\r\nimport {useGridNavigation} from './navigate-grid';\r\nimport {RowElementProps, TableRow} from './table-row';\r\nimport {\r\n  TableContext,\r\n  TableContextValue,\r\n  TableSelectionStyle,\r\n} from './table-context';\r\nimport {ColumnConfig} from '../../datatable/column-config';\r\nimport {TableDataItem} from './types/table-data-item';\r\nimport clsx from 'clsx';\r\nimport {useInteractOutside} from '@react-aria/interactions';\r\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\r\nimport {isCtrlKeyPressed} from '@common/utils/keybinds/is-ctrl-key-pressed';\r\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\r\nimport {CheckboxColumnConfig} from '@common/ui/tables/checkbox-column-config';\r\nimport {TableHeaderRow} from '@common/ui/tables/table-header-row';\r\n\r\nexport interface TableProps<T extends TableDataItem>\r\n  extends ComponentPropsWithoutRef<'table'> {\r\n  className?: string;\r\n  columns: ColumnConfig<T>[];\r\n  hideHeaderRow?: boolean;\r\n  data: T[];\r\n  meta?: any;\r\n  tableRef?: MutableRefObject<HTMLTableElement>;\r\n  selectedRows?: (number | string)[];\r\n  defaultSelectedRows?: (number | string)[];\r\n  onSelectionChange?: (keys: (number | string)[]) => void;\r\n  sortDescriptor?: SortDescriptor;\r\n  onSortChange?: (descriptor: SortDescriptor) => any;\r\n  enableSorting?: boolean;\r\n  onDelete?: (items: T[]) => void;\r\n  enableSelection?: boolean;\r\n  selectionStyle?: TableSelectionStyle;\r\n  ariaLabelledBy?: string;\r\n  onAction?: (item: T, index: number) => void;\r\n  selectRowOnContextMenu?: boolean;\r\n  renderRowAs?: JSXElementConstructor<RowElementProps<T>>;\r\n  tableBody?: ReactElement<TableBodyProps>;\r\n  hideBorder?: boolean;\r\n  closeOnInteractOutside?: boolean;\r\n  collapseOnMobile?: boolean;\r\n  cellHeight?: string;\r\n  headerCellHeight?: string;\r\n}\r\nexport function Table<T extends TableDataItem>({\r\n  className,\r\n  columns: userColumns,\r\n  collapseOnMobile = true,\r\n  hideHeaderRow = false,\r\n  hideBorder = false,\r\n  data,\r\n  selectedRows: propsSelectedRows,\r\n  defaultSelectedRows: propsDefaultSelectedRows,\r\n  onSelectionChange: propsOnSelectionChange,\r\n  sortDescriptor: propsSortDescriptor,\r\n  onSortChange: propsOnSortChange,\r\n  enableSorting = true,\r\n  onDelete,\r\n  enableSelection = true,\r\n  selectionStyle = 'checkbox',\r\n  ariaLabelledBy,\r\n  selectRowOnContextMenu,\r\n  onAction,\r\n  renderRowAs,\r\n  tableBody,\r\n  meta,\r\n  tableRef: propsTableRef,\r\n  closeOnInteractOutside = false,\r\n  cellHeight,\r\n  headerCellHeight,\r\n  ...domProps\r\n}: TableProps<T>) {\r\n  const isMobile = useIsMobileMediaQuery();\r\n  const isCollapsedMode = !!isMobile && collapseOnMobile;\r\n  if (isCollapsedMode) {\r\n    hideHeaderRow = true;\r\n    hideBorder = true;\r\n  }\r\n\r\n  const [selectedRows, onSelectionChange] = useControlledState(\r\n    propsSelectedRows,\r\n    propsDefaultSelectedRows || [],\r\n    propsOnSelectionChange,\r\n  );\r\n\r\n  const [sortDescriptor, onSortChange] = useControlledState(\r\n    propsSortDescriptor,\r\n    undefined,\r\n    propsOnSortChange,\r\n  );\r\n\r\n  const toggleRow = useCallback(\r\n    (item: TableDataItem) => {\r\n      const newValues = [...selectedRows];\r\n      if (!newValues.includes(item.id)) {\r\n        newValues.push(item.id);\r\n      } else {\r\n        const index = newValues.indexOf(item.id);\r\n        newValues.splice(index, 1);\r\n      }\r\n      onSelectionChange(newValues);\r\n    },\r\n    [selectedRows, onSelectionChange],\r\n  );\r\n\r\n  const selectRow = useCallback(\r\n    // allow deselecting all rows by passing in null\r\n    (item: TableDataItem | null, merge?: boolean) => {\r\n      let newValues: (string | number)[] = [];\r\n      if (item) {\r\n        newValues = merge\r\n          ? [...selectedRows?.filter(id => id !== item.id), item.id]\r\n          : [item.id];\r\n      }\r\n      onSelectionChange(newValues);\r\n    },\r\n    [selectedRows, onSelectionChange],\r\n  );\r\n\r\n  // add checkbox columns to config, if selection is enabled\r\n  const columns = useMemo(() => {\r\n    const filteredColumns = userColumns.filter(c => {\r\n      const visibleInMode = c.visibleInMode || 'regular';\r\n      if (visibleInMode === 'all') {\r\n        return true;\r\n      }\r\n      if (visibleInMode === 'compact' && isCollapsedMode) {\r\n        return true;\r\n      }\r\n      if (visibleInMode === 'regular' && !isCollapsedMode) {\r\n        return true;\r\n      }\r\n    });\r\n    const showCheckboxCell =\r\n      enableSelection && selectionStyle !== 'highlight' && !isMobile;\r\n    if (showCheckboxCell) {\r\n      filteredColumns.unshift(CheckboxColumnConfig);\r\n    }\r\n    return filteredColumns;\r\n  }, [isMobile, userColumns, enableSelection, selectionStyle, isCollapsedMode]);\r\n\r\n  const contextValue: TableContextValue<T> = {\r\n    isCollapsedMode,\r\n    cellHeight,\r\n    headerCellHeight,\r\n    hideBorder,\r\n    hideHeaderRow,\r\n    selectedRows,\r\n    onSelectionChange,\r\n    enableSorting,\r\n    enableSelection,\r\n    selectionStyle,\r\n    data,\r\n    columns,\r\n    sortDescriptor,\r\n    onSortChange,\r\n    toggleRow,\r\n    selectRow,\r\n    onAction,\r\n    selectRowOnContextMenu,\r\n    meta,\r\n    collapseOnMobile,\r\n  };\r\n\r\n  const navProps = useGridNavigation({\r\n    cellCount: enableSelection ? columns.length + 1 : columns.length,\r\n    rowCount: data.length + 1,\r\n  });\r\n\r\n  const tableBodyProps: TableBodyProps = {\r\n    renderRowAs: renderRowAs as any,\r\n  };\r\n\r\n  if (!tableBody) {\r\n    tableBody = <BasicTableBody {...tableBodyProps} />;\r\n  } else {\r\n    tableBody = cloneElement(tableBody, tableBodyProps);\r\n  }\r\n\r\n  // deselect rows when clicking outside the table\r\n  const tableRef = useObjectRef(propsTableRef);\r\n  useInteractOutside({\r\n    ref: tableRef,\r\n    onInteractOutside: e => {\r\n      if (\r\n        closeOnInteractOutside &&\r\n        enableSelection &&\r\n        selectedRows?.length &&\r\n        // don't deselect if clicking on a dialog (for example is table row has a context menu)\r\n        !(e.target as HTMLElement).closest('[role=\"dialog\"]')\r\n      ) {\r\n        onSelectionChange([]);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <TableContext.Provider value={contextValue as any}>\r\n      <div\r\n        {...mergeProps(domProps, navProps, {\r\n          onKeyDown: (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              if (selectedRows?.length) {\r\n                onSelectionChange([]);\r\n              }\r\n            } else if (e.key === 'Delete') {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              if (selectedRows?.length) {\r\n                onDelete?.(\r\n                  data.filter(item => selectedRows?.includes(item.id)),\r\n                );\r\n              }\r\n            } else if (isCtrlKeyPressed(e) && e.key === 'a') {\r\n              e.preventDefault();\r\n              e.stopPropagation();\r\n              if (enableSelection) {\r\n                onSelectionChange(data.map(item => item.id));\r\n              }\r\n            }\r\n          },\r\n        })}\r\n        role=\"grid\"\r\n        tabIndex={0}\r\n        aria-rowcount={data.length + 1}\r\n        aria-colcount={columns.length + 1}\r\n        ref={tableRef}\r\n        aria-multiselectable={enableSelection ? true : undefined}\r\n        aria-labelledby={ariaLabelledBy}\r\n        className={clsx(\r\n          className,\r\n          'isolate select-none text-sm outline-none focus-visible:ring-2',\r\n        )}\r\n      >\r\n        {!hideHeaderRow && <TableHeaderRow />}\r\n        {tableBody}\r\n      </div>\r\n    </TableContext.Provider>\r\n  );\r\n}\r\n\r\nexport interface TableBodyProps {\r\n  renderRowAs?: TableProps<TableDataItem>['renderRowAs'];\r\n}\r\nfunction BasicTableBody({renderRowAs}: TableBodyProps) {\r\n  const {data} = useContext(TableContext);\r\n  return (\r\n    <Fragment>\r\n      {data.map((item, rowIndex) => (\r\n        <TableRow\r\n          item={item}\r\n          index={rowIndex}\r\n          key={item.id}\r\n          renderAs={renderRowAs}\r\n        />\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n","import {FormSelect} from '@common/ui/forms/select/select';\r\nimport {Item} from '@common/ui/forms/listbox/item';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\r\nimport {useTrans} from '@common/i18n/use-trans';\r\nimport {FilterSelectControl} from '@common/datatable/filters/backend-filter';\r\n\r\nexport function SelectFilterPanel({\r\n  filter,\r\n}: FilterPanelProps<FilterSelectControl>) {\r\n  const {trans} = useTrans();\r\n\r\n  return (\r\n    <FormSelect\r\n      size=\"sm\"\r\n      name={`${filter.key}.value`}\r\n      selectionMode=\"single\"\r\n      showSearchField={filter.control.showSearchField}\r\n      placeholder={\r\n        filter.control.placeholder\r\n          ? trans(filter.control.placeholder)\r\n          : undefined\r\n      }\r\n      searchPlaceholder={\r\n        filter.control.searchPlaceholder\r\n          ? trans(filter.control.searchPlaceholder)\r\n          : undefined\r\n      }\r\n    >\r\n      {filter.control.options.map(option => (\r\n        <Item key={option.key} value={option.key}>\r\n          <Trans {...option.label} />\r\n        </Item>\r\n      ))}\r\n    </FormSelect>\r\n  );\r\n}\r\n","import {FormDateRangePicker} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\r\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\r\nimport {DatePickerFilterControl} from '@common/datatable/filters/backend-filter';\r\n\r\nexport function DateRangeFilterPanel({\r\n  filter,\r\n}: FilterPanelProps<DatePickerFilterControl>) {\r\n  return (\r\n    <FormDateRangePicker\r\n      min={filter.control.min}\r\n      max={filter.control.max}\r\n      size=\"sm\"\r\n      name={`${filter.key}.value`}\r\n      granularity=\"day\"\r\n      closeDialogOnSelection={true}\r\n    />\r\n  );\r\n}\r\n","import clsx from 'clsx';\r\nimport React, {\r\n  ComponentProps,\r\n  ComponentPropsWithoutRef,\r\n  forwardRef,\r\n} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Tooltip} from '@common/ui/tooltip/tooltip';\r\nimport {AvatarPlaceholderIcon} from '@common/auth/ui/account-settings/avatar/avatar-placeholder-icon';\r\n\r\ntype Size = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | string;\r\n\r\nexport interface AvatarProps extends ComponentPropsWithoutRef<any> {\r\n  className?: string;\r\n  src?: string;\r\n  label?: string;\r\n  circle?: boolean;\r\n  size?: Size;\r\n  link?: string;\r\n  fallback?: 'initials' | 'generic';\r\n  lazy?: boolean;\r\n}\r\nexport const Avatar = forwardRef<HTMLImageElement, AvatarProps>(\r\n  (\r\n    {\r\n      className,\r\n      circle,\r\n      size = 'md',\r\n      src,\r\n      link,\r\n      label,\r\n      fallback = 'generic',\r\n      lazy = true,\r\n      ...domProps\r\n    },\r\n    ref,\r\n  ) => {\r\n    let renderedAvatar = src ? (\r\n      <img\r\n        ref={ref}\r\n        src={src}\r\n        alt={label}\r\n        loading={lazy ? 'lazy' : undefined}\r\n        className=\"block h-full w-full object-cover\"\r\n      />\r\n    ) : (\r\n      <div className=\"h-full w-full bg-alt dark:bg-chip\">\r\n        <AvatarPlaceholderIcon\r\n          viewBox=\"0 0 48 48\"\r\n          className=\"h-full w-full text-muted\"\r\n        />\r\n      </div>\r\n    );\r\n\r\n    if (label) {\r\n      renderedAvatar = <Tooltip label={label}>{renderedAvatar}</Tooltip>;\r\n    }\r\n\r\n    const wrapperProps: ComponentProps<any> = {\r\n      ...domProps,\r\n      className: clsx(\r\n        className,\r\n        'relative block overflow-hidden select-none flex-shrink-0',\r\n        getSizeClassName(size),\r\n        circle ? 'rounded-full' : 'rounded',\r\n      ),\r\n    };\r\n\r\n    return link ? (\r\n      <Link {...wrapperProps} to={link}>\r\n        {renderedAvatar}\r\n      </Link>\r\n    ) : (\r\n      <div {...wrapperProps}>{renderedAvatar}</div>\r\n    );\r\n  },\r\n);\r\n\r\nfunction getSizeClassName(size: Size) {\r\n  switch (size) {\r\n    case 'xs':\r\n      return 'w-18 h-18';\r\n    case 'sm':\r\n      return 'w-24 h-24';\r\n    case 'md':\r\n      return 'w-32 h-32';\r\n    case 'lg':\r\n      return 'w-40 h-40';\r\n    case 'xl':\r\n      return 'w-60 h-60';\r\n    // allow overriding with custom classNames\r\n    default:\r\n      return size;\r\n  }\r\n}\r\n","import {\r\n  keepPreviousData,\r\n  useQuery,\r\n  UseQueryOptions,\r\n} from '@tanstack/react-query';\r\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\r\nimport {apiClient} from '../../http/query-client';\r\nimport {BackendResponse} from '../../http/backend-response/backend-response';\r\n\r\ninterface Response extends BackendResponse {\r\n  results: NormalizedModel[];\r\n}\r\n\r\ninterface Params {\r\n  query?: string;\r\n  perPage?: number;\r\n  with?: string;\r\n}\r\n\r\nexport function useNormalizedModels(\r\n  endpoint: string,\r\n  queryParams: Params,\r\n  queryOptions?: Omit<\r\n    UseQueryOptions<Response, unknown, Response, [string, Params]>,\r\n    'queryKey' | 'queryFn'\r\n  > | null,\r\n) {\r\n  return useQuery({\r\n    queryKey: [endpoint, queryParams],\r\n    queryFn: () => fetchModels(endpoint, queryParams),\r\n    placeholderData: keepPreviousData,\r\n    ...queryOptions,\r\n  });\r\n}\r\n\r\nasync function fetchModels(endpoint: string, params: Params) {\r\n  return apiClient.get<Response>(endpoint, {params}).then(r => r.data);\r\n}\r\n","import {useQuery} from '@tanstack/react-query';\r\nimport {NormalizedModel} from '../../datatable/filters/normalized-model';\r\nimport {apiClient} from '../../http/query-client';\r\nimport {BackendResponse} from '../../http/backend-response/backend-response';\r\n\r\ninterface Response extends BackendResponse {\r\n  model: NormalizedModel;\r\n}\r\n\r\nexport function useNormalizedModel(\r\n  endpoint: string,\r\n  queryParams?: Record<string, string>,\r\n  queryOptions?: {enabled?: boolean},\r\n) {\r\n  return useQuery({\r\n    queryKey: [endpoint, queryParams],\r\n    queryFn: () => fetchModel(endpoint, queryParams),\r\n    ...queryOptions,\r\n  });\r\n}\r\n\r\nasync function fetchModel(\r\n  endpoint: string,\r\n  params?: Record<string, string>,\r\n): Promise<Response> {\r\n  return apiClient.get(endpoint, {params}).then(r => r.data);\r\n}\r\n","import React, {ReactNode, useRef, useState} from 'react';\r\nimport {useTrans} from '../../i18n/use-trans';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {Avatar} from '../images/avatar';\r\nimport {Tooltip} from '../tooltip/tooltip';\r\nimport {IconButton} from '../buttons/icon-button';\r\nimport {EditIcon} from '../../icons/material/Edit';\r\nimport {message} from '../../i18n/message';\r\nimport {Item} from './listbox/item';\r\nimport {useController, useFormContext} from 'react-hook-form';\r\nimport {useControlledState} from '@react-stately/utils';\r\nimport {getInputFieldClassNames} from './input-field/get-input-field-class-names';\r\nimport clsx from 'clsx';\r\nimport {Skeleton} from '../skeleton/skeleton';\r\nimport {useNormalizedModels} from '../../users/queries/use-normalized-models';\r\nimport {useNormalizedModel} from '../../users/queries/use-normalized-model';\r\nimport {AnimatePresence, m} from 'framer-motion';\r\nimport {opacityAnimation} from '../animation/opacity-animation';\r\nimport {Select} from '@common/ui/forms/select/select';\r\nimport {MessageDescriptor} from '@common/i18n/message-descriptor';\r\nimport {BaseFieldProps} from '@common/ui/forms/input-field/base-field-props';\r\n\r\ninterface NormalizedModelFieldProps {\r\n  label?: ReactNode;\r\n  className?: string;\r\n  background?: BaseFieldProps['background'];\r\n  value?: string | number;\r\n  placeholder?: MessageDescriptor;\r\n  searchPlaceholder?: MessageDescriptor;\r\n  defaultValue?: string | number;\r\n  onChange?: (value: string | number) => void;\r\n  invalid?: boolean;\r\n  errorMessage?: string;\r\n  description?: ReactNode;\r\n  autoFocus?: boolean;\r\n  queryParams?: Record<string, string>;\r\n  endpoint: string;\r\n  disabled?: boolean;\r\n  required?: boolean;\r\n}\r\nexport function NormalizedModelField({\r\n  label,\r\n  className,\r\n  background,\r\n  value,\r\n  defaultValue = '',\r\n  placeholder = message('Select item...'),\r\n  searchPlaceholder = message('Find an item...'),\r\n  onChange,\r\n  description,\r\n  errorMessage,\r\n  invalid,\r\n  autoFocus,\r\n  queryParams,\r\n  endpoint,\r\n  disabled,\r\n  required,\r\n}: NormalizedModelFieldProps) {\r\n  const inputRef = useRef<HTMLButtonElement>(null);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [selectedValue, setSelectedValue] = useControlledState(\r\n    value,\r\n    defaultValue,\r\n    onChange,\r\n  );\r\n  const query = useNormalizedModels(endpoint, {\r\n    query: inputValue,\r\n    ...queryParams,\r\n  });\r\n  const {trans} = useTrans();\r\n\r\n  const fieldClassNames = getInputFieldClassNames({size: 'md'});\r\n\r\n  if (selectedValue) {\r\n    return (\r\n      <div className={className}>\r\n        <div className={fieldClassNames.label}>{label}</div>\r\n        <div\r\n          className={clsx(\r\n            'rounded-input border p-8',\r\n            background,\r\n            invalid && 'border-danger',\r\n          )}\r\n        >\r\n          <AnimatePresence initial={false} mode=\"wait\">\r\n            <SelectedModelPreview\r\n              disabled={disabled}\r\n              endpoint={endpoint}\r\n              modelId={selectedValue}\r\n              queryParams={queryParams}\r\n              onEditClick={() => {\r\n                setSelectedValue('');\r\n                setInputValue('');\r\n                requestAnimationFrame(() => {\r\n                  inputRef.current?.focus();\r\n                  inputRef.current?.click();\r\n                });\r\n              }}\r\n            />\r\n          </AnimatePresence>\r\n        </div>\r\n        {description && !errorMessage && (\r\n          <div className={fieldClassNames.description}>{description}</div>\r\n        )}\r\n        {errorMessage && (\r\n          <div className={fieldClassNames.error}>{errorMessage}</div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Select\r\n      className={className}\r\n      showSearchField\r\n      invalid={invalid}\r\n      errorMessage={errorMessage}\r\n      description={description}\r\n      color=\"white\"\r\n      isAsync\r\n      background={background}\r\n      placeholder={trans(placeholder)}\r\n      searchPlaceholder={trans(searchPlaceholder)}\r\n      label={label}\r\n      isLoading={query.isFetching}\r\n      items={query.data?.results}\r\n      inputValue={inputValue}\r\n      onInputValueChange={setInputValue}\r\n      selectionMode=\"single\"\r\n      selectedValue={selectedValue}\r\n      onSelectionChange={setSelectedValue}\r\n      ref={inputRef}\r\n      autoFocus={autoFocus}\r\n      disabled={disabled}\r\n      required={required}\r\n    >\r\n      {model => (\r\n        <Item\r\n          value={model.id}\r\n          key={model.id}\r\n          description={model.description}\r\n          startIcon={<Avatar src={model.image} />}\r\n        >\r\n          {model.name}\r\n        </Item>\r\n      )}\r\n    </Select>\r\n  );\r\n}\r\n\r\ninterface SelectedModelPreviewProps {\r\n  modelId: string | number;\r\n  selectedValue?: number | string;\r\n  onEditClick?: () => void;\r\n  endpoint?: string;\r\n  disabled?: boolean;\r\n  queryParams?: NormalizedModelFieldProps['queryParams'];\r\n}\r\nfunction SelectedModelPreview({\r\n  modelId,\r\n  onEditClick,\r\n  endpoint,\r\n  disabled,\r\n  queryParams,\r\n}: SelectedModelPreviewProps) {\r\n  const {data, isLoading} = useNormalizedModel(\r\n    `${endpoint}/${modelId}`,\r\n    queryParams,\r\n  );\r\n\r\n  if (isLoading || !data?.model) {\r\n    return <LoadingSkeleton key=\"skeleton\" />;\r\n  }\r\n\r\n  return (\r\n    <m.div\r\n      className={clsx(\r\n        'flex items-center gap-10',\r\n        disabled && 'pointer-events-none cursor-not-allowed text-disabled',\r\n      )}\r\n      key=\"preview\"\r\n      {...opacityAnimation}\r\n    >\r\n      {data.model.image && <Avatar src={data.model.image} />}\r\n      <div>\r\n        <div className=\"text-sm leading-4\">{data.model.name}</div>\r\n        <div className=\"text-xs text-muted\">{data.model.description}</div>\r\n      </div>\r\n      <Tooltip label={<Trans message=\"Change item\" />}>\r\n        <IconButton\r\n          className=\"ml-auto text-muted\"\r\n          size=\"sm\"\r\n          onClick={onEditClick}\r\n          disabled={disabled}\r\n        >\r\n          <EditIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n    </m.div>\r\n  );\r\n}\r\n\r\nfunction LoadingSkeleton() {\r\n  return (\r\n    <m.div className=\"flex items-center gap-10\" {...opacityAnimation}>\r\n      <Skeleton variant=\"rect\" size=\"w-32 h-32\" />\r\n      <div className=\"max-h-[36px] flex-auto\">\r\n        <Skeleton className=\"text-xs\" />\r\n        <Skeleton className=\"max-h-8 text-xs\" />\r\n      </div>\r\n      <Skeleton variant=\"icon\" size=\"w-24 h-24\" />\r\n    </m.div>\r\n  );\r\n}\r\n\r\ninterface FormNormalizedModelFieldProps extends NormalizedModelFieldProps {\r\n  name: string;\r\n}\r\nexport function FormNormalizedModelField({\r\n  name,\r\n  ...fieldProps\r\n}: FormNormalizedModelFieldProps) {\r\n  const {clearErrors} = useFormContext();\r\n  const {\r\n    field: {onChange, value = ''},\r\n    fieldState: {invalid, error},\r\n  } = useController({\r\n    name,\r\n  });\r\n\r\n  return (\r\n    <NormalizedModelField\r\n      value={value}\r\n      onChange={value => {\r\n        onChange(value);\r\n        clearErrors(name);\r\n      }}\r\n      invalid={invalid}\r\n      errorMessage={error?.message}\r\n      {...fieldProps}\r\n    />\r\n  );\r\n}\r\n","import {FilterPanelProps} from './filter-panel-props';\r\nimport {FormNormalizedModelField} from '@common/ui/forms/normalized-model-field';\r\nimport {FilterSelectModelControl} from '@common/datatable/filters/backend-filter';\r\n\r\nexport function NormalizedModelFilterPanel({\r\n  filter,\r\n}: FilterPanelProps<FilterSelectModelControl>) {\r\n  return (\r\n    <FormNormalizedModelField\r\n      name={`${filter.key}.value`}\r\n      endpoint={`normalized-models/${filter.control.model}`}\r\n    />\r\n  );\r\n}\r\n","import {FilterOperator} from './backend-filter';\r\nimport {message} from '../../i18n/message';\r\nimport {MessageDescriptor} from '../../i18n/message-descriptor';\r\n\r\nexport const FilterOperatorNames: {[op in FilterOperator]: MessageDescriptor} =\r\n  {\r\n    '=': message('is'),\r\n    '!=': message('is not'),\r\n    '>': message('is greater than'),\r\n    '>=': message('is greater than or equal to'),\r\n    '<': message('is less than'),\r\n    '<=': message('is less than or equal to'),\r\n    has: message('Include'),\r\n    doesntHave: message('Do not include'),\r\n    between: message('Is between'),\r\n    hasAll: message('Include all'),\r\n  };\r\n","import {FormTextField} from '@common/ui/forms/input-field/text-field/text-field';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {FormSelect} from '@common/ui/forms/select/select';\r\nimport {Item} from '@common/ui/forms/listbox/item';\r\nimport {FilterOperatorNames} from '@common/datatable/filters/filter-operator-names';\r\nimport {Fragment} from 'react';\r\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\r\nimport {\r\n  FilterNumberInputControl,\r\n  FilterTextInputControl,\r\n} from '@common/datatable/filters/backend-filter';\r\n\r\nexport function InputFilterPanel({\r\n  filter,\r\n}: FilterPanelProps<FilterTextInputControl | FilterNumberInputControl>) {\r\n  const control = filter.control;\r\n  return (\r\n    <Fragment>\r\n      <FormSelect\r\n        selectionMode=\"single\"\r\n        name={`${filter.key}.operator`}\r\n        className=\"mb-14\"\r\n        size=\"sm\"\r\n        required\r\n      >\r\n        {filter.operators?.map(operator => (\r\n          <Item key={operator} value={operator}>\r\n            {<Trans {...FilterOperatorNames[operator]} />}\r\n          </Item>\r\n        ))}\r\n      </FormSelect>\r\n      <FormTextField\r\n        size=\"sm\"\r\n        name={`${filter.key}.value`}\r\n        type={filter.control.inputType}\r\n        min={'minValue' in control ? control.minValue : undefined}\r\n        max={'maxValue' in control ? control.maxValue : undefined}\r\n        minLength={'minLength' in control ? control.minLength : undefined}\r\n        maxLength={'maxLength' in control ? control.maxLength : undefined}\r\n        required\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, {\r\n  Children,\r\n  cloneElement,\r\n  isValidElement,\r\n  ReactElement,\r\n} from 'react';\r\nimport clsx from 'clsx';\r\nimport type {ChipProps} from './chip';\r\n\r\nexport interface ChipListProps {\r\n  className?: string;\r\n  children?: ReactElement | ReactElement[];\r\n  size?: ChipProps['size'];\r\n  radius?: ChipProps['radius'];\r\n  color?: ChipProps['color'];\r\n  selectable?: ChipProps['selectable'];\r\n  wrap?: boolean;\r\n}\r\nexport function ChipList({\r\n  className,\r\n  children,\r\n  size,\r\n  color,\r\n  radius,\r\n  selectable,\r\n  wrap = true,\r\n}: ChipListProps) {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        'flex items-center gap-8',\r\n        wrap && 'flex-wrap',\r\n        className,\r\n      )}\r\n    >\r\n      {Children.map(children, chip => {\r\n        if (isValidElement<ChipProps>(chip)) {\r\n          return cloneElement<ChipProps>(chip, {\r\n            size,\r\n            color,\r\n            selectable,\r\n            radius,\r\n          });\r\n        }\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import {ChipValue} from './chip-field';\r\n\r\nexport function stringToChipValue(value: string | number): ChipValue {\r\n  // add both name and description so \"validateWith\" works properly in chip field, if it depends on description\r\n  return {id: value, name: `${value}`, description: `${value}`};\r\n}\r\n","import React, {\r\n  HTMLAttributes,\r\n  Key,\r\n  ReactElement,\r\n  ReactNode,\r\n  Ref,\r\n  RefObject,\r\n  useCallback,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport {useFocusManager} from '@react-aria/focus';\r\nimport clsx from 'clsx';\r\nimport {mergeProps, useLayoutEffect, useObjectRef} from '@react-aria/utils';\r\nimport {useControlledState} from '@react-stately/utils';\r\nimport {ChipList} from './chip-list';\r\nimport {Field, FieldProps} from '../field';\r\nimport {Input} from '../input';\r\nimport {Chip, ChipProps} from './chip';\r\nimport {NormalizedModel} from '@common/datatable/filters/normalized-model';\r\nimport {getInputFieldClassNames} from '../get-input-field-class-names';\r\nimport {ProgressCircle} from '../../../progress/progress-circle';\r\nimport {useField} from '../use-field';\r\nimport {Avatar} from '../../../images/avatar';\r\nimport {Listbox} from '../../listbox/listbox';\r\nimport {useListbox} from '../../listbox/use-listbox';\r\nimport {BaseFieldPropsWithDom} from '../base-field-props';\r\nimport {useListboxKeyboardNavigation} from '../../listbox/use-listbox-keyboard-navigation';\r\nimport {createEventHandler} from '@common/utils/dom/create-event-handler';\r\nimport {ListBoxChildren, ListboxProps} from '../../listbox/types';\r\nimport {stringToChipValue} from './string-to-chip-value';\r\nimport {Popover} from '../../../overlays/popover';\r\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\r\n\r\nexport interface ChipValue extends Omit<NormalizedModel, 'model_type'> {\r\n  invalid?: boolean;\r\n  errorMessage?: string;\r\n}\r\n\r\nexport type ChipFieldProps<T> = Omit<\r\n  ListboxProps,\r\n  'selectionMode' | 'displayWith'\r\n> &\r\n  Omit<\r\n    BaseFieldPropsWithDom<HTMLInputElement>,\r\n    'value' | 'onChange' | 'defaultValue'\r\n  > & {\r\n    value?: (ChipValue | string)[];\r\n    defaultValue?: (ChipValue | string)[];\r\n    displayWith?: (value: ChipValue) => ReactNode;\r\n    validateWith?: (value: ChipValue) => ChipValue;\r\n    allowCustomValue?: boolean;\r\n    showDropdownArrow?: boolean;\r\n    onChange?: (value: ChipValue[]) => void;\r\n    suggestions?: T[];\r\n    children?: ListBoxChildren<T>['children'];\r\n    placeholder?: string;\r\n    chipSize?: ChipProps['size'];\r\n    openMenuOnFocus?: boolean;\r\n    valueKey?: 'id' | 'name';\r\n    onChipClick?: (value: ChipValue) => void;\r\n  };\r\n\r\nfunction ChipFieldInner<T>(\r\n  props: ChipFieldProps<T>,\r\n  ref: Ref<HTMLInputElement>,\r\n) {\r\n  const fieldRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useObjectRef(ref);\r\n  const {\r\n    displayWith = v => v.name,\r\n    validateWith,\r\n    children,\r\n    suggestions,\r\n    isLoading,\r\n    inputValue,\r\n    onInputValueChange,\r\n    onItemSelected,\r\n    placeholder,\r\n    onOpenChange,\r\n    chipSize = 'sm',\r\n    openMenuOnFocus = true,\r\n    showEmptyMessage,\r\n    value: propsValue,\r\n    defaultValue,\r\n    onChange: propsOnChange,\r\n    valueKey,\r\n    isAsync,\r\n    allowCustomValue = true,\r\n    showDropdownArrow,\r\n    onChipClick,\r\n    ...inputFieldProps\r\n  } = props;\r\n  const fieldClassNames = getInputFieldClassNames({\r\n    ...props,\r\n    flexibleHeight: true,\r\n  });\r\n\r\n  const [value, onChange] = useChipFieldValueState(props);\r\n\r\n  const [listboxIsOpen, setListboxIsOpen] = useState(false);\r\n\r\n  const loadingIndicator = (\r\n    <ProgressCircle isIndeterminate size=\"sm\" aria-label=\"loading...\" />\r\n  );\r\n\r\n  const dropdownArrow = showDropdownArrow ? <KeyboardArrowDownIcon /> : null;\r\n\r\n  const {fieldProps, inputProps} = useField({\r\n    ...inputFieldProps,\r\n    focusRef: inputRef,\r\n    endAdornment: isLoading && listboxIsOpen ? loadingIndicator : dropdownArrow,\r\n  });\r\n\r\n  return (\r\n    <Field fieldClassNames={fieldClassNames} {...fieldProps}>\r\n      <Input\r\n        ref={fieldRef}\r\n        className={clsx('flex flex-wrap items-center', fieldClassNames.input)}\r\n        onClick={() => {\r\n          // refocus input when clicking outside it, but while still inside chip field\r\n          inputRef.current?.focus();\r\n        }}\r\n      >\r\n        <ListWrapper\r\n          displayChipUsing={displayWith}\r\n          onChipClick={onChipClick}\r\n          items={value}\r\n          setItems={onChange}\r\n          chipSize={chipSize}\r\n        />\r\n        <ChipInput\r\n          size={props.size}\r\n          showEmptyMessage={showEmptyMessage}\r\n          inputProps={inputProps}\r\n          inputValue={inputValue}\r\n          onInputValueChange={onInputValueChange}\r\n          fieldRef={fieldRef}\r\n          inputRef={inputRef}\r\n          chips={value}\r\n          setChips={onChange}\r\n          validateWith={validateWith}\r\n          isLoading={isLoading}\r\n          suggestions={suggestions}\r\n          placeholder={placeholder}\r\n          openMenuOnFocus={openMenuOnFocus}\r\n          listboxIsOpen={listboxIsOpen}\r\n          setListboxIsOpen={setListboxIsOpen}\r\n          allowCustomValue={allowCustomValue}\r\n        >\r\n          {children}\r\n        </ChipInput>\r\n      </Input>\r\n    </Field>\r\n  );\r\n}\r\n\r\ninterface ListWrapperProps {\r\n  items: ChipValue[];\r\n  setItems: (items: ChipValue[]) => void;\r\n  displayChipUsing: (value: ChipValue) => ReactNode;\r\n  chipSize?: ChipProps['size'];\r\n  onChipClick?: (value: ChipValue) => void;\r\n}\r\nfunction ListWrapper({\r\n  items,\r\n  setItems,\r\n  displayChipUsing,\r\n  chipSize,\r\n  onChipClick,\r\n}: ListWrapperProps) {\r\n  const manager = useFocusManager();\r\n  const removeItem = useCallback(\r\n    (key: Key) => {\r\n      const i = items.findIndex(cr => cr.id === key);\r\n      const newItems = [...items];\r\n      if (i > -1) {\r\n        newItems.splice(i, 1);\r\n        setItems(newItems);\r\n      }\r\n      return newItems;\r\n    },\r\n    [items, setItems],\r\n  );\r\n\r\n  return (\r\n    <ChipList\r\n      className={clsx(\r\n        'max-w-full flex-shrink-0 flex-wrap',\r\n        chipSize === 'xs' ? 'my-6' : 'my-8',\r\n      )}\r\n      size={chipSize}\r\n      selectable\r\n    >\r\n      {items.map(item => (\r\n        <Chip\r\n          key={item.id}\r\n          errorMessage={item.errorMessage}\r\n          adornment={item.image ? <Avatar circle src={item.image} /> : null}\r\n          onClick={() => onChipClick?.(item)}\r\n          onRemove={() => {\r\n            const newItems = removeItem(item.id);\r\n            if (newItems.length) {\r\n              // focus previous chip\r\n              manager?.focusPrevious({tabbable: true});\r\n            } else {\r\n              // focus input\r\n              manager?.focusLast();\r\n            }\r\n          }}\r\n        >\r\n          {displayChipUsing(item)}\r\n        </Chip>\r\n      ))}\r\n    </ChipList>\r\n  );\r\n}\r\n\r\ninterface ChipInputProps<T> {\r\n  showEmptyMessage?: boolean;\r\n  inputProps: ReturnType<typeof useField>['inputProps'];\r\n  inputValue?: string;\r\n  onInputValueChange?: (value: string) => void;\r\n  fieldRef: RefObject<HTMLDivElement>;\r\n  inputRef: RefObject<HTMLInputElement>;\r\n  chips: ChipValue[];\r\n  setChips: (items: ChipValue[]) => void;\r\n  validateWith?: (value: ChipValue) => ChipValue;\r\n  isLoading?: boolean;\r\n  suggestions?: T[];\r\n  placeholder?: string;\r\n  openMenuOnFocus?: boolean;\r\n  listboxIsOpen: boolean;\r\n  setListboxIsOpen: (value: boolean) => void;\r\n  allowCustomValue: boolean;\r\n  children: ListBoxChildren<T>['children'];\r\n  size: FieldProps['size'];\r\n}\r\nfunction ChipInput<T>(props: ChipInputProps<T>) {\r\n  const {\r\n    inputRef,\r\n    fieldRef,\r\n    validateWith,\r\n    setChips,\r\n    chips,\r\n    suggestions,\r\n    inputProps,\r\n    placeholder,\r\n    openMenuOnFocus,\r\n    listboxIsOpen,\r\n    setListboxIsOpen,\r\n    allowCustomValue,\r\n    isLoading,\r\n    size,\r\n  } = props;\r\n  const manager = useFocusManager();\r\n\r\n  const addItems = useCallback(\r\n    (items?: ChipValue[]) => {\r\n      items = (items || []).filter(item => {\r\n        const invalid = !item || !item.id || !item.name;\r\n        const alreadyExists = chips.findIndex(cr => cr.id === item?.id) > -1;\r\n        return !alreadyExists && !invalid;\r\n      });\r\n      if (!items.length) return;\r\n\r\n      if (validateWith) {\r\n        items = items.map(item => validateWith(item));\r\n      }\r\n      setChips([...chips, ...items]);\r\n    },\r\n    [chips, setChips, validateWith],\r\n  );\r\n\r\n  const listbox = useListbox<T>({\r\n    ...props,\r\n    clearInputOnItemSelection: true,\r\n    isOpen: listboxIsOpen,\r\n    onOpenChange: setListboxIsOpen,\r\n    items: suggestions,\r\n    selectionMode: 'none',\r\n    role: 'listbox',\r\n    virtualFocus: true,\r\n    onItemSelected: value => {\r\n      handleItemSelection(value as string);\r\n    },\r\n  });\r\n\r\n  const {\r\n    state: {\r\n      activeIndex,\r\n      setActiveIndex,\r\n      isOpen,\r\n      setIsOpen,\r\n      inputValue,\r\n      setInputValue,\r\n    },\r\n    refs,\r\n    listboxId,\r\n    collection,\r\n    onInputChange,\r\n  } = listbox;\r\n\r\n  const handleItemSelection = (textValue: string) => {\r\n    const option =\r\n      collection.size && activeIndex != null\r\n        ? [...collection.values()][activeIndex]\r\n        : null;\r\n    if (option?.item) {\r\n      addItems([option.item]);\r\n    } else if (allowCustomValue) {\r\n      addItems([stringToChipValue(option ? option.value : textValue)]);\r\n    }\r\n\r\n    setInputValue('');\r\n    setActiveIndex(null);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  // position dropdown relative to whole chip field, not the input\r\n  useLayoutEffect(() => {\r\n    if (fieldRef.current && refs.reference.current !== fieldRef.current) {\r\n      listbox.reference(fieldRef.current);\r\n    }\r\n  }, [fieldRef, listbox, refs]);\r\n\r\n  const {handleTriggerKeyDown, handleListboxKeyboardNavigation} =\r\n    useListboxKeyboardNavigation(listbox);\r\n\r\n  const handleFocusAndClick = createEventHandler(() => {\r\n    if (openMenuOnFocus && !isOpen) {\r\n      setIsOpen(true);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Listbox\r\n      listbox={listbox}\r\n      mobileOverlay={Popover}\r\n      isLoading={isLoading}\r\n      onPointerDown={e => {\r\n        // prevent focus from leaving input when scrolling listbox via mouse\r\n        e.preventDefault();\r\n      }}\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        className={clsx(\r\n          'mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none',\r\n          size === 'xs' ? 'h-20' : 'h-30',\r\n        )}\r\n        placeholder={placeholder}\r\n        {...mergeProps(inputProps, {\r\n          ref: inputRef,\r\n          value: inputValue,\r\n          onChange: onInputChange,\r\n          onPaste: e => {\r\n            const paste = e.clipboardData.getData('text');\r\n            const emails = paste.match(\r\n              /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi,\r\n            );\r\n            if (emails) {\r\n              e.preventDefault();\r\n              const selection = window.getSelection();\r\n              if (selection?.rangeCount) {\r\n                selection.deleteFromDocument();\r\n                addItems(emails.map(email => stringToChipValue(email)));\r\n              }\r\n            }\r\n          },\r\n          'aria-autocomplete': 'list',\r\n          'aria-controls': isOpen ? listboxId : undefined,\r\n          autoComplete: 'off',\r\n          autoCorrect: 'off',\r\n          spellCheck: 'false',\r\n          onKeyDown: e => {\r\n            const input = e.target as HTMLInputElement;\r\n\r\n            if (e.key === 'Enter') {\r\n              // prevent form submitting\r\n              e.preventDefault();\r\n              // add chip from selected listbox option or current input text value\r\n              handleItemSelection(input.value);\r\n              return;\r\n            }\r\n\r\n            // on escape, clear input and close dropdown\r\n            if (e.key === 'Escape' && isOpen) {\r\n              setIsOpen(false);\r\n              setInputValue('');\r\n            }\r\n\r\n            // move focus to input when focus is on first item and prevent arrow up from cycling listbox\r\n            if (\r\n              e.key === 'ArrowUp' &&\r\n              isOpen &&\r\n              (activeIndex === 0 || activeIndex == null)\r\n            ) {\r\n              setActiveIndex(null);\r\n              return;\r\n            }\r\n\r\n            // block left and right arrows from navigating in input, if focus is on listbox\r\n            if (\r\n              activeIndex != null &&\r\n              (e.key === 'ArrowLeft' || e.key === 'ArrowRight')\r\n            ) {\r\n              e.preventDefault();\r\n              return;\r\n            }\r\n\r\n            // move focus on the last chip, if focus is at the  start of input\r\n            if (\r\n              (e.key === 'ArrowLeft' ||\r\n                e.key === 'Backspace' ||\r\n                e.key === 'Delete') &&\r\n              input.selectionStart === 0 &&\r\n              activeIndex == null &&\r\n              chips.length\r\n            ) {\r\n              manager?.focusPrevious({tabbable: true});\r\n              return;\r\n            }\r\n\r\n            // fallthrough to listbox navigation handlers for arrow keys\r\n            const handled = handleTriggerKeyDown(e);\r\n            if (!handled) {\r\n              handleListboxKeyboardNavigation(e);\r\n            }\r\n          },\r\n          onFocus: handleFocusAndClick,\r\n          onClick: handleFocusAndClick,\r\n        } as HTMLAttributes<HTMLInputElement>)}\r\n      />\r\n    </Listbox>\r\n  );\r\n}\r\n\r\nfunction useChipFieldValueState({\r\n  onChange,\r\n  value,\r\n  defaultValue,\r\n  valueKey,\r\n}: ChipFieldProps<any>) {\r\n  // convert value from string[] to ChipValue[], if needed\r\n  const propsValue = useMemo(() => {\r\n    return mixedValueToChipValue(value);\r\n  }, [value]);\r\n\r\n  // convert defaultValue from string[] to ChipValue[], if needed\r\n  const propsDefaultValue = useMemo(() => {\r\n    return mixedValueToChipValue(defaultValue);\r\n  }, [defaultValue]);\r\n\r\n  // emit string[] or ChipValue[] on change, based on \"valueKey\" prop\r\n  const handleChange = useCallback(\r\n    (value: ChipValue[]) => {\r\n      const newValue = valueKey ? value.map(v => v[valueKey]) : value;\r\n      onChange?.(newValue as any);\r\n    },\r\n    [onChange, valueKey],\r\n  );\r\n\r\n  return useControlledState<ChipValue[]>(\r\n    !propsValue ? undefined : propsValue,\r\n    propsDefaultValue || [],\r\n    handleChange,\r\n  );\r\n}\r\n\r\nfunction mixedValueToChipValue(\r\n  value?: (string | number | ChipValue)[] | null,\r\n): ChipValue[] | undefined {\r\n  if (value == null) {\r\n    return undefined;\r\n  }\r\n\r\n  return value.map(v => {\r\n    return typeof v !== 'object' ? stringToChipValue(v as string) : v;\r\n  });\r\n}\r\n\r\nexport const ChipField = React.forwardRef(ChipFieldInner) as <T>(\r\n  props: ChipFieldProps<T> & {ref?: Ref<HTMLInputElement>},\r\n) => ReactElement;\r\n","import {useController} from 'react-hook-form';\r\nimport {mergeProps} from '@react-aria/utils';\r\nimport React from 'react';\r\nimport {ChipField, ChipFieldProps} from './chip-field';\r\n\r\nexport type FormChipFieldProps<T> = ChipFieldProps<T> & {\r\n  name: string;\r\n};\r\n\r\nexport function FormChipField<T>({children, ...props}: FormChipFieldProps<T>) {\r\n  const {\r\n    field: {onChange, onBlur, value = [], ref},\r\n    fieldState: {invalid, error},\r\n  } = useController({\r\n    name: props.name,\r\n  });\r\n\r\n  const formProps: Partial<ChipFieldProps<T>> = {\r\n    onChange,\r\n    onBlur,\r\n    value,\r\n    invalid,\r\n    errorMessage: error?.message,\r\n  };\r\n\r\n  return (\r\n    <ChipField ref={ref} {...mergeProps(formProps, props)}>\r\n      {children}\r\n    </ChipField>\r\n  );\r\n}\r\n","import {Item} from '@common/ui/forms/listbox/item';\r\nimport {FilterPanelProps} from '@common/datatable/filters/panels/filter-panel-props';\r\nimport {FormChipField} from '@common/ui/forms/input-field/chip-field/form-chip-field';\r\nimport {useTrans} from '@common/i18n/use-trans';\r\nimport {FilterChipFieldControl} from '@common/datatable/filters/backend-filter';\r\nimport {Trans} from '@common/i18n/trans';\r\n\r\nexport function ChipFieldFilterPanel({\r\n  filter,\r\n}: FilterPanelProps<FilterChipFieldControl>) {\r\n  const {trans} = useTrans();\r\n  return (\r\n    <FormChipField\r\n      size=\"sm\"\r\n      name={`${filter.key}.value`}\r\n      valueKey=\"id\"\r\n      allowCustomValue={false}\r\n      showDropdownArrow\r\n      placeholder={\r\n        filter.control.placeholder\r\n          ? trans(filter.control.placeholder)\r\n          : undefined\r\n      }\r\n      displayWith={chip =>\r\n        filter.control.options.find(o => o.key === chip.id)?.label.message\r\n      }\r\n      suggestions={filter.control.options.map(o => ({\r\n        id: o.key,\r\n        name: o.label.message,\r\n      }))}\r\n    >\r\n      {chip => (\r\n        <Item key={chip.id} value={chip.id}>\r\n          {<Trans message={chip.name} />}\r\n        </Item>\r\n      )}\r\n    </FormChipField>\r\n  );\r\n}\r\n","import {BackendFilter, FilterControlType} from '../backend-filter';\r\nimport {ComponentPropsWithRef, forwardRef, ReactNode} from 'react';\r\nimport {Button} from '@common/ui/buttons/button';\r\nimport {KeyboardArrowDownIcon} from '@common/icons/material/KeyboardArrowDown';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport clsx from 'clsx';\r\n\r\ninterface TriggerButtonProps\r\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\r\n  isInactive?: boolean;\r\n  filter: BackendFilter;\r\n  children?: ReactNode;\r\n}\r\nexport const FilterListTriggerButton = forwardRef<\r\n  HTMLButtonElement,\r\n  TriggerButtonProps\r\n>((props, ref) => {\r\n  // pass through all props from menu trigger and dialog trigger to button\r\n  const {isInactive, filter, ...domProps} = props;\r\n\r\n  if (isInactive) {\r\n    return <InactiveFilterButton filter={filter} {...domProps} ref={ref} />;\r\n  }\r\n\r\n  return <ActiveFilterButton filter={filter} {...domProps} ref={ref} />;\r\n});\r\n\r\ninterface InactiveFilterButtonProps\r\n  extends Omit<ComponentPropsWithRef<'button'>, 'color'> {\r\n  filter: BackendFilter;\r\n}\r\nexport const InactiveFilterButton = forwardRef<\r\n  HTMLButtonElement,\r\n  InactiveFilterButtonProps\r\n>(({filter, ...domProps}, ref) => {\r\n  return (\r\n    <Button\r\n      variant=\"outline\"\r\n      size=\"xs\"\r\n      color=\"paper\"\r\n      radius=\"rounded-md\"\r\n      border=\"border\"\r\n      ref={ref}\r\n      endIcon={<KeyboardArrowDownIcon />}\r\n      {...domProps}\r\n    >\r\n      <Trans {...filter.label} />\r\n    </Button>\r\n  );\r\n});\r\n\r\nexport const ActiveFilterButton = forwardRef<\r\n  HTMLButtonElement,\r\n  InactiveFilterButtonProps\r\n>(({filter, children, ...domProps}, ref) => {\r\n  const isBoolean = filter.control.type === FilterControlType.BooleanToggle;\r\n  return (\r\n    <Button\r\n      variant=\"outline\"\r\n      size=\"xs\"\r\n      color=\"primary\"\r\n      radius=\"rounded-r-md\"\r\n      border=\"border-y border-r\"\r\n      endIcon={!isBoolean && <KeyboardArrowDownIcon />}\r\n      ref={ref}\r\n      {...domProps}\r\n    >\r\n      <span\r\n        className={clsx(\r\n          !isBoolean && 'border-r border-r-primary-light mr-8 pr-8'\r\n        )}\r\n      >\r\n        <Trans {...filter.label} />\r\n      </span>\r\n      {children}\r\n    </Button>\r\n  );\r\n});\r\n","import {DialogTrigger} from '../../../ui/overlays/dialog/dialog-trigger';\r\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\r\nimport {ReactNode} from 'react';\r\nimport {useForm} from 'react-hook-form';\r\nimport {FilterItemFormValue} from '../add-filter-dialog';\r\nimport {useDialogContext} from '../../../ui/overlays/dialog/dialog-context';\r\nimport {Dialog} from '../../../ui/overlays/dialog/dialog';\r\nimport {DialogHeader} from '../../../ui/overlays/dialog/dialog-header';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {DialogBody} from '../../../ui/overlays/dialog/dialog-body';\r\nimport {Form} from '../../../ui/forms/form';\r\nimport {DialogFooter} from '../../../ui/overlays/dialog/dialog-footer';\r\nimport {Button} from '../../../ui/buttons/button';\r\nimport {FilterListControlProps} from './filter-list-control';\r\n\r\ninterface FilterListItemDialogTriggerProps extends FilterListControlProps<any> {\r\n  label: ReactNode;\r\n  panel: ReactNode;\r\n}\r\nexport function FilterListItemDialogTrigger(\r\n  props: FilterListItemDialogTriggerProps\r\n) {\r\n  const {onValueChange, isInactive, filter, label} = props;\r\n  return (\r\n    <DialogTrigger\r\n      offset={10}\r\n      type=\"popover\"\r\n      onClose={(value?: FilterItemFormValue) => {\r\n        if (value !== undefined) {\r\n          onValueChange(value);\r\n        }\r\n      }}\r\n    >\r\n      <FilterListTriggerButton isInactive={isInactive} filter={filter}>\r\n        {label}\r\n      </FilterListTriggerButton>\r\n      <FilterListControlDialog {...props} />\r\n    </DialogTrigger>\r\n  );\r\n}\r\n\r\nexport function FilterListControlDialog({\r\n  filter,\r\n  panel,\r\n  value,\r\n  operator,\r\n}: FilterListItemDialogTriggerProps) {\r\n  const form = useForm<Record<string, FilterItemFormValue>>({\r\n    defaultValues: {\r\n      [filter.key]: {value, operator},\r\n    },\r\n  });\r\n  const {close, formId} = useDialogContext();\r\n  return (\r\n    <Dialog size=\"xs\">\r\n      <DialogHeader>\r\n        <Trans {...filter.label} />\r\n      </DialogHeader>\r\n      <DialogBody padding=\"px-14 pt-14 pb-4 max-h-288\">\r\n        <Form\r\n          form={form}\r\n          id={formId}\r\n          onSubmit={formValue => {\r\n            close(formValue[filter.key]);\r\n          }}\r\n        >\r\n          {filter.description && (\r\n            <div className=\"text-muted text-xs mb-14\">\r\n              <Trans {...filter.description} />\r\n            </div>\r\n          )}\r\n          {panel}\r\n        </Form>\r\n      </DialogBody>\r\n      <DialogFooter>\r\n        <Button\r\n          form={formId}\r\n          type=\"submit\"\r\n          variant=\"flat\"\r\n          color=\"primary\"\r\n          size=\"xs\"\r\n        >\r\n          <Trans message=\"Apply\" />\r\n        </Button>\r\n      </DialogFooter>\r\n    </Dialog>\r\n  );\r\n}\r\n","import {Fragment, memo} from 'react';\r\nimport {useNumberFormatter} from './use-number-formatter';\r\nimport {NumberFormatOptions} from '@internationalized/number';\r\nimport {shallowEqual} from '../utils/shallow-equal';\r\n\r\ninterface FormattedNumberProps extends NumberFormatOptions {\r\n  value: number;\r\n}\r\nexport const FormattedNumber = memo(\r\n  ({value, ...options}: FormattedNumberProps) => {\r\n    const formatter = useNumberFormatter(options);\r\n\r\n    if (isNaN(value)) {\r\n      value = 0;\r\n    }\r\n\r\n    return <Fragment>{formatter.format(value)}</Fragment>;\r\n  },\r\n  shallowEqual\r\n);\r\n","import {\r\n  BackendFilter,\r\n  CustomFilterControl,\r\n  DatePickerFilterControl,\r\n  FilterBooleanToggleControl,\r\n  FilterChipFieldControl,\r\n  FilterControl,\r\n  FilterControlType,\r\n  FilterNumberInputControl,\r\n  FilterOperator,\r\n  FilterSelectControl,\r\n  FilterSelectModelControl,\r\n  FilterTextInputControl,\r\n} from '../backend-filter';\r\nimport {FilterListTriggerButton} from './filter-list-trigger-button';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {SelectFilterPanel} from '../panels/select-filter-panel';\r\nimport {FilterListItemDialogTrigger} from './filter-list-item-dialog-trigger';\r\nimport {Avatar} from '@common/ui/images/avatar';\r\nimport {NormalizedModelFilterPanel} from '../panels/normalized-model-filter-panel';\r\nimport {DateRangeFilterPanel} from '../panels/date-range-filter-panel';\r\nimport {Fragment, Key, ReactNode} from 'react';\r\nimport {DateRangePresets} from '@common/ui/forms/input-field/date/date-range-picker/dialog/date-range-presets';\r\nimport {FormattedDateTimeRange} from '@common/i18n/formatted-date-time-range';\r\nimport {AbsoluteDateRange} from '@common/ui/forms/input-field/date/date-range-picker/form-date-range-picker';\r\nimport {InputFilterPanel} from '../panels/input-filter-panel';\r\nimport {FilterOperatorNames} from '../filter-operator-names';\r\nimport {FilterItemFormValue} from '../add-filter-dialog';\r\nimport {useNormalizedModel} from '@common/users/queries/use-normalized-model';\r\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\r\nimport {useTrans} from '@common/i18n/use-trans';\r\nimport {ChipFieldFilterPanel} from '@common/datatable/filters/panels/chip-field-filter-panel';\r\nimport {FormattedNumber} from '@common/i18n/formatted-number';\r\n\r\nexport interface FilterListControlProps<T = unknown, E = FilterControl> {\r\n  filter: BackendFilter<E>;\r\n  onValueChange: (value: FilterItemFormValue<T>) => void;\r\n  value: T;\r\n  operator?: FilterOperator;\r\n  isInactive?: boolean;\r\n}\r\nexport function FilterListControl(props: FilterListControlProps<any, any>) {\r\n  switch (props.filter.control.type) {\r\n    case FilterControlType.DateRangePicker:\r\n      return <DatePickerControl {...props} />;\r\n    case FilterControlType.BooleanToggle:\r\n      return <BooleanToggleControl {...props} />;\r\n    case FilterControlType.Select:\r\n      return <SelectControl {...props} />;\r\n    case FilterControlType.ChipField:\r\n      return <ChipFieldControl {...props} />;\r\n    case FilterControlType.Input:\r\n      return <InputControl {...props} />;\r\n    case FilterControlType.SelectModel:\r\n      return <SelectModelControl {...props} />;\r\n    case FilterControlType.Custom:\r\n      const Control = (props.filter.control as CustomFilterControl).listItem;\r\n      return <Control {...props} />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction DatePickerControl(\r\n  props: FilterListControlProps<\r\n    Required<AbsoluteDateRange>,\r\n    DatePickerFilterControl\r\n  >,\r\n) {\r\n  const {value, filter} = props;\r\n\r\n  let valueLabel: ReactNode;\r\n  if (value.preset !== undefined) {\r\n    valueLabel = <Trans {...DateRangePresets[value.preset].label} />;\r\n  } else {\r\n    valueLabel = (\r\n      <FormattedDateTimeRange\r\n        start={new Date(value.start)}\r\n        end={new Date(value.end)}\r\n        options={{dateStyle: 'medium'}}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <FilterListItemDialogTrigger\r\n      {...props}\r\n      label={valueLabel}\r\n      panel={<DateRangeFilterPanel filter={filter} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction BooleanToggleControl({\r\n  filter,\r\n  isInactive,\r\n  onValueChange,\r\n}: FilterListControlProps<\r\n  FilterBooleanToggleControl['defaultValue'],\r\n  FilterBooleanToggleControl\r\n>) {\r\n  // todo: toggle control on or off here\r\n  return (\r\n    <FilterListTriggerButton\r\n      onClick={() => {\r\n        onValueChange({value: filter.control.defaultValue});\r\n      }}\r\n      filter={filter}\r\n      isInactive={isInactive}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SelectControl(\r\n  props: FilterListControlProps<Key, FilterSelectControl>,\r\n) {\r\n  const {filter, value} = props;\r\n  const option = filter.control.options.find(o => o.key === value);\r\n  return (\r\n    <FilterListItemDialogTrigger\r\n      {...props}\r\n      label={option ? <Trans {...option.label} /> : null}\r\n      panel={<SelectFilterPanel filter={filter} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction ChipFieldControl(\r\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\r\n) {\r\n  return (\r\n    <FilterListItemDialogTrigger\r\n      {...props}\r\n      label={<MultipleValues {...props} />}\r\n      panel={<ChipFieldFilterPanel filter={props.filter} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction MultipleValues(\r\n  props: FilterListControlProps<string[], FilterChipFieldControl>,\r\n) {\r\n  const {trans} = useTrans();\r\n  const {filter, value} = props;\r\n  const options = value.map(v => filter.control.options.find(o => o.key === v));\r\n  const maxShownCount = 3;\r\n  const notShownCount = value.length - maxShownCount;\r\n\r\n  // translate names, add commas and limit to 3\r\n  const names = (\r\n    <Fragment>\r\n      {options\r\n        .filter(Boolean)\r\n        .slice(0, maxShownCount)\r\n        .map((o, i) => {\r\n          let name = '';\r\n          if (i !== 0) {\r\n            name += ', ';\r\n          }\r\n          name += trans(o!.label);\r\n          return name;\r\n        })}\r\n    </Fragment>\r\n  );\r\n\r\n  // indicate that there are some names not shown\r\n  return notShownCount > 0 ? (\r\n    <Trans\r\n      message=\":names + :count more\"\r\n      values={{names: names, count: notShownCount}}\r\n    />\r\n  ) : (\r\n    names\r\n  );\r\n}\r\n\r\nfunction InputControl(\r\n  props: FilterListControlProps<\r\n    string,\r\n    FilterTextInputControl | FilterNumberInputControl\r\n  >,\r\n) {\r\n  const {filter, value, operator} = props;\r\n\r\n  const operatorLabel = operator ? (\r\n    <Trans {...FilterOperatorNames[operator]} />\r\n  ) : null;\r\n\r\n  const formattedValue =\r\n    filter.control.inputType === 'number' ? (\r\n      <FormattedNumber value={value as any} />\r\n    ) : (\r\n      value\r\n    );\r\n\r\n  return (\r\n    <FilterListItemDialogTrigger\r\n      {...props}\r\n      label={\r\n        <Fragment>\r\n          {operatorLabel} {formattedValue}\r\n        </Fragment>\r\n      }\r\n      panel={<InputFilterPanel filter={filter} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SelectModelControl(\r\n  props: FilterListControlProps<string, FilterSelectModelControl>,\r\n) {\r\n  const {value, filter} = props;\r\n  const {isLoading, data} = useNormalizedModel(\r\n    `normalized-models/${filter.control.model}/${value}`,\r\n    undefined,\r\n    {enabled: !!value},\r\n  );\r\n\r\n  const skeleton = (\r\n    <Fragment>\r\n      <Skeleton variant=\"avatar\" size=\"w-18 h-18 mr-6\" />\r\n      <Skeleton variant=\"rect\" size=\"w-50\" />\r\n    </Fragment>\r\n  );\r\n  const modelPreview = (\r\n    <Fragment>\r\n      <Avatar size=\"xs\" src={data?.model.image} className=\"mr-6\" />\r\n      {data?.model.name}\r\n    </Fragment>\r\n  );\r\n\r\n  const label = isLoading || !data ? skeleton : modelPreview;\r\n\r\n  return (\r\n    <FilterListItemDialogTrigger\r\n      {...props}\r\n      label={label}\r\n      panel={<NormalizedModelFilterPanel filter={filter} />}\r\n    />\r\n  );\r\n}\r\n","import clsx from 'clsx';\r\nimport {BackendFilter} from '../backend-filter';\r\nimport {useBackendFilterUrlParams} from '../backend-filter-url-params';\r\nimport {IconButton} from '@common/ui/buttons/icon-button';\r\nimport {CloseIcon} from '@common/icons/material/Close';\r\nimport {FilterListControl} from './filter-list-control';\r\nimport {FilterItemFormValue} from '../add-filter-dialog';\r\n\r\ninterface FilterListProps {\r\n  filters: BackendFilter[];\r\n  // these filters will always be shown, even if value is not yet selected for filter\r\n  pinnedFilters?: string[];\r\n  className?: string;\r\n}\r\nexport function FilterList({\r\n  filters,\r\n  pinnedFilters,\r\n  className,\r\n}: FilterListProps) {\r\n  const {decodedFilters, remove, replaceAll} = useBackendFilterUrlParams(\r\n    filters,\r\n    pinnedFilters\r\n  );\r\n\r\n  if (!decodedFilters.length) return null;\r\n\r\n  return (\r\n    <div className={clsx('flex items-center gap-6 overflow-x-auto', className)}>\r\n      {decodedFilters.map((field, index) => {\r\n        const filter = filters.find(f => f.key === field.key);\r\n\r\n        if (!filter) return null;\r\n\r\n        const handleValueChange = (payload: FilterItemFormValue) => {\r\n          const newFilters = [...decodedFilters];\r\n          newFilters.splice(index, 1, {\r\n            key: filter.key,\r\n            value: payload.value,\r\n            isInactive: false,\r\n            operator: payload.operator || filter.defaultOperator,\r\n          });\r\n          replaceAll(newFilters);\r\n        };\r\n\r\n        return (\r\n          <div key={field.key}>\r\n            {!field.isInactive && (\r\n              <IconButton\r\n                variant=\"outline\"\r\n                color=\"primary\"\r\n                size=\"xs\"\r\n                radius=\"rounded-l-md\"\r\n                onClick={() => {\r\n                  remove(field.key);\r\n                }}\r\n              >\r\n                <CloseIcon />\r\n              </IconButton>\r\n            )}\r\n            <FilterListControl\r\n              filter={filter}\r\n              isInactive={field.isInactive}\r\n              value={field.valueKey != null ? field.valueKey : field.value}\r\n              operator={field.operator}\r\n              onValueChange={handleValueChange}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const AddIcon = createSvgIcon(\r\n  <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\r\n, 'AddOutlined');\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const FileDownloadIcon = createSvgIcon(\r\n  <path d=\"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" />\r\n, 'FileDownloadOutlined');\r\n","export function downloadFileFromUrl(url: string, name?: string) {\r\n  const link = document.createElement('a');\r\n  link.href = url;\r\n  if (name) link.download = name;\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n}\r\n","import {useControlledState} from '@react-stately/utils';\r\nimport {HTMLAttributes, useCallback, useState} from 'react';\r\nimport {\r\n  CalendarDate,\r\n  DateValue,\r\n  isSameDay,\r\n  toCalendarDate,\r\n  toZoned,\r\n  ZonedDateTime,\r\n} from '@internationalized/date';\r\nimport {useBaseDatePickerState} from '../use-base-date-picker-state';\r\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\r\n\r\nexport type Granularity = 'day' | 'minute';\r\n\r\nexport type DatePickerState = BaseDatePickerState;\r\n\r\nexport interface BaseDatePickerState<T = ZonedDateTime, P = boolean> {\r\n  timezone: string;\r\n  granularity: Granularity;\r\n  selectedValue: T;\r\n  setSelectedValue: (value: T) => void;\r\n  calendarIsOpen: boolean;\r\n  setCalendarIsOpen: (isOpen: boolean) => void;\r\n  calendarDates: CalendarDate[];\r\n  setCalendarDates: (dates: CalendarDate[]) => void;\r\n  dayIsActive: (day: CalendarDate) => boolean;\r\n  dayIsHighlighted: (day: CalendarDate) => boolean;\r\n  dayIsRangeStart: (day: CalendarDate) => boolean;\r\n  dayIsRangeEnd: (day: CalendarDate) => boolean;\r\n  isPlaceholder: P;\r\n  setIsPlaceholder: (value: P) => void;\r\n  clear: () => void;\r\n  min?: ZonedDateTime;\r\n  max?: ZonedDateTime;\r\n  closeDialogOnSelection: boolean;\r\n  getCellProps: (\r\n    date: CalendarDate,\r\n    isSameMonth: boolean,\r\n  ) => HTMLAttributes<HTMLElement>;\r\n}\r\n\r\nexport interface DatePickerValueProps<V, CV = V> {\r\n  value?: V | null | '';\r\n  defaultValue?: V | null;\r\n  onChange?: (value: CV | null) => void;\r\n  min?: DateValue;\r\n  max?: DateValue;\r\n  granularity?: Granularity;\r\n  closeDialogOnSelection?: boolean;\r\n}\r\nexport function useDatePickerState(\r\n  props: DatePickerValueProps<ZonedDateTime>,\r\n): BaseDatePickerState {\r\n  const now = useCurrentDateTime();\r\n  const [isPlaceholder, setIsPlaceholder] = useState(\r\n    !props.value && !props.defaultValue,\r\n  );\r\n\r\n  // if user clears the date, we will want to still keep an\r\n  // instance internally, but return null via \"onChange\" callback\r\n  const setStateValue = props.onChange;\r\n  const [internalValue, setInternalValue] = useControlledState(\r\n    props.value || now,\r\n    props.defaultValue || now,\r\n    value => {\r\n      setIsPlaceholder(false);\r\n      setStateValue?.(value);\r\n    },\r\n  );\r\n\r\n  const {\r\n    min,\r\n    max,\r\n    granularity,\r\n    timezone,\r\n    calendarIsOpen,\r\n    setCalendarIsOpen,\r\n    closeDialogOnSelection,\r\n  } = useBaseDatePickerState(internalValue, props);\r\n\r\n  const clear = useCallback(() => {\r\n    setIsPlaceholder(true);\r\n    setInternalValue(now);\r\n    setStateValue?.(null);\r\n    setCalendarIsOpen(false);\r\n  }, [now, setInternalValue, setStateValue, setCalendarIsOpen]);\r\n\r\n  const [calendarDates, setCalendarDates] = useState<CalendarDate[]>(() => {\r\n    return [toCalendarDate(internalValue)];\r\n  });\r\n\r\n  const setSelectedValue = useCallback(\r\n    (newValue: DateValue) => {\r\n      if (min && newValue.compare(min) < 0) {\r\n        newValue = min;\r\n      } else if (max && newValue.compare(max) > 0) {\r\n        newValue = max;\r\n      }\r\n\r\n      // preserve time\r\n      const value = internalValue\r\n        ? internalValue.set(newValue)\r\n        : toZoned(newValue, timezone);\r\n      setInternalValue(value);\r\n      setCalendarDates([toCalendarDate(value)]);\r\n      setIsPlaceholder(false);\r\n    },\r\n    [setInternalValue, min, max, internalValue, timezone],\r\n  );\r\n\r\n  const dayIsActive = useCallback(\r\n    (day: DateValue) => !isPlaceholder && isSameDay(internalValue, day),\r\n    [internalValue, isPlaceholder],\r\n  );\r\n\r\n  const getCellProps = useCallback(\r\n    (date: DateValue): HTMLAttributes<HTMLElement> => {\r\n      return {\r\n        onClick: () => {\r\n          setSelectedValue?.(date);\r\n          if (closeDialogOnSelection) {\r\n            setCalendarIsOpen?.(false);\r\n          }\r\n        },\r\n      };\r\n    },\r\n    [setSelectedValue, setCalendarIsOpen, closeDialogOnSelection],\r\n  );\r\n\r\n  return {\r\n    selectedValue: internalValue,\r\n    setSelectedValue: setInternalValue,\r\n    calendarIsOpen,\r\n    setCalendarIsOpen,\r\n    dayIsActive,\r\n    dayIsHighlighted: () => false,\r\n    dayIsRangeStart: () => false,\r\n    dayIsRangeEnd: () => false,\r\n    getCellProps,\r\n    calendarDates,\r\n    setCalendarDates,\r\n    isPlaceholder,\r\n    clear,\r\n    setIsPlaceholder,\r\n    min,\r\n    max,\r\n    granularity,\r\n    timezone,\r\n    closeDialogOnSelection,\r\n  };\r\n}\r\n","import React, {\r\n  ComponentPropsWithoutRef,\r\n  Fragment,\r\n  MouseEvent,\r\n  useRef,\r\n} from 'react';\r\nimport {parseAbsoluteToLocal, ZonedDateTime} from '@internationalized/date';\r\nimport {useController} from 'react-hook-form';\r\nimport {mergeProps} from '@react-aria/utils';\r\nimport {\r\n  DatePickerValueProps,\r\n  useDatePickerState,\r\n} from './use-date-picker-state';\r\nimport {DialogTrigger} from '@common/ui/overlays/dialog/dialog-trigger';\r\nimport {DateRangeIcon} from '@common/icons/material/DateRange';\r\nimport {Dialog} from '@common/ui/overlays/dialog/dialog';\r\nimport {DialogBody} from '@common/ui/overlays/dialog/dialog-body';\r\nimport {Calendar} from '../calendar/calendar';\r\nimport {\r\n  DatePickerField,\r\n  DatePickerFieldProps,\r\n} from '../date-range-picker/date-picker-field';\r\nimport {DateSegmentList} from '../segments/date-segment-list';\r\nimport {useDateFormatter} from '@common/i18n/use-date-formatter';\r\nimport {useTrans} from '@common/i18n/use-trans';\r\nimport clsx from 'clsx';\r\nimport {DialogFooter} from '@common/ui/overlays/dialog/dialog-footer';\r\nimport {Button} from '@common/ui/buttons/button';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {useCurrentDateTime} from '@common/i18n/use-current-date-time';\r\n\r\nexport interface DatePickerProps\r\n  extends Omit<DatePickerFieldProps, 'children'>,\r\n    DatePickerValueProps<ZonedDateTime> {}\r\nexport function DatePicker({showCalendarFooter, ...props}: DatePickerProps) {\r\n  const state = useDatePickerState(props);\r\n  const inputRef = useRef<HTMLDivElement>(null);\r\n  const now = useCurrentDateTime();\r\n\r\n  const footer = showCalendarFooter && (\r\n    <DialogFooter\r\n      padding=\"px-14 pb-14\"\r\n      startAction={\r\n        <Button\r\n          disabled={state.isPlaceholder}\r\n          variant=\"text\"\r\n          color=\"primary\"\r\n          onClick={() => {\r\n            state.clear();\r\n          }}\r\n        >\r\n          <Trans message=\"Clear\" />\r\n        </Button>\r\n      }\r\n    >\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          state.setSelectedValue(now);\r\n          state.setCalendarIsOpen(false);\r\n        }}\r\n      >\r\n        <Trans message=\"Today\" />\r\n      </Button>\r\n    </DialogFooter>\r\n  );\r\n\r\n  const dialog = (\r\n    <DialogTrigger\r\n      offset={8}\r\n      placement=\"bottom-start\"\r\n      isOpen={state.calendarIsOpen}\r\n      onOpenChange={state.setCalendarIsOpen}\r\n      type=\"popover\"\r\n      triggerRef={inputRef}\r\n      returnFocusToTrigger={false}\r\n      moveFocusToDialog={false}\r\n    >\r\n      <Dialog size=\"auto\">\r\n        <DialogBody\r\n          className=\"flex items-start gap-40\"\r\n          padding={showCalendarFooter ? 'px-24 pt-20 pb-10' : null}\r\n        >\r\n          <Calendar state={state} visibleMonths={1} />\r\n        </DialogBody>\r\n        {footer}\r\n      </Dialog>\r\n    </DialogTrigger>\r\n  );\r\n\r\n  const openOnClick: ComponentPropsWithoutRef<'div'> = {\r\n    onClick: e => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      if (!isHourSegment(e)) {\r\n        state.setCalendarIsOpen(true);\r\n      } else {\r\n        state.setCalendarIsOpen(false);\r\n      }\r\n    },\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <DatePickerField\r\n        ref={inputRef}\r\n        wrapperProps={openOnClick}\r\n        endAdornment={\r\n          <DateRangeIcon className={clsx(props.disabled && 'text-disabled')} />\r\n        }\r\n        {...props}\r\n      >\r\n        <DateSegmentList\r\n          segmentProps={openOnClick}\r\n          state={state}\r\n          value={state.selectedValue}\r\n          onChange={state.setSelectedValue}\r\n          isPlaceholder={state.isPlaceholder}\r\n        />\r\n      </DatePickerField>\r\n      {dialog}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\ninterface FormDatePickerProps extends DatePickerProps {\r\n  name: string;\r\n}\r\nexport function FormDatePicker(props: FormDatePickerProps) {\r\n  const {min, max} = props;\r\n  const {trans} = useTrans();\r\n  const {format} = useDateFormatter();\r\n  const {\r\n    field: {onChange, onBlur, value = null, ref},\r\n    fieldState: {invalid, error},\r\n  } = useController({\r\n    name: props.name,\r\n    rules: {\r\n      validate: v => {\r\n        if (!v) return;\r\n        const date = parseAbsoluteToLocal(v);\r\n        if (min && date.compare(min) < 0) {\r\n          return trans({\r\n            message: 'Enter a date after :date',\r\n            values: {date: format(v)},\r\n          });\r\n        }\r\n        if (max && date.compare(max) > 0) {\r\n          return trans({\r\n            message: 'Enter a date before :date',\r\n            values: {date: format(v)},\r\n          });\r\n        }\r\n      },\r\n    },\r\n  });\r\n\r\n  const parsedValue: null | ZonedDateTime = value\r\n    ? parseAbsoluteToLocal(value)\r\n    : null;\r\n\r\n  const formProps: Partial<DatePickerProps> = {\r\n    onChange: e => {\r\n      onChange(e ? e.toAbsoluteString() : e);\r\n    },\r\n    onBlur,\r\n    value: parsedValue,\r\n    invalid,\r\n    errorMessage: error?.message,\r\n    inputRef: ref,\r\n  };\r\n\r\n  return <DatePicker {...mergeProps(formProps, props)} />;\r\n}\r\n\r\nfunction isHourSegment(e: MouseEvent<HTMLDivElement>): boolean {\r\n  return ['hour', 'minute', 'dayPeriod'].includes(\r\n    (e.currentTarget as HTMLElement).ariaLabel || ''\r\n  );\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const DeleteIcon = createSvgIcon(\r\n  <path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\" />\r\n, 'DeleteOutlined');\r\n","import {DragMonitor} from './use-drag-monitor';\r\nimport {ConnectedDraggable, DraggableId} from './use-draggable';\r\nimport {ConnectedDroppable} from './use-droppable';\r\n\r\nexport type DragSessionStatus =\r\n  | 'dropSuccess'\r\n  | 'dropFail'\r\n  | 'dragging'\r\n  | 'inactive';\r\n\r\nexport interface DragSession {\r\n  dragTargetId?: DraggableId;\r\n  status: DragSessionStatus;\r\n}\r\n\r\nexport const draggables = new Map<DraggableId, ConnectedDraggable>();\r\nexport const droppables = new Map<DraggableId, ConnectedDroppable>();\r\nexport const dragMonitors = new Map<DraggableId, DragMonitor>();\r\nexport const dragSession: DragSession = {\r\n  status: 'inactive',\r\n};\r\n","import React from 'react';\r\n\r\ntype NativeEvent =\r\n  | React.PointerEvent\r\n  | PointerEvent\r\n  | React.DragEvent<HTMLElement>\r\n  | DragEvent;\r\n\r\nexport interface InteractableEvent {\r\n  x: number;\r\n  y: number;\r\n  deltaX: number;\r\n  deltaY: number;\r\n  rect: InteractableRect;\r\n  nativeEvent: NativeEvent;\r\n}\r\n\r\nexport interface InteractableRect {\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n  height: number;\r\n  angle?: number;\r\n}\r\n\r\nexport function interactableEvent({\r\n  e,\r\n  rect,\r\n  deltaX,\r\n  deltaY,\r\n}: {\r\n  e: NativeEvent;\r\n  rect: InteractableRect;\r\n  deltaX?: number;\r\n  deltaY?: number;\r\n}): InteractableEvent {\r\n  return {\r\n    rect,\r\n    x: e.clientX,\r\n    y: e.clientY,\r\n    deltaX: deltaX ?? 0,\r\n    deltaY: deltaY ?? 0,\r\n    nativeEvent: e,\r\n  };\r\n}\r\n","type InteractionName = null | 'resize' | 'rotate' | 'drag' | 'move';\r\n\r\nexport let activeInteraction: InteractionName = null;\r\n\r\nexport function setActiveInteraction(name: InteractionName) {\r\n  activeInteraction = name;\r\n}\r\n","import {InteractableRect} from '../interactable-event';\r\n\r\nexport function domRectToObj(rect: DOMRect): InteractableRect {\r\n  return {\r\n    left: rect.left,\r\n    top: rect.top,\r\n    width: rect.width,\r\n    height: rect.height,\r\n  };\r\n}\r\n","// use intersection observer instead of getBoundingClientRect for better performance as this will be called in onPointerMove event\r\nimport {InteractableRect} from '../interactable-event';\r\nimport {ConnectedMouseSelectable} from './mouse-selection/use-mouse-selectable';\r\nimport {DraggableId} from './use-draggable';\r\nimport {ConnectedDroppable} from './use-droppable';\r\n\r\nexport function updateRects(\r\n  targets: Map<DraggableId, ConnectedDroppable | ConnectedMouseSelectable>\r\n) {\r\n  const observer = new IntersectionObserver(entries => {\r\n    entries.forEach(entry => {\r\n      const {width, height, left, top} = entry.boundingClientRect;\r\n      const [id, target] =\r\n        [...targets].find(\r\n          ([, target]) => target.ref.current === entry.target\r\n        ) || [];\r\n      if (id == null || target == null) return;\r\n\r\n      const rect: InteractableRect = {\r\n        width,\r\n        height,\r\n        left,\r\n        top,\r\n      };\r\n      targets.set(id, {...target, rect});\r\n    });\r\n    observer.disconnect();\r\n  });\r\n\r\n  [...targets.values()].forEach(target => {\r\n    if (target.ref.current) {\r\n      observer.observe(target.ref.current);\r\n    }\r\n  });\r\n}\r\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\r\nimport {draggables, dragMonitors, dragSession, droppables} from './drag-state';\r\nimport {\r\n  InteractableEvent,\r\n  interactableEvent,\r\n  InteractableRect,\r\n} from '../interactable-event';\r\nimport {activeInteraction, setActiveInteraction} from '../active-interaction';\r\nimport {domRectToObj} from '../utils/dom-rect-to-obj';\r\nimport {updateRects} from './update-rects';\r\nimport {useGlobalListeners} from '@react-aria/utils';\r\nimport {DragMonitor} from './use-drag-monitor';\r\nimport {NativeFileDraggable} from './use-droppable';\r\n\r\ninterface DragState {\r\n  currentRect?: InteractableRect;\r\n  lastPosition: {x: number; y: number};\r\n  clickedEl?: HTMLElement;\r\n}\r\n\r\nexport type DragPreviewRenderer = (\r\n  draggable: ConnectedDraggable,\r\n  callback: (node: HTMLElement) => void\r\n) => void;\r\n\r\nexport type DraggableId = string | number | object;\r\n\r\nexport interface ConnectedDraggable<T = any> {\r\n  type: string;\r\n  id: DraggableId;\r\n  getData: () => T;\r\n  ref: RefObject<HTMLElement>;\r\n}\r\n\r\n// Either draggable from within the app, or file dragged in from the desktop\r\nexport type MixedDraggable = ConnectedDraggable | NativeFileDraggable;\r\n\r\ninterface UseDragProps extends ConnectedDraggable {\r\n  disabled?: boolean;\r\n  onDragStart?: (e: InteractableEvent, target: ConnectedDraggable) => void;\r\n  onDragMove?: (e: InteractableEvent, target: ConnectedDraggable) => void;\r\n  onDragEnd?: (e: InteractableEvent, target: ConnectedDraggable) => void;\r\n  preview?: RefObject<DragPreviewRenderer>;\r\n  hidePreview?: boolean;\r\n}\r\nexport function useDraggable({\r\n  id,\r\n  disabled,\r\n  ref,\r\n  preview,\r\n  hidePreview,\r\n  ...options\r\n}: UseDragProps) {\r\n  const dragHandleRef = useRef<HTMLButtonElement>(null);\r\n  const {addGlobalListener, removeAllGlobalListeners} = useGlobalListeners();\r\n\r\n  const state = useRef<DragState>({\r\n    lastPosition: {x: 0, y: 0},\r\n  }).current;\r\n\r\n  const optionsRef = useRef(options);\r\n  optionsRef.current = options;\r\n\r\n  useLayoutEffect(() => {\r\n    if (!disabled) {\r\n      draggables.set(id, {\r\n        ...draggables.get(id),\r\n        id,\r\n        ref,\r\n        type: optionsRef.current.type,\r\n        getData: optionsRef.current.getData,\r\n      });\r\n    } else {\r\n      draggables.delete(id);\r\n    }\r\n    return () => {\r\n      draggables.delete(id);\r\n    };\r\n  }, [id, disabled, optionsRef, ref]);\r\n\r\n  // notify monitors connected to the same drag type as this draggable\r\n  const notifyMonitors = (callback: (m: DragMonitor) => void) => {\r\n    dragMonitors.forEach(monitor => {\r\n      if (monitor.type === draggables.get(id)?.type) {\r\n        callback(monitor);\r\n      }\r\n    });\r\n  };\r\n\r\n  const onDragStart = (e: React.DragEvent<HTMLElement>) => {\r\n    const draggable = draggables.get(id);\r\n    const el = ref.current;\r\n    const clickedOnHandle =\r\n      !dragHandleRef.current ||\r\n      !state.clickedEl ||\r\n      dragHandleRef.current.contains(state.clickedEl);\r\n\r\n    // if another interaction is in progress (rotate, resize, drag etc.), bail\r\n    if (activeInteraction || !el || !draggable || !clickedOnHandle) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    updateRects(droppables);\r\n    setActiveInteraction('drag');\r\n\r\n    // hide default browser ghost image\r\n    if (hidePreview) {\r\n      hideNativeGhostImage(e);\r\n    }\r\n    // this will hide default browser cursor icon, if \"dropEffect\" is not set in dragOver/dragEnter\r\n    e.dataTransfer.effectAllowed = 'move';\r\n\r\n    state.lastPosition = {x: e.clientX, y: e.clientY};\r\n    state.currentRect = domRectToObj(el.getBoundingClientRect());\r\n    const ie = interactableEvent({rect: state.currentRect!, e});\r\n\r\n    // If there is a preview option, use it to render a custom preview image that will\r\n    // appear under the pointer while dragging. If not, the element itself is dragged by the browser.\r\n    if (preview?.current) {\r\n      preview.current(draggable, node => {\r\n        e.dataTransfer.setDragImage(node, 0, 0);\r\n      });\r\n    }\r\n\r\n    dragSession.status = 'dragging';\r\n    dragSession.dragTargetId = id;\r\n    if (ref.current) {\r\n      ref.current.dataset.dragging = 'true';\r\n    }\r\n\r\n    optionsRef.current.onDragStart?.(ie, draggable);\r\n\r\n    // wait until next frame so changes made in \"onDragStart\" are reflected in drag monitors\r\n    requestAnimationFrame(() => {\r\n      notifyMonitors(m => m.onDragStart?.(ie, draggable));\r\n    });\r\n\r\n    // firefox does not provide clientX/clientY in \"onDrag\", need to listen for dragOver on window instead\r\n    addGlobalListener(window, 'dragover', onDragOver, true);\r\n  };\r\n\r\n  const onDragOver = (e: React.DragEvent<HTMLElement> | DragEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!state.currentRect) return;\r\n\r\n    const deltaX = e.clientX - state.lastPosition.x;\r\n    const deltaY = e.clientY - state.lastPosition.y;\r\n\r\n    const newRect = {\r\n      ...state.currentRect,\r\n      left: state.currentRect.left + deltaX,\r\n      top: state.currentRect.top + deltaY,\r\n    };\r\n\r\n    const ie = interactableEvent({rect: newRect, e, deltaX, deltaY});\r\n\r\n    const target = draggables.get(id);\r\n    if (target) {\r\n      optionsRef.current.onDragMove?.(ie, target);\r\n      notifyMonitors(m => m.onDragMove?.(ie, target));\r\n    }\r\n\r\n    state.lastPosition = {x: e.clientX, y: e.clientY};\r\n    state.currentRect = newRect;\r\n  };\r\n\r\n  const onDragEnd = (e: React.DragEvent<HTMLElement>) => {\r\n    removeAllGlobalListeners();\r\n    if (!state.currentRect) return;\r\n\r\n    setActiveInteraction(null);\r\n    if (emptyImage) {\r\n      emptyImage.remove();\r\n    }\r\n\r\n    const ie = interactableEvent({rect: state.currentRect, e});\r\n\r\n    const draggable = draggables.get(id);\r\n    if (draggable) {\r\n      optionsRef.current.onDragEnd?.(ie, draggable);\r\n      notifyMonitors(m => m.onDragEnd?.(ie, draggable, dragSession!.status));\r\n    }\r\n\r\n    // wait a frame before clearing so monitors have a chance to use drag session status\r\n    requestAnimationFrame(() => {\r\n      dragSession.dragTargetId = undefined;\r\n      dragSession.status = 'inactive';\r\n      if (ref.current) {\r\n        delete ref.current.dataset.dragging;\r\n      }\r\n    });\r\n  };\r\n\r\n  const draggableProps = {\r\n    draggable: !disabled,\r\n    onDragStart,\r\n    onDragEnd,\r\n    onPointerDown: (e: React.PointerEvent) => {\r\n      state.clickedEl = e.target as HTMLElement;\r\n    },\r\n  };\r\n\r\n  return {draggableProps, dragHandleRef};\r\n}\r\n\r\nlet emptyImage: HTMLImageElement | undefined;\r\nfunction hideNativeGhostImage(e: React.DragEvent) {\r\n  if (!emptyImage) {\r\n    emptyImage = new Image();\r\n    // image needs to be in the dom to prevent \"globe\" icon in chrome\r\n    document.body.append(emptyImage);\r\n    emptyImage.src =\r\n      'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\r\n  }\r\n\r\n  e.dataTransfer.setDragImage(emptyImage, 0, 0);\r\n}\r\n","import {UploadedFile} from '@common/uploads/uploaded-file';\r\n\r\nexport async function* readFilesFromDataTransfer(dataTransfer: DataTransfer) {\r\n  const entries: FileSystemEntry[] = [];\r\n\r\n  // Pull out all entries before reading them, otherwise\r\n  // some entries will be lost due to recursion with promises\r\n  for (const item of dataTransfer.items) {\r\n    if (item.kind === 'file') {\r\n      const entry = item.webkitGetAsEntry();\r\n      if (entry) {\r\n        entries.push(entry);\r\n      }\r\n    }\r\n  }\r\n\r\n  for (const entry of entries) {\r\n    if (entry.isFile) {\r\n      if (entry.name === '.DS_Store') continue;\r\n      const file = await getEntryFile(entry as FileSystemFileEntry);\r\n      yield new UploadedFile(file, entry.fullPath);\r\n    } else if (entry.isDirectory) {\r\n      yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\r\n    }\r\n  }\r\n}\r\n\r\nasync function* getEntriesFromDirectory(\r\n  item: FileSystemDirectoryEntry\r\n): AsyncIterable<any> {\r\n  const reader = item.createReader();\r\n\r\n  // We must call readEntries repeatedly because there may be a limit to the\r\n  // number of entries that are returned at once.\r\n  let entries: FileSystemEntry[];\r\n  do {\r\n    entries = await new Promise((resolve, reject) => {\r\n      reader.readEntries(resolve, reject);\r\n    });\r\n\r\n    for (const entry of entries) {\r\n      if (entry.isFile) {\r\n        if (entry.name === '.DS_Store') continue;\r\n        const file = await getEntryFile(entry as FileSystemFileEntry);\r\n        yield new UploadedFile(file, entry.fullPath);\r\n      } else if (entry.isDirectory) {\r\n        yield* getEntriesFromDirectory(entry as FileSystemDirectoryEntry);\r\n      }\r\n    }\r\n  } while (entries.length > 0);\r\n}\r\n\r\nfunction getEntryFile(entry: FileSystemFileEntry): Promise<File> {\r\n  return new Promise((resolve, reject) => entry.file(resolve, reject));\r\n}\r\n","export async function asyncIterableToArray<T>(\r\n  iterator: AsyncIterable<T>\r\n): Promise<T[]> {\r\n  const items: T[] = [];\r\n  for await (const item of iterator) {\r\n    items.push(item);\r\n  }\r\n  return items;\r\n}\r\n","import React, {RefObject, useLayoutEffect, useRef} from 'react';\r\nimport {draggables, dragSession, droppables} from './drag-state';\r\nimport {readFilesFromDataTransfer} from './read-files-from-data-transfer';\r\nimport {asyncIterableToArray} from '@common/utils/array/async-iterable-to-array';\r\nimport {InteractableRect} from '../interactable-event';\r\nimport {DraggableId, MixedDraggable} from './use-draggable';\r\nimport {UploadedFile} from '@common/uploads/uploaded-file';\r\n\r\nexport interface ConnectedDroppable {\r\n  id: DraggableId;\r\n  rect?: InteractableRect;\r\n  disabled?: boolean;\r\n  ref: RefObject<HTMLElement>;\r\n}\r\n\r\n// File dragged in from desktop\r\nexport interface NativeFileDraggable {\r\n  type: 'nativeFile';\r\n  el: null;\r\n  ref: null;\r\n  getData: () => Promise<UploadedFile[]>;\r\n}\r\n\r\ninterface UseDroppableProps<T extends HTMLElement> {\r\n  id: DraggableId;\r\n  disabled?: boolean;\r\n  types: ('nativeFile' | string)[];\r\n  ref: RefObject<T>;\r\n  // this will fire dragEnter/dragLeave/dragOver events when same element is both draggable and drop target and dragging target over itself. Used for showing line previews before/after element during sort.\r\n  allowDragEventsFromItself?: boolean;\r\n  onDragEnter?: (target: MixedDraggable) => void;\r\n  onDragLeave?: (target: MixedDraggable) => void;\r\n  onDragOver?: (\r\n    target: MixedDraggable,\r\n    e: React.DragEvent<HTMLElement>\r\n  ) => void;\r\n  // Handler that is called after draggable is held over droppable for a period of time.\r\n  // This typically opens the item so that the user can drop within it.\r\n  onDropActivate?: (e: MixedDraggable) => void;\r\n  onDrop?: (target: MixedDraggable) => void | Promise<void> | false;\r\n  acceptsDrop?: (target: MixedDraggable) => boolean;\r\n}\r\n\r\ninterface DroppableState {\r\n  dragOverElements: Set<Element>;\r\n  dropActivateTimer: ReturnType<typeof setTimeout> | undefined;\r\n}\r\n\r\nconst DROP_ACTIVATE_TIMEOUT = 400;\r\n\r\nexport function useDroppable<T extends HTMLElement>({\r\n  id,\r\n  disabled,\r\n  ref,\r\n  ...options\r\n}: UseDroppableProps<T>) {\r\n  const state = useRef<DroppableState>({\r\n    dragOverElements: new Set<Element>(),\r\n    dropActivateTimer: undefined,\r\n  }).current;\r\n\r\n  const optionsRef = useRef(options);\r\n  optionsRef.current = options;\r\n\r\n  useLayoutEffect(() => {\r\n    droppables.set(id, {\r\n      ...droppables.get(id),\r\n      disabled,\r\n      id,\r\n      ref,\r\n    });\r\n    return () => {\r\n      droppables.delete(id);\r\n    };\r\n  }, [id, optionsRef, disabled, ref]);\r\n\r\n  // check if drop target accepts drag target\r\n  const canDrop = (draggable: MixedDraggable): boolean => {\r\n    const options = optionsRef.current;\r\n\r\n    const allowEventsOnSelf =\r\n      options.allowDragEventsFromItself ||\r\n      ref.current !== draggable.ref?.current;\r\n\r\n    return !!(\r\n      draggable?.type &&\r\n      allowEventsOnSelf &&\r\n      options.types.includes(draggable.type) &&\r\n      (!options.acceptsDrop || options.acceptsDrop(draggable))\r\n    );\r\n  };\r\n\r\n  const fireDragLeave = (e: React.DragEvent<HTMLElement>) => {\r\n    const draggable = getDraggable(e);\r\n    if (draggable) {\r\n      optionsRef.current.onDragLeave?.(draggable);\r\n    }\r\n  };\r\n\r\n  const onDragEnter = (e: React.DragEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n\r\n    state.dragOverElements.add(e.target as Element);\r\n    if (state.dragOverElements.size > 1) {\r\n      return;\r\n    }\r\n\r\n    const draggable = getDraggable(e);\r\n    if (draggable && canDrop(draggable)) {\r\n      optionsRef.current.onDragEnter?.(draggable);\r\n\r\n      clearTimeout(state.dropActivateTimer);\r\n      if (typeof optionsRef.current.onDropActivate === 'function') {\r\n        state.dropActivateTimer = setTimeout(() => {\r\n          if (draggable) {\r\n            optionsRef.current.onDropActivate?.(draggable);\r\n          }\r\n        }, DROP_ACTIVATE_TIMEOUT);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onDragLeave = (e: React.DragEvent<HTMLElement>) => {\r\n    e.stopPropagation();\r\n\r\n    // Track all the targets of dragenter events in a set, and remove them\r\n    // in dragleave. When the set becomes empty, we've left the drop target completely.\r\n    // We must also remove any elements that are no longer in the DOM, because dragleave\r\n    // events will never be fired for these. This can happen, for example, with drop\r\n    // indicators between items, which disappear when the drop target changes.\r\n    state.dragOverElements.delete(e.target as Element);\r\n    for (const element of state.dragOverElements) {\r\n      if (!e.currentTarget.contains(element)) {\r\n        state.dragOverElements.delete(element);\r\n      }\r\n    }\r\n\r\n    if (state.dragOverElements.size > 0) {\r\n      return;\r\n    }\r\n\r\n    const draggable = getDraggable(e);\r\n    if (draggable && canDrop(draggable)) {\r\n      fireDragLeave(e);\r\n      clearTimeout(state.dropActivateTimer);\r\n    }\r\n  };\r\n\r\n  const onDrop = async (e: React.DragEvent<HTMLElement>) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    state.dragOverElements.clear();\r\n\r\n    fireDragLeave(e);\r\n    clearTimeout(state.dropActivateTimer);\r\n\r\n    const draggable = getDraggable(e);\r\n    if (draggable) {\r\n      optionsRef.current.onDragLeave?.(draggable);\r\n\r\n      // drop target does not accept this type of droppable\r\n      if (!canDrop(draggable)) {\r\n        if (dragSession.status !== 'inactive') {\r\n          dragSession.status = 'dropFail';\r\n        }\r\n        // drop target accepts this type, but it might still reject the drop in callback\r\n      } else {\r\n        // allow callback to mark drop as failed\r\n        const dropResult = optionsRef.current.onDrop?.(draggable);\r\n\r\n        // drag session will only be active for draggables within the app, never for files dragged in from desktop\r\n        if (dragSession.status !== 'inactive') {\r\n          dragSession.status =\r\n            dropResult === false ? 'dropFail' : 'dropSuccess';\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const droppableProps = {\r\n    onDragOver: (e: React.DragEvent<HTMLElement>) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      const draggable = getDraggable(e);\r\n      if (draggable && canDrop(draggable)) {\r\n        optionsRef.current.onDragOver?.(draggable, e);\r\n      }\r\n    },\r\n    onDragEnter,\r\n    onDragLeave,\r\n    onDrop,\r\n  };\r\n\r\n  return {\r\n    droppableProps: disabled ? {} : droppableProps,\r\n  };\r\n}\r\n\r\nfunction getDraggable(\r\n  e: React.DragEvent<HTMLElement>\r\n): MixedDraggable | undefined {\r\n  if (dragSession.dragTargetId != null) {\r\n    return draggables.get(dragSession.dragTargetId);\r\n  } else if (e.dataTransfer.types.includes('Files')) {\r\n    return {\r\n      type: 'nativeFile',\r\n      el: null,\r\n      ref: null,\r\n      getData: () => {\r\n        return asyncIterableToArray(readFilesFromDataTransfer(e.dataTransfer));\r\n      },\r\n    };\r\n  }\r\n}\r\n","import {Permission} from './permission';\r\nimport {Subscription} from '../billing/subscription';\r\nimport {Role} from './role';\r\nimport {SocialProfile} from './social-profile';\r\nimport {AccessToken} from './access-token';\r\nimport type {ActiveSession} from '@common/auth/ui/account-settings/sessions-panel/requests/use-user-sessions';\r\n\r\nexport const USER_MODEL = 'user';\r\n\r\nexport interface User {\r\n  id: number;\r\n  display_name: string;\r\n  username?: string;\r\n  first_name?: string;\r\n  last_name?: string;\r\n  avatar?: string;\r\n  email_verified_at: string;\r\n  permissions?: Permission[];\r\n  email: string;\r\n  password: string;\r\n  language: string;\r\n  timezone: string;\r\n  country: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  subscriptions?: Omit<Subscription, 'user'>[];\r\n  roles: Role[];\r\n  social_profiles: SocialProfile[];\r\n  tokens?: AccessToken[];\r\n  has_password: boolean;\r\n  available_space: number | null;\r\n  unread_notifications_count?: number;\r\n  card_last_four?: number;\r\n  card_brand?: string;\r\n  card_expires?: string;\r\n  model_type: typeof USER_MODEL;\r\n  banned_at?: string;\r\n  followed_users?: Omit<User, 'followed_users' | 'followers'>[];\r\n  followers_count?: number;\r\n  followed_users_count?: number;\r\n  followers?: Omit<User, 'followed_users' | 'followers'>[];\r\n  last_login?: ActiveSession;\r\n  bans?: {\r\n    id: number;\r\n    comment: string;\r\n    expired_at?: string;\r\n  }[];\r\n  two_factor_confirmed_at?: string;\r\n  two_factor_recovery_codes?: string[];\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const LinkIcon = createSvgIcon(\r\n  <path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\" />\r\n, 'LinkOutlined');\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const MoreVertIcon = createSvgIcon(\r\n  <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\r\n, 'MoreVertOutlined');\r\n","function memo(getDeps, fn, opts) {\n  let deps = opts.initialDeps ?? [];\n  let result;\n  return () => {\n    var _a, _b, _c, _d;\n    let depTime;\n    if (opts.key && ((_a = opts.debug) == null ? void 0 : _a.call(opts)))\n      depTime = Date.now();\n    const newDeps = getDeps();\n    const depsChanged = newDeps.length !== deps.length || newDeps.some((dep, index) => deps[index] !== dep);\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    let resultTime;\n    if (opts.key && ((_b = opts.debug) == null ? void 0 : _b.call(opts)))\n      resultTime = Date.now();\n    result = fn(...newDeps);\n    if (opts.key && ((_c = opts.debug) == null ? void 0 : _c.call(opts))) {\n      const depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      const resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      const resultFpsPercentage = resultEndTime / 16;\n      const pad = (str, num) => {\n        str = String(str);\n        while (str.length < num) {\n          str = \" \" + str;\n        }\n        return str;\n      };\n      console.info(\n        `%c ${pad(resultEndTime, 5)} /${pad(depEndTime, 5)} ms`,\n        `\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(${Math.max(\n          0,\n          Math.min(120 - 120 * resultFpsPercentage, 120)\n        )}deg 100% 31%);`,\n        opts == null ? void 0 : opts.key\n      );\n    }\n    (_d = opts == null ? void 0 : opts.onChange) == null ? void 0 : _d.call(opts, result);\n    return result;\n  };\n}\nfunction notUndefined(value, msg) {\n  if (value === void 0) {\n    throw new Error(`Unexpected undefined${msg ? `: ${msg}` : \"\"}`);\n  } else {\n    return value;\n  }\n}\nconst approxEqual = (a, b) => Math.abs(a - b) < 1;\nconst debounce = (targetWindow, fn, ms) => {\n  let timeoutId;\n  return function(...args) {\n    targetWindow.clearTimeout(timeoutId);\n    timeoutId = targetWindow.setTimeout(() => fn.apply(this, args), ms);\n  };\n};\nexport {\n  approxEqual,\n  debounce,\n  memo,\n  notUndefined\n};\n//# sourceMappingURL=utils.js.map\n","import { debounce, memo, notUndefined, approxEqual } from \"./utils.js\";\nconst defaultKeyExtractor = (index) => index;\nconst defaultRangeExtractor = (range) => {\n  const start = Math.max(range.startIndex - range.overscan, 0);\n  const end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  const arr = [];\n  for (let i = start; i <= end; i++) {\n    arr.push(i);\n  }\n  return arr;\n};\nconst observeElementRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  const handler = (rect) => {\n    const { width, height } = rect;\n    cb({ width: Math.round(width), height: Math.round(height) });\n  };\n  handler(element.getBoundingClientRect());\n  if (!targetWindow.ResizeObserver) {\n    return () => {\n    };\n  }\n  const observer = new targetWindow.ResizeObserver((entries) => {\n    const entry = entries[0];\n    if (entry == null ? void 0 : entry.borderBoxSize) {\n      const box = entry.borderBoxSize[0];\n      if (box) {\n        handler({ width: box.inlineSize, height: box.blockSize });\n        return;\n      }\n    }\n    handler(element.getBoundingClientRect());\n  });\n  observer.observe(element, { box: \"border-box\" });\n  return () => {\n    observer.unobserve(element);\n  };\n};\nconst addEventListenerOptions = {\n  passive: true\n};\nconst observeWindowRect = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const handler = () => {\n    cb({ width: element.innerWidth, height: element.innerHeight });\n  };\n  handler();\n  element.addEventListener(\"resize\", handler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"resize\", handler);\n  };\n};\nconst supportsScrollend = typeof window == \"undefined\" ? true : \"onscrollend\" in window;\nconst observeElementOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    offset = element[instance.options.horizontal ? \"scrollLeft\" : \"scrollTop\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    element.removeEventListener(\"scrollend\", endHandler);\n  };\n};\nconst observeWindowOffset = (instance, cb) => {\n  const element = instance.scrollElement;\n  if (!element) {\n    return;\n  }\n  const targetWindow = instance.targetWindow;\n  if (!targetWindow) {\n    return;\n  }\n  let offset = 0;\n  const fallback = supportsScrollend ? () => void 0 : debounce(\n    targetWindow,\n    () => {\n      cb(offset, false);\n    },\n    instance.options.isScrollingResetDelay\n  );\n  const createHandler = (isScrolling) => () => {\n    offset = element[instance.options.horizontal ? \"scrollX\" : \"scrollY\"];\n    fallback();\n    cb(offset, isScrolling);\n  };\n  const handler = createHandler(true);\n  const endHandler = createHandler(false);\n  endHandler();\n  element.addEventListener(\"scroll\", handler, addEventListenerOptions);\n  element.addEventListener(\"scrollend\", endHandler, addEventListenerOptions);\n  return () => {\n    element.removeEventListener(\"scroll\", handler);\n    element.removeEventListener(\"scrollend\", endHandler);\n  };\n};\nconst measureElement = (element, entry, instance) => {\n  if (entry == null ? void 0 : entry.borderBoxSize) {\n    const box = entry.borderBoxSize[0];\n    if (box) {\n      const size = Math.round(\n        box[instance.options.horizontal ? \"inlineSize\" : \"blockSize\"]\n      );\n      return size;\n    }\n  }\n  return Math.round(\n    element.getBoundingClientRect()[instance.options.horizontal ? \"width\" : \"height\"]\n  );\n};\nconst windowScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nconst elementScroll = (offset, {\n  adjustments = 0,\n  behavior\n}, instance) => {\n  var _a, _b;\n  const toOffset = offset + adjustments;\n  (_b = (_a = instance.scrollElement) == null ? void 0 : _a.scrollTo) == null ? void 0 : _b.call(_a, {\n    [instance.options.horizontal ? \"left\" : \"top\"]: toOffset,\n    behavior\n  });\n};\nclass Virtualizer {\n  constructor(opts) {\n    this.unsubs = [];\n    this.scrollElement = null;\n    this.targetWindow = null;\n    this.isScrolling = false;\n    this.scrollToIndexTimeoutId = null;\n    this.measurementsCache = [];\n    this.itemSizeCache = /* @__PURE__ */ new Map();\n    this.pendingMeasuredCacheIndexes = [];\n    this.scrollDirection = null;\n    this.scrollAdjustments = 0;\n    this.measureElementCache = /* @__PURE__ */ new Map();\n    this.observer = /* @__PURE__ */ (() => {\n      let _ro = null;\n      const get = () => {\n        if (_ro) {\n          return _ro;\n        }\n        if (!this.targetWindow || !this.targetWindow.ResizeObserver) {\n          return null;\n        }\n        return _ro = new this.targetWindow.ResizeObserver((entries) => {\n          entries.forEach((entry) => {\n            this._measureElement(entry.target, entry);\n          });\n        });\n      };\n      return {\n        disconnect: () => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.disconnect();\n        },\n        observe: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.observe(target, { box: \"border-box\" });\n        },\n        unobserve: (target) => {\n          var _a;\n          return (_a = get()) == null ? void 0 : _a.unobserve(target);\n        }\n      };\n    })();\n    this.range = null;\n    this.setOptions = (opts2) => {\n      Object.entries(opts2).forEach(([key, value]) => {\n        if (typeof value === \"undefined\")\n          delete opts2[key];\n      });\n      this.options = {\n        debug: false,\n        initialOffset: 0,\n        overscan: 1,\n        paddingStart: 0,\n        paddingEnd: 0,\n        scrollPaddingStart: 0,\n        scrollPaddingEnd: 0,\n        horizontal: false,\n        getItemKey: defaultKeyExtractor,\n        rangeExtractor: defaultRangeExtractor,\n        onChange: () => {\n        },\n        measureElement,\n        initialRect: { width: 0, height: 0 },\n        scrollMargin: 0,\n        gap: 0,\n        indexAttribute: \"data-index\",\n        initialMeasurementsCache: [],\n        lanes: 1,\n        isScrollingResetDelay: 150,\n        ...opts2\n      };\n    };\n    this.notify = (force, sync) => {\n      var _a, _b;\n      const { startIndex, endIndex } = this.range ?? {\n        startIndex: void 0,\n        endIndex: void 0\n      };\n      const range = this.calculateRange();\n      if (force || startIndex !== (range == null ? void 0 : range.startIndex) || endIndex !== (range == null ? void 0 : range.endIndex)) {\n        (_b = (_a = this.options).onChange) == null ? void 0 : _b.call(_a, this, sync);\n      }\n    };\n    this.cleanup = () => {\n      this.unsubs.filter(Boolean).forEach((d) => d());\n      this.unsubs = [];\n      this.scrollElement = null;\n    };\n    this._didMount = () => {\n      this.measureElementCache.forEach(this.observer.observe);\n      return () => {\n        this.observer.disconnect();\n        this.cleanup();\n      };\n    };\n    this._willUpdate = () => {\n      var _a;\n      const scrollElement = this.options.getScrollElement();\n      if (this.scrollElement !== scrollElement) {\n        this.cleanup();\n        this.scrollElement = scrollElement;\n        if (this.scrollElement && \"ownerDocument\" in this.scrollElement) {\n          this.targetWindow = this.scrollElement.ownerDocument.defaultView;\n        } else {\n          this.targetWindow = ((_a = this.scrollElement) == null ? void 0 : _a.window) ?? null;\n        }\n        this._scrollToOffset(this.scrollOffset, {\n          adjustments: void 0,\n          behavior: void 0\n        });\n        this.unsubs.push(\n          this.options.observeElementRect(this, (rect) => {\n            this.scrollRect = rect;\n            this.notify(false, false);\n          })\n        );\n        this.unsubs.push(\n          this.options.observeElementOffset(this, (offset, isScrolling) => {\n            this.scrollAdjustments = 0;\n            this.scrollDirection = isScrolling ? this.scrollOffset < offset ? \"forward\" : \"backward\" : null;\n            this.scrollOffset = offset;\n            const prevIsScrolling = this.isScrolling;\n            this.isScrolling = isScrolling;\n            this.notify(prevIsScrolling !== isScrolling, isScrolling);\n          })\n        );\n      }\n    };\n    this.getSize = () => {\n      return this.scrollRect[this.options.horizontal ? \"width\" : \"height\"];\n    };\n    this.getMeasurementOptions = memo(\n      () => [\n        this.options.count,\n        this.options.paddingStart,\n        this.options.scrollMargin,\n        this.options.getItemKey\n      ],\n      (count, paddingStart, scrollMargin, getItemKey) => {\n        this.pendingMeasuredCacheIndexes = [];\n        return {\n          count,\n          paddingStart,\n          scrollMargin,\n          getItemKey\n        };\n      },\n      {\n        key: false\n      }\n    );\n    this.getFurthestMeasurement = (measurements, index) => {\n      const furthestMeasurementsFound = /* @__PURE__ */ new Map();\n      const furthestMeasurements = /* @__PURE__ */ new Map();\n      for (let m = index - 1; m >= 0; m--) {\n        const measurement = measurements[m];\n        if (furthestMeasurementsFound.has(measurement.lane)) {\n          continue;\n        }\n        const previousFurthestMeasurement = furthestMeasurements.get(\n          measurement.lane\n        );\n        if (previousFurthestMeasurement == null || measurement.end > previousFurthestMeasurement.end) {\n          furthestMeasurements.set(measurement.lane, measurement);\n        } else if (measurement.end < previousFurthestMeasurement.end) {\n          furthestMeasurementsFound.set(measurement.lane, true);\n        }\n        if (furthestMeasurementsFound.size === this.options.lanes) {\n          break;\n        }\n      }\n      return furthestMeasurements.size === this.options.lanes ? Array.from(furthestMeasurements.values()).sort((a, b) => {\n        if (a.end === b.end) {\n          return a.index - b.index;\n        }\n        return a.end - b.end;\n      })[0] : void 0;\n    };\n    this.getMeasurements = memo(\n      () => [this.getMeasurementOptions(), this.itemSizeCache],\n      ({ count, paddingStart, scrollMargin, getItemKey }, itemSizeCache) => {\n        const min = this.pendingMeasuredCacheIndexes.length > 0 ? Math.min(...this.pendingMeasuredCacheIndexes) : 0;\n        this.pendingMeasuredCacheIndexes = [];\n        const measurements = this.measurementsCache.slice(0, min);\n        for (let i = min; i < count; i++) {\n          const key = getItemKey(i);\n          const furthestMeasurement = this.options.lanes === 1 ? measurements[i - 1] : this.getFurthestMeasurement(measurements, i);\n          const start = furthestMeasurement ? furthestMeasurement.end + this.options.gap : paddingStart + scrollMargin;\n          const measuredSize = itemSizeCache.get(key);\n          const size = typeof measuredSize === \"number\" ? measuredSize : this.options.estimateSize(i);\n          const end = start + size;\n          const lane = furthestMeasurement ? furthestMeasurement.lane : i % this.options.lanes;\n          measurements[i] = {\n            index: i,\n            start,\n            size,\n            end,\n            key,\n            lane\n          };\n        }\n        this.measurementsCache = measurements;\n        return measurements;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getMeasurements\",\n        debug: () => this.options.debug\n      }\n    );\n    this.calculateRange = memo(\n      () => [this.getMeasurements(), this.getSize(), this.scrollOffset],\n      (measurements, outerSize, scrollOffset) => {\n        return this.range = measurements.length > 0 && outerSize > 0 ? calculateRange({\n          measurements,\n          outerSize,\n          scrollOffset\n        }) : null;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"calculateRange\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getIndexes = memo(\n      () => [\n        this.options.rangeExtractor,\n        this.calculateRange(),\n        this.options.overscan,\n        this.options.count\n      ],\n      (rangeExtractor, range, overscan, count) => {\n        return range === null ? [] : rangeExtractor({\n          startIndex: range.startIndex,\n          endIndex: range.endIndex,\n          overscan,\n          count\n        });\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.indexFromElement = (node) => {\n      const attributeName = this.options.indexAttribute;\n      const indexStr = node.getAttribute(attributeName);\n      if (!indexStr) {\n        console.warn(\n          `Missing attribute name '${attributeName}={index}' on measured element.`\n        );\n        return -1;\n      }\n      return parseInt(indexStr, 10);\n    };\n    this._measureElement = (node, entry) => {\n      const item = this.measurementsCache[this.indexFromElement(node)];\n      if (!item || !node.isConnected) {\n        this.measureElementCache.forEach((cached, key) => {\n          if (cached === node) {\n            this.observer.unobserve(node);\n            this.measureElementCache.delete(key);\n          }\n        });\n        return;\n      }\n      const prevNode = this.measureElementCache.get(item.key);\n      if (prevNode !== node) {\n        if (prevNode) {\n          this.observer.unobserve(prevNode);\n        }\n        this.observer.observe(node);\n        this.measureElementCache.set(item.key, node);\n      }\n      const measuredItemSize = this.options.measureElement(node, entry, this);\n      this.resizeItem(item, measuredItemSize);\n    };\n    this.resizeItem = (item, size) => {\n      const itemSize = this.itemSizeCache.get(item.key) ?? item.size;\n      const delta = size - itemSize;\n      if (delta !== 0) {\n        if (this.shouldAdjustScrollPositionOnItemSizeChange !== void 0 ? this.shouldAdjustScrollPositionOnItemSizeChange(item, delta, this) : item.start < this.scrollOffset + this.scrollAdjustments) {\n          if (process.env.NODE_ENV !== \"production\" && this.options.debug) {\n            console.info(\"correction\", delta);\n          }\n          this._scrollToOffset(this.scrollOffset, {\n            adjustments: this.scrollAdjustments += delta,\n            behavior: void 0\n          });\n        }\n        this.pendingMeasuredCacheIndexes.push(item.index);\n        this.itemSizeCache = new Map(this.itemSizeCache.set(item.key, size));\n        this.notify(true, false);\n      }\n    };\n    this.measureElement = (node) => {\n      if (!node) {\n        return;\n      }\n      this._measureElement(node, void 0);\n    };\n    this.getVirtualItems = memo(\n      () => [this.getIndexes(), this.getMeasurements()],\n      (indexes, measurements) => {\n        const virtualItems = [];\n        for (let k = 0, len = indexes.length; k < len; k++) {\n          const i = indexes[k];\n          const measurement = measurements[i];\n          virtualItems.push(measurement);\n        }\n        return virtualItems;\n      },\n      {\n        key: process.env.NODE_ENV !== \"production\" && \"getIndexes\",\n        debug: () => this.options.debug\n      }\n    );\n    this.getVirtualItemForOffset = (offset) => {\n      const measurements = this.getMeasurements();\n      return notUndefined(\n        measurements[findNearestBinarySearch(\n          0,\n          measurements.length - 1,\n          (index) => notUndefined(measurements[index]).start,\n          offset\n        )]\n      );\n    };\n    this.getOffsetForAlignment = (toOffset, align) => {\n      const size = this.getSize();\n      if (align === \"auto\") {\n        if (toOffset <= this.scrollOffset) {\n          align = \"start\";\n        } else if (toOffset >= this.scrollOffset + size) {\n          align = \"end\";\n        } else {\n          align = \"start\";\n        }\n      }\n      if (align === \"start\") {\n        toOffset = toOffset;\n      } else if (align === \"end\") {\n        toOffset = toOffset - size;\n      } else if (align === \"center\") {\n        toOffset = toOffset - size / 2;\n      }\n      const scrollSizeProp = this.options.horizontal ? \"scrollWidth\" : \"scrollHeight\";\n      const scrollSize = this.scrollElement ? \"document\" in this.scrollElement ? this.scrollElement.document.documentElement[scrollSizeProp] : this.scrollElement[scrollSizeProp] : 0;\n      const maxOffset = scrollSize - this.getSize();\n      return Math.max(Math.min(maxOffset, toOffset), 0);\n    };\n    this.getOffsetForIndex = (index, align = \"auto\") => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      const measurement = notUndefined(this.getMeasurements()[index]);\n      if (align === \"auto\") {\n        if (measurement.end >= this.scrollOffset + this.getSize() - this.options.scrollPaddingEnd) {\n          align = \"end\";\n        } else if (measurement.start <= this.scrollOffset + this.options.scrollPaddingStart) {\n          align = \"start\";\n        } else {\n          return [this.scrollOffset, align];\n        }\n      }\n      const toOffset = align === \"end\" ? measurement.end + this.options.scrollPaddingEnd : measurement.start - this.options.scrollPaddingStart;\n      return [this.getOffsetForAlignment(toOffset, align), align];\n    };\n    this.isDynamicMode = () => this.measureElementCache.size > 0;\n    this.cancelScrollToIndex = () => {\n      if (this.scrollToIndexTimeoutId !== null && this.targetWindow) {\n        this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId);\n        this.scrollToIndexTimeoutId = null;\n      }\n    };\n    this.scrollToOffset = (toOffset, { align = \"start\", behavior } = {}) => {\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.getOffsetForAlignment(toOffset, align), {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.scrollToIndex = (index, { align: initialAlign = \"auto\", behavior } = {}) => {\n      index = Math.max(0, Math.min(index, this.options.count - 1));\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      const [toOffset, align] = this.getOffsetForIndex(index, initialAlign);\n      this._scrollToOffset(toOffset, { adjustments: void 0, behavior });\n      if (behavior !== \"smooth\" && this.isDynamicMode() && this.targetWindow) {\n        this.scrollToIndexTimeoutId = this.targetWindow.setTimeout(() => {\n          this.scrollToIndexTimeoutId = null;\n          const elementInDOM = this.measureElementCache.has(\n            this.options.getItemKey(index)\n          );\n          if (elementInDOM) {\n            const [toOffset2] = this.getOffsetForIndex(index, align);\n            if (!approxEqual(toOffset2, this.scrollOffset)) {\n              this.scrollToIndex(index, { align, behavior });\n            }\n          } else {\n            this.scrollToIndex(index, { align, behavior });\n          }\n        });\n      }\n    };\n    this.scrollBy = (delta, { behavior } = {}) => {\n      this.cancelScrollToIndex();\n      if (behavior === \"smooth\" && this.isDynamicMode()) {\n        console.warn(\n          \"The `smooth` scroll behavior is not fully supported with dynamic size.\"\n        );\n      }\n      this._scrollToOffset(this.scrollOffset + delta, {\n        adjustments: void 0,\n        behavior\n      });\n    };\n    this.getTotalSize = () => {\n      var _a;\n      const measurements = this.getMeasurements();\n      let end;\n      if (measurements.length === 0) {\n        end = this.options.paddingStart;\n      } else {\n        end = this.options.lanes === 1 ? ((_a = measurements[measurements.length - 1]) == null ? void 0 : _a.end) ?? 0 : Math.max(\n          ...measurements.slice(-this.options.lanes).map((m) => m.end)\n        );\n      }\n      return end - this.options.scrollMargin + this.options.paddingEnd;\n    };\n    this._scrollToOffset = (offset, {\n      adjustments,\n      behavior\n    }) => {\n      this.options.scrollToFn(offset, { behavior, adjustments }, this);\n    };\n    this.measure = () => {\n      var _a, _b;\n      this.itemSizeCache = /* @__PURE__ */ new Map();\n      (_b = (_a = this.options).onChange) == null ? void 0 : _b.call(_a, this, false);\n    };\n    this.setOptions(opts);\n    this.scrollRect = this.options.initialRect;\n    this.scrollOffset = typeof this.options.initialOffset === \"function\" ? this.options.initialOffset() : this.options.initialOffset;\n    this.measurementsCache = this.options.initialMeasurementsCache;\n    this.measurementsCache.forEach((item) => {\n      this.itemSizeCache.set(item.key, item.size);\n    });\n    this.notify(false, false);\n  }\n}\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    const middle = (low + high) / 2 | 0;\n    const currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange({\n  measurements,\n  outerSize,\n  scrollOffset\n}) {\n  const count = measurements.length - 1;\n  const getOffset = (index) => measurements[index].start;\n  const startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  let endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return { startIndex, endIndex };\n}\nexport {\n  Virtualizer,\n  approxEqual,\n  debounce,\n  defaultKeyExtractor,\n  defaultRangeExtractor,\n  elementScroll,\n  measureElement,\n  memo,\n  notUndefined,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  windowScroll\n};\n//# sourceMappingURL=index.js.map\n","import * as React from \"react\";\nimport { flushSync } from \"react-dom\";\nimport { observeElementRect, observeElementOffset, elementScroll, observeWindowRect, observeWindowOffset, windowScroll, Virtualizer } from \"@tanstack/virtual-core\";\nexport * from \"@tanstack/virtual-core\";\nconst useIsomorphicLayoutEffect = typeof document !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nfunction useVirtualizerBase(options) {\n  const rerender = React.useReducer(() => ({}), {})[1];\n  const resolvedOptions = {\n    ...options,\n    onChange: (instance2, sync) => {\n      var _a;\n      if (sync) {\n        flushSync(rerender);\n      } else {\n        rerender();\n      }\n      (_a = options.onChange) == null ? void 0 : _a.call(options, instance2, sync);\n    }\n  };\n  const [instance] = React.useState(\n    () => new Virtualizer(resolvedOptions)\n  );\n  instance.setOptions(resolvedOptions);\n  React.useEffect(() => {\n    return instance._didMount();\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate();\n  });\n  return instance;\n}\nfunction useVirtualizer(options) {\n  return useVirtualizerBase({\n    observeElementRect,\n    observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options\n  });\n}\nfunction useWindowVirtualizer(options) {\n  return useVirtualizerBase({\n    getScrollElement: () => typeof document !== \"undefined\" ? window : null,\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    initialOffset: () => typeof document !== \"undefined\" ? window.scrollY : 0,\n    ...options\n  });\n}\nexport {\n  useVirtualizer,\n  useWindowVirtualizer\n};\n//# sourceMappingURL=index.js.map\n","import React, {useContext, useMemo} from 'react';\r\nimport {FileEntry} from '../file-entry';\r\nimport {useSettings} from '../../core/settings/use-settings';\r\nimport {isAbsoluteUrl} from '@common/utils/urls/is-absolute-url';\r\n\r\nexport const FileEntryUrlsContext = React.createContext<\r\n  Record<string, string | number | null | undefined>\r\n>(null!);\r\n\r\nexport function useFileEntryUrls(\r\n  entry?: FileEntry,\r\n  options?: {thumbnail?: boolean; downloadHashes?: string[]},\r\n): {previewUrl?: string; downloadUrl?: string} {\r\n  const {base_url} = useSettings();\r\n  const urlSearchParams = useContext(FileEntryUrlsContext);\r\n\r\n  return useMemo(() => {\r\n    if (!entry) {\r\n      return {};\r\n    }\r\n\r\n    let previewUrl: string | undefined;\r\n    if (entry.url) {\r\n      previewUrl = isAbsoluteUrl(entry.url)\r\n        ? entry.url\r\n        : `${base_url}/${entry.url}`;\r\n    }\r\n\r\n    const urls = {\r\n      previewUrl,\r\n      downloadUrl: `${base_url}/api/v1/file-entries/download/${\r\n        options?.downloadHashes || entry.hash\r\n      }`,\r\n    };\r\n\r\n    if (urlSearchParams) {\r\n      // preview url\r\n      if (urls.previewUrl) {\r\n        urls.previewUrl = addParams(\r\n          urls.previewUrl,\r\n          {...urlSearchParams, thumbnail: options?.thumbnail ? 'true' : ''},\r\n          base_url,\r\n        );\r\n      }\r\n\r\n      // download url\r\n      urls.downloadUrl = addParams(urls.downloadUrl, urlSearchParams, base_url);\r\n    }\r\n\r\n    return urls;\r\n  }, [\r\n    base_url,\r\n    entry,\r\n    options?.downloadHashes,\r\n    options?.thumbnail,\r\n    urlSearchParams,\r\n  ]);\r\n}\r\n\r\nfunction addParams(urlString: string, params: object, baseUrl: string): string {\r\n  const url = new URL(urlString, baseUrl);\r\n  Object.entries(params).forEach(([key, value]) => {\r\n    url.searchParams.append(key, value as string);\r\n  });\r\n  return url.toString();\r\n}\r\n","import React from 'react';\r\nimport {FileEntry} from '../file-entry';\r\n\r\nexport interface FilePreviewContextValue {\r\n  entries: FileEntry[];\r\n  activeIndex: number;\r\n}\r\n\r\nexport const FilePreviewContext = React.createContext<FilePreviewContextValue>(\r\n  null!\r\n);\r\n","import {ReactNode, useContext} from 'react';\r\nimport clsx from 'clsx';\r\nimport {Button} from '../../../ui/buttons/button';\r\nimport {downloadFileFromUrl} from '../../utils/download-file-from-url';\r\nimport {FilePreviewContext} from '../file-preview-context';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {FilePreviewProps} from './file-preview-props';\r\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\r\n\r\ninterface Props extends FilePreviewProps {\r\n  message?: ReactNode;\r\n}\r\nexport function DefaultFilePreview({message, className, allowDownload}: Props) {\r\n  const {entries, activeIndex} = useContext(FilePreviewContext);\r\n  const activeEntry = entries[activeIndex];\r\n  const content = message || <Trans message=\"No file preview available\" />;\r\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        className,\r\n        'shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded'\r\n      )}\r\n    >\r\n      <div className=\"text-lg\">{content}</div>\r\n      {allowDownload && (\r\n        <div className=\"block mt-20 text-center\">\r\n          <Button\r\n            variant=\"flat\"\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              if (downloadUrl) {\r\n                downloadFileFromUrl(downloadUrl);\r\n              }\r\n            }}\r\n          >\r\n            <Trans message=\"Download\" />\r\n          </Button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import clsx from 'clsx';\r\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\r\nimport {useTrans} from '../../../i18n/use-trans';\r\nimport {FilePreviewProps} from './file-preview-props';\r\nimport {DefaultFilePreview} from './default-file-preview';\r\n\r\nexport function ImageFilePreview(props: FilePreviewProps) {\r\n  const {entry, className} = props;\r\n  const {trans} = useTrans();\r\n  const {previewUrl} = useFileEntryUrls(entry);\r\n\r\n  if (!previewUrl) {\r\n    return <DefaultFilePreview {...props} />;\r\n  }\r\n\r\n  return (\r\n    <img\r\n      className={clsx(className, 'shadow')}\r\n      src={previewUrl}\r\n      alt={trans({\r\n        message: 'Preview for :name',\r\n        values: {name: entry.name},\r\n      })}\r\n    />\r\n  );\r\n}\r\n","import {useEffect, useState} from 'react';\r\nimport clsx from 'clsx';\r\nimport {FilePreviewProps} from './file-preview-props';\r\nimport {DefaultFilePreview} from './default-file-preview';\r\nimport {ProgressCircle} from '@common/ui/progress/progress-circle';\r\nimport {useFileEntryUrls} from '@common/uploads/hooks/file-entry-urls';\r\nimport {useTrans} from '@common/i18n/use-trans';\r\nimport {Trans} from '@common/i18n/trans';\r\nimport {apiClient} from '@common/http/query-client';\r\n\r\nconst FIVE_MB = 5242880;\r\n\r\nexport function TextFilePreview(props: FilePreviewProps) {\r\n  const {entry, className} = props;\r\n  const {trans} = useTrans();\r\n  const [tooLarge, setTooLarge] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isFailed, setIsFailed] = useState(false);\r\n  const [contents, setContents] = useState<string | null>(null);\r\n  const {previewUrl} = useFileEntryUrls(entry);\r\n\r\n  useEffect(() => {\r\n    if (!entry) return;\r\n    if (!previewUrl) {\r\n      setIsFailed(true);\r\n    } else if (entry.file_size! >= FIVE_MB) {\r\n      setTooLarge(true);\r\n      setIsLoading(false);\r\n    } else {\r\n      getFileContents(previewUrl)\r\n        .then(response => {\r\n          setContents(response.data);\r\n        })\r\n        .catch(() => {\r\n          setIsFailed(true);\r\n        })\r\n        .finally(() => {\r\n          setIsLoading(false);\r\n        });\r\n    }\r\n  }, [entry, previewUrl]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <ProgressCircle\r\n        isIndeterminate\r\n        aria-label={trans({message: 'Loading file contents'})}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (tooLarge) {\r\n    return (\r\n      <DefaultFilePreview\r\n        {...props}\r\n        message={<Trans message=\"This file is too large to preview.\" />}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (isFailed) {\r\n    return (\r\n      <DefaultFilePreview\r\n        {...props}\r\n        message={<Trans message=\"There was an issue previewing this file\" />}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <pre\r\n      className={clsx(\r\n        'rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full',\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"container mx-auto\">{`${contents}`}</div>\r\n    </pre>\r\n  );\r\n}\r\n\r\nfunction getFileContents(src: string) {\r\n  return apiClient.get(src, {\r\n    responseType: 'text',\r\n    // required for s3 presigned url to work\r\n    withCredentials: false,\r\n    headers: {\r\n      Accept: 'text/plain',\r\n    },\r\n  });\r\n}\r\n","import {useEffect, useRef, useState} from 'react';\r\nimport {FilePreviewProps} from './file-preview-props';\r\nimport {DefaultFilePreview} from './default-file-preview';\r\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\r\n\r\nexport function VideoFilePreview(props: FilePreviewProps) {\r\n  const {entry, className} = props;\r\n  const {previewUrl} = useFileEntryUrls(entry);\r\n  const ref = useRef<HTMLVideoElement>(null);\r\n  const [mediaInvalid, setMediaInvalid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\r\n  }, [entry]);\r\n\r\n  if (mediaInvalid || !previewUrl) {\r\n    return <DefaultFilePreview {...props} />;\r\n  }\r\n\r\n  return (\r\n    <video\r\n      className={className}\r\n      ref={ref}\r\n      controls\r\n      controlsList=\"nodownload noremoteplayback\"\r\n      playsInline\r\n      autoPlay\r\n    >\r\n      <source\r\n        src={previewUrl}\r\n        type={entry.mime}\r\n        onError={() => {\r\n          setMediaInvalid(true);\r\n        }}\r\n      />\r\n    </video>\r\n  );\r\n}\r\n","import {FilePreviewProps} from './file-preview-props';\r\nimport {DefaultFilePreview} from './default-file-preview';\r\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\r\nimport {useEffect, useRef, useState} from 'react';\r\n\r\nexport function AudioFilePreview(props: FilePreviewProps) {\r\n  const {entry, className} = props;\r\n  const {previewUrl} = useFileEntryUrls(entry);\r\n  const ref = useRef<HTMLAudioElement>(null);\r\n  const [mediaInvalid, setMediaInvalid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMediaInvalid(!ref.current?.canPlayType(entry.mime));\r\n  }, [entry]);\r\n\r\n  if (mediaInvalid || !previewUrl) {\r\n    return <DefaultFilePreview {...props} />;\r\n  }\r\n\r\n  return (\r\n    <audio\r\n      className={className}\r\n      ref={ref}\r\n      controls\r\n      controlsList=\"nodownload noremoteplayback\"\r\n      autoPlay\r\n    >\r\n      <source\r\n        src={previewUrl}\r\n        type={entry.mime}\r\n        onError={() => {\r\n          setMediaInvalid(true);\r\n        }}\r\n      />\r\n    </audio>\r\n  );\r\n}\r\n","import clsx from 'clsx';\r\nimport {FilePreviewProps} from './file-preview-props';\r\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\r\nimport {useTrans} from '../../../i18n/use-trans';\r\nimport {DefaultFilePreview} from './default-file-preview';\r\n\r\nexport function PdfFilePreview(props: FilePreviewProps) {\r\n  const {entry, className} = props;\r\n  const {trans} = useTrans();\r\n  const {previewUrl} = useFileEntryUrls(entry);\r\n\r\n  if (!previewUrl) {\r\n    return <DefaultFilePreview {...props} />;\r\n  }\r\n\r\n  return (\r\n    <iframe\r\n      title={trans({\r\n        message: 'Preview for :name',\r\n        values: {name: entry.name},\r\n      })}\r\n      className={clsx(className, 'w-full h-full')}\r\n      src={`${previewUrl}#toolbar=0`}\r\n    />\r\n  );\r\n}\r\n","import clsx from 'clsx';\r\nimport {useEffect, useRef, useState} from 'react';\r\nimport {FilePreviewProps} from './file-preview-props';\r\nimport {DefaultFilePreview} from './default-file-preview';\r\nimport {ProgressCircle} from '../../../ui/progress/progress-circle';\r\nimport {FileEntry} from '../../file-entry';\r\nimport {useFileEntryUrls} from '../../hooks/file-entry-urls';\r\nimport {useTrans} from '../../../i18n/use-trans';\r\nimport {apiClient} from '../../../http/query-client';\r\n\r\nexport function WordDocumentFilePreview(props: FilePreviewProps) {\r\n  const {entry, className} = props;\r\n  const {trans} = useTrans();\r\n  const ref = useRef<HTMLIFrameElement>(null);\r\n  const [showDefault, setShowDefault] = useState(false);\r\n  const timeoutId = useRef<any>();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const {previewUrl} = useFileEntryUrls(entry);\r\n\r\n  useEffect(() => {\r\n    // Google Docs viewer only supports files up to 25MB\r\n    if (!previewUrl) {\r\n      setShowDefault(true);\r\n    } else if (entry.file_size && entry.file_size > 25000000) {\r\n      setShowDefault(true);\r\n    } else if (ref.current) {\r\n      ref.current.onload = () => {\r\n        clearTimeout(timeoutId.current);\r\n        setIsLoading(false);\r\n      };\r\n\r\n      buildPreviewUrl(previewUrl, entry).then(url => {\r\n        if (ref.current) {\r\n          ref.current.src = url;\r\n        }\r\n      });\r\n\r\n      // if preview iframe is not loaded\r\n      // after 5 seconds, bail and show default preview\r\n      timeoutId.current = setTimeout(() => {\r\n        setShowDefault(true);\r\n      }, 5000);\r\n    }\r\n  }, [entry, previewUrl]);\r\n\r\n  if (showDefault) {\r\n    return <DefaultFilePreview {...props} />;\r\n  }\r\n\r\n  return (\r\n    <div className={clsx(className, 'w-full h-full')}>\r\n      {isLoading && <ProgressCircle />}\r\n      <iframe\r\n        ref={ref}\r\n        title={trans({\r\n          message: 'Preview for :name',\r\n          values: {name: entry.name},\r\n        })}\r\n        className={clsx('w-full h-full', isLoading && 'hidden')}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nasync function buildPreviewUrl(\r\n  urlString: string,\r\n  entry: FileEntry\r\n): Promise<string> {\r\n  const url = new URL(urlString);\r\n  // if we're not trying to preview shareable link we will need to generate\r\n  // preview token, otherwise it won't be publicly accessible\r\n  if (!url.searchParams.has('shareable_link')) {\r\n    const {data} = await apiClient.post(\r\n      `file-entries/${entry.id}/add-preview-token`\r\n    );\r\n    url.searchParams.append('preview_token', data.preview_token);\r\n  }\r\n\r\n  return buildOfficeLivePreviewUrl(url);\r\n}\r\n\r\nfunction buildOfficeLivePreviewUrl(url: URL) {\r\n  // https://docs.google.com/gview?embedded=true&url=\r\n  return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(\r\n    url.toString()\r\n  )}`;\r\n}\r\n","import {ImageFilePreview} from './file-preview/image-file-preview';\r\nimport {FileEntry} from '../file-entry';\r\nimport {DefaultFilePreview} from './file-preview/default-file-preview';\r\nimport {TextFilePreview} from './file-preview/text-file-preview';\r\nimport {VideoFilePreview} from './file-preview/video-file-preview';\r\nimport {AudioFilePreview} from './file-preview/audio-file-preview';\r\nimport {PdfFilePreview} from './file-preview/pdf-file-preview';\r\nimport {WordDocumentFilePreview} from './file-preview/word-document-file-preview';\r\n\r\nexport const AvailablePreviews = {\r\n  text: TextFilePreview,\r\n  video: VideoFilePreview,\r\n  audio: AudioFilePreview,\r\n  image: ImageFilePreview,\r\n  pdf: PdfFilePreview,\r\n  spreadsheet: WordDocumentFilePreview,\r\n  powerPoint: WordDocumentFilePreview,\r\n  word: WordDocumentFilePreview,\r\n  'text/rtf': DefaultFilePreview,\r\n} as const;\r\n\r\nexport function getPreviewForEntry(entry: FileEntry) {\r\n  const mime = entry?.mime as keyof typeof AvailablePreviews;\r\n  const type = entry?.type as keyof typeof AvailablePreviews;\r\n  return (\r\n    AvailablePreviews[mime] || AvailablePreviews[type] || DefaultFilePreview\r\n  );\r\n}\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const ChevronLeftIcon = createSvgIcon(\r\n  <path d=\"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z\" />\r\n, 'ChevronLeftOutlined');\r\n","import clsx from 'clsx';\r\nimport {FileTypeIcon} from './file-type-icon';\r\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\r\nimport {useTrans} from '../../i18n/use-trans';\r\nimport {FileEntry} from '../file-entry';\r\n\r\nconst TwoMB = 2 * 1024 * 1024;\r\n\r\ninterface Props {\r\n  file: FileEntry;\r\n  className?: string;\r\n  iconClassName?: string;\r\n  showImage?: boolean;\r\n}\r\nexport function FileThumbnail({\r\n  file,\r\n  className,\r\n  iconClassName,\r\n  showImage = true,\r\n}: Props) {\r\n  const {trans} = useTrans();\r\n  const {previewUrl} = useFileEntryUrls(file, {thumbnail: true});\r\n\r\n  // don't show images for files larger than 2MB, if thumbnail was not generated to avoid ui lag\r\n  if (file.file_size && file.file_size > TwoMB && !file.thumbnail) {\r\n    showImage = false;\r\n  }\r\n\r\n  if (showImage && file.type === 'image' && previewUrl) {\r\n    const alt = trans({\r\n      message: ':fileName thumbnail',\r\n      values: {fileName: file.name},\r\n    });\r\n    return (\r\n      <img\r\n        className={clsx(className, 'object-cover')}\r\n        src={previewUrl}\r\n        alt={alt}\r\n        draggable={false}\r\n      />\r\n    );\r\n  }\r\n  return <FileTypeIcon className={iconClassName} type={file.type} />;\r\n}\r\n","import {AnimatePresence, m} from 'framer-motion';\r\nimport {Fragment, ReactNode, useContext, useMemo} from 'react';\r\nimport clsx from 'clsx';\r\nimport {getPreviewForEntry} from './available-previews';\r\nimport {FileEntry} from '../file-entry';\r\nimport {FilePreviewContext} from './file-preview-context';\r\nimport {IconButton} from '../../ui/buttons/icon-button';\r\nimport {ChevronLeftIcon} from '../../icons/material/ChevronLeft';\r\nimport {ChevronRightIcon} from '../../icons/material/ChevronRight';\r\nimport {FileDownloadIcon} from '../../icons/material/FileDownload';\r\nimport {downloadFileFromUrl} from '../utils/download-file-from-url';\r\nimport {useFileEntryUrls} from '../hooks/file-entry-urls';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {Button} from '../../ui/buttons/button';\r\nimport {CloseIcon} from '../../icons/material/Close';\r\nimport {FileThumbnail} from '../file-type-icon/file-thumbnail';\r\nimport {useMediaQuery} from '../../utils/hooks/use-media-query';\r\nimport {KeyboardArrowLeftIcon} from '../../icons/material/KeyboardArrowLeft';\r\nimport {KeyboardArrowRightIcon} from '../../icons/material/KeyboardArrowRight';\r\nimport {useControlledState} from '@react-stately/utils';\r\nimport {opacityAnimation} from '../../ui/animation/opacity-animation';\r\n\r\nexport interface FilePreviewContainerProps {\r\n  entries: FileEntry[];\r\n  activeIndex?: number;\r\n  defaultActiveIndex?: number;\r\n  onActiveIndexChange?: (index: number) => void;\r\n  onClose?: () => void;\r\n  showHeader?: boolean;\r\n  headerActionsLeft?: ReactNode;\r\n  className?: string;\r\n  allowDownload?: boolean;\r\n}\r\nexport function FilePreviewContainer({\r\n  entries,\r\n  onClose,\r\n  showHeader = true,\r\n  className,\r\n  headerActionsLeft,\r\n  allowDownload = true,\r\n  ...props\r\n}: FilePreviewContainerProps) {\r\n  const isMobile = useMediaQuery('(max-width: 1024px)');\r\n\r\n  const [activeIndex, setActiveIndex] = useControlledState(\r\n    props.activeIndex,\r\n    props.defaultActiveIndex || 0,\r\n    props.onActiveIndexChange\r\n  );\r\n\r\n  const activeEntry = entries[activeIndex];\r\n  const contextValue = useMemo(() => {\r\n    return {entries, activeIndex};\r\n  }, [entries, activeIndex]);\r\n  const Preview = getPreviewForEntry(activeEntry);\r\n\r\n  if (!activeEntry) {\r\n    onClose?.();\r\n    return null;\r\n  }\r\n\r\n  const canOpenNext = entries.length - 1 > activeIndex;\r\n  const openNext = () => {\r\n    setActiveIndex(activeIndex + 1);\r\n  };\r\n  const canOpenPrevious = activeIndex > 0;\r\n  const openPrevious = () => {\r\n    setActiveIndex(activeIndex - 1);\r\n  };\r\n\r\n  return (\r\n    <FilePreviewContext.Provider value={contextValue}>\r\n      {showHeader && (\r\n        <Header\r\n          actionsLeft={headerActionsLeft}\r\n          isMobile={isMobile}\r\n          onClose={onClose}\r\n          onNext={canOpenNext ? openNext : undefined}\r\n          onPrevious={canOpenPrevious ? openPrevious : undefined}\r\n          allowDownload={allowDownload}\r\n        />\r\n      )}\r\n      <div className={clsx('overflow-hidden relative flex-auto', className)}>\r\n        {isMobile && (\r\n          <IconButton\r\n            size=\"lg\"\r\n            className=\"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10\"\r\n            disabled={!canOpenPrevious}\r\n            onClick={openPrevious}\r\n          >\r\n            <KeyboardArrowLeftIcon />\r\n          </IconButton>\r\n        )}\r\n        <AnimatePresence initial={false}>\r\n          <m.div\r\n            className=\"absolute inset-0 flex items-center justify-center\"\r\n            key={activeEntry.id}\r\n            {...opacityAnimation}\r\n          >\r\n            <Preview\r\n              className=\"max-h-[calc(100%-30px)]\"\r\n              entry={activeEntry}\r\n              allowDownload={allowDownload}\r\n            />\r\n          </m.div>\r\n        </AnimatePresence>\r\n        {isMobile && (\r\n          <IconButton\r\n            size=\"lg\"\r\n            className=\"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10\"\r\n            disabled={!canOpenNext}\r\n            onClick={openNext}\r\n          >\r\n            <KeyboardArrowRightIcon />\r\n          </IconButton>\r\n        )}\r\n      </div>\r\n    </FilePreviewContext.Provider>\r\n  );\r\n}\r\n\r\ninterface HeaderProps {\r\n  onNext?: () => void;\r\n  onPrevious?: () => void;\r\n  onClose?: () => void;\r\n  isMobile: boolean | null;\r\n  actionsLeft?: ReactNode;\r\n  allowDownload?: boolean;\r\n}\r\nfunction Header({\r\n  onNext,\r\n  onPrevious,\r\n  onClose,\r\n  isMobile,\r\n  actionsLeft,\r\n  allowDownload,\r\n}: HeaderProps) {\r\n  const {entries, activeIndex} = useContext(FilePreviewContext);\r\n  const activeEntry = entries[activeIndex];\r\n  const {downloadUrl} = useFileEntryUrls(activeEntry);\r\n\r\n  const desktopDownloadButton = (\r\n    <Button\r\n      startIcon={<FileDownloadIcon />}\r\n      variant=\"text\"\r\n      onClick={() => {\r\n        if (downloadUrl) {\r\n          downloadFileFromUrl(downloadUrl);\r\n        }\r\n      }}\r\n    >\r\n      <Trans message=\"Download\" />\r\n    </Button>\r\n  );\r\n\r\n  const mobileDownloadButton = (\r\n    <IconButton\r\n      onClick={() => {\r\n        if (downloadUrl) {\r\n          downloadFileFromUrl(downloadUrl);\r\n        }\r\n      }}\r\n    >\r\n      <FileDownloadIcon />\r\n    </IconButton>\r\n  );\r\n\r\n  const downloadButton = isMobile\r\n    ? mobileDownloadButton\r\n    : desktopDownloadButton;\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted\">\r\n      <div className=\"flex items-center gap-4 w-1/3 justify-start\">\r\n        {actionsLeft}\r\n        {allowDownload ? downloadButton : undefined}\r\n      </div>\r\n      <div className=\"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main\">\r\n        <FileThumbnail\r\n          file={activeEntry}\r\n          iconClassName=\"w-16 h-16\"\r\n          showImage={false}\r\n        />\r\n        <div className=\"whitespace-nowrap overflow-hidden overflow-ellipsis\">\r\n          {activeEntry.name}\r\n        </div>\r\n      </div>\r\n      <div className=\"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap\">\r\n        {!isMobile && (\r\n          <Fragment>\r\n            <IconButton disabled={!onPrevious} onClick={onPrevious}>\r\n              <ChevronLeftIcon />\r\n            </IconButton>\r\n            <div>{activeIndex + 1}</div>\r\n            <div>/</div>\r\n            <div>{entries.length}</div>\r\n            <IconButton disabled={!onNext} onClick={onNext}>\r\n              <ChevronRightIcon />\r\n            </IconButton>\r\n            <div className=\"bg-divider w-1 h-24 mx-20\" />\r\n          </Fragment>\r\n        )}\r\n        <IconButton radius=\"rounded-none\" onClick={onClose}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import {\r\n  FilePreviewContainer,\r\n  FilePreviewContainerProps,\r\n} from './file-preview-container';\r\nimport {useDialogContext} from '../../ui/overlays/dialog/dialog-context';\r\nimport {Dialog} from '../../ui/overlays/dialog/dialog';\r\n\r\ninterface Props extends Omit<FilePreviewContainerProps, 'onClose'> {}\r\nexport function FilePreviewDialog(props: Props) {\r\n  return (\r\n    <Dialog\r\n      size=\"fullscreenTakeover\"\r\n      background=\"bg-alt\"\r\n      className=\"flex flex-col\"\r\n    >\r\n      <Content {...props} />\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nfunction Content(props: Props) {\r\n  const {close} = useDialogContext();\r\n  return <FilePreviewContainer onClose={close} {...props} />;\r\n}\r\n","import {\r\n  BackendFilter,\r\n  FilterControlType,\r\n  FilterOperator,\r\n  FilterSelectControl,\r\n} from '../../datatable/filters/backend-filter';\r\nimport {message} from '../../i18n/message';\r\nimport {USER_MODEL} from '../../auth/user';\r\nimport {\r\n  createdAtFilter,\r\n  updatedAtFilter,\r\n} from '@common/datatable/filters/timestamp-filters';\r\n\r\nexport const FILE_ENTRY_TYPE_FILTER: BackendFilter<FilterSelectControl> = {\r\n  key: 'type',\r\n  label: message('Type'),\r\n  description: message('Type of the file'),\r\n  defaultOperator: FilterOperator.eq,\r\n  control: {\r\n    type: FilterControlType.Select,\r\n    defaultValue: '05',\r\n    options: [\r\n      {key: '02', label: message('Text'), value: 'text'},\r\n      {\r\n        key: '03',\r\n        label: message('Audio'),\r\n        value: 'audio',\r\n      },\r\n      {\r\n        key: '04',\r\n        label: message('Video'),\r\n        value: 'video',\r\n      },\r\n      {\r\n        key: '05',\r\n        label: message('Image'),\r\n        value: 'image',\r\n      },\r\n      {key: '06', label: message('PDF'), value: 'pdf'},\r\n      {\r\n        key: '07',\r\n        label: message('Spreadsheet'),\r\n        value: 'spreadsheet',\r\n      },\r\n      {\r\n        key: '08',\r\n        label: message('Word Document'),\r\n        value: 'word',\r\n      },\r\n      {\r\n        key: '09',\r\n        label: message('Photoshop'),\r\n        value: 'photoshop',\r\n      },\r\n      {\r\n        key: '10',\r\n        label: message('Archive'),\r\n        value: 'archive',\r\n      },\r\n      {\r\n        key: '11',\r\n        label: message('Folder'),\r\n        value: 'folder',\r\n      },\r\n    ],\r\n  },\r\n};\r\n\r\nexport const FILE_ENTRY_INDEX_FILTERS: BackendFilter[] = [\r\n  FILE_ENTRY_TYPE_FILTER,\r\n  {\r\n    key: 'public',\r\n    label: message('Visibility'),\r\n    description: message('Whether file is publicly accessible'),\r\n    defaultOperator: FilterOperator.eq,\r\n    control: {\r\n      type: FilterControlType.Select,\r\n      defaultValue: '01',\r\n      options: [\r\n        {key: '01', label: message('Private'), value: false},\r\n        {key: '02', label: message('Public'), value: true},\r\n      ],\r\n    },\r\n  },\r\n  createdAtFilter({\r\n    description: message('Date file was uploaded'),\r\n  }),\r\n  updatedAtFilter({\r\n    description: message('Date file was last changed'),\r\n  }),\r\n  {\r\n    key: 'owner_id',\r\n    label: message('Uploader'),\r\n    description: message('User that this file was uploaded by'),\r\n    defaultOperator: FilterOperator.eq,\r\n    control: {\r\n      type: FilterControlType.SelectModel,\r\n      model: USER_MODEL,\r\n    },\r\n  },\r\n];\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const ArrowBackIcon = createSvgIcon(\r\n  <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" />\r\n, 'ArrowBackOutlined');\r\n","import {createSvgIcon} from '../create-svg-icon';\r\n\r\nexport const InfoIcon = createSvgIcon(\r\n  <path d=\"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\r\n, 'InfoOutlined');\r\n"],"names":["$03deb23ff14920c4$export$4eaf04e54aa8eed6","globalListeners","$lPAwt$useRef","addGlobalListener","$lPAwt$useCallback","eventTarget","type","listener","options","fn","args","removeGlobalListener","_globalListeners_current_get","removeAllGlobalListeners","value","key","$lPAwt$useEffect","$e0b6e0b68ec7f50f$export$872b660ac5a1ff98","props","ref","onInteractOutside","isDisabled","onInteractOutsideStart","stateRef","$ispOf$useRef","onPointerDown","$ispOf$useEffectEvent","e","$e0b6e0b68ec7f50f$var$isValidEvent","triggerInteractOutside","$ispOf$useEffect","state","element","documentObject","$ispOf$getOwnerDocument","onPointerUp","onMouseUp","onTouchEnd","event","ownerDocument","$6c7bd7858deea686$var$CURRENCY_SIGN_REGEX","$6c7bd7858deea686$var$NUMBERING_SYSTEMS","$6c7bd7858deea686$export$cd11ab140839f11d","$6c7bd7858deea686$var$getNumberParserImpl","minValue","maxValue","locale","$6c7bd7858deea686$var$numberParserCache","defaultParser","$6c7bd7858deea686$var$getCachedNumberParser","numberingSystem","parser","cacheKey","a","b","$6c7bd7858deea686$var$NumberParserImpl","fullySanitizedValue","$6c7bd7858deea686$var$replaceAll","isNegative","index","newValue","_this_options_minimumFractionDigits","_this_options_maximumFractionDigits","$488c6ddbf4ef74c2$export$cc77c4ff7e8673c5","$6c7bd7858deea686$var$getSymbols","$6c7bd7858deea686$var$nonLiteralParts","$6c7bd7858deea686$var$pluralNumbers","formatter","intlOptions","originalOptions","_allParts_find","_posAllParts_find","_decimalParts_find","_allParts_find1","symbolFormatter","allParts","posAllParts","pluralParts","n","_allParts_find_value","minusSign","p","plusSign","decimal","group","allPartsLiterals","$6c7bd7858deea686$var$escapeRegex","pluralPartsLiterals","sortedLiterals","literals","numerals","indexes","d","i","numeral","str","find","replace","string","DashboardLayoutContext","createContext","useBlockBodyOverflow","disable","useEffect","DashboardLayout","children","leftSidenav","onLeftSidenavChange","rightSidenav","initialRightSidenavStatus","onRightSidenavChange","name","leftSidenavCanBeCompact","height","className","gridClassName","blockBodyOverflow","domProps","isMobile","useMediaQuery","defaultLeftSidenavStatus","useMemo","getFromLocalStorage","leftSidenavStatus","setLeftSidenavStatus","useControlledState","rightSidenavStatusDefault","userSelected","rightSidenavStatus","_setRightSidenavStatus","setRightSidenavStatus","useCallback","status","setInLocalStorage","shouldShowUnderlay","jsx","jsxs","clsx","AnimatePresence","Underlay","DashboardContent","isScrollable","cloneElement","DashboardSidenav","position","size","mode","overlayPosition","display","overflow","forceClosed","isMobileMode","useContext","isOverlayMode","variants","sizeClassName","getSize","m","target","MenuOpenIcon","createSvgIcon","DashboardNavbar","hideToggleButton","shouldToggleCompactMode","shouldShowToggle","handleToggle","handleCompactModeToggle","newStatus","Navbar","IconButton","FilterControlType","FilterOperator","startOfDay","date","endOfDay","getUserTimezone","defaultTimezone","_a","getBootstrapData","preferredTimezone","_c","_b","getLocalTimeZone","Now","now","DateRangePresets","message","startOfWeek","endOfWeek","start","startOfMonth","endOfMonth","startOfYear","endOfYear","DateRangeIcon","Input","React","inputProps","wrapperProps","autoFocus","style","onClick","FocusScope","DatePickerField","inputRef","onBlur","other","fieldClassNames","getInputFieldClassNames","objRef","useObjectRef","fieldProps","useField","Field","mergeProps","focusManager","createFocusManager","getDefaultGranularity","CalendarDate","dateIsInvalid","min","max","useBaseDatePickerState","selectedDate","timezone","useUserTimezone","calendarIsOpen","setCalendarIsOpen","useState","closeDialogOnSelection","granularity","toZoned","useCurrentDateTime","useDateRangePickerState","isPlaceholder","setIsPlaceholder","setStateValue","internalValue","setInternalValue","completeRange","clear","anchorDate","setAnchorDate","isHighlighting","setIsHighlighting","highlightedRange","setHighlightedRange","calendarDates","setCalendarDates","rangeToCalendarDates","constrainRange","range","end","maxDate","startMax","minDate","endMin","setSelectedValue","newRange","dayIsActive","day","isSameDay","dayIsHighlighted","dayIsRangeStart","dayIsRangeEnd","getCellProps","isSameMonth","makeRange","finalRange","toCalendarDate","ArrowRightAltIcon","adjustSegment","part","amount","hours","isPM","setSegment","segmentValue","wasPM","PAGE_STEP","EditableDateSegment","segment","onChange","useIsMobileMediaQuery","enteredKeys","useRef","localeCode","useSelectedLocale","useFocusManager","useDateFormatter","NumberParser","setSegmentValue","adjustSegmentValue","backspace","parsed","today","onKeyDown","onInput","amPmFormatter","am","amDate","pm","pmDate","numberValue","allowsZero","shouldSetValue","spinButtonProps","LiteralDateSegment","getSegmentLimits","getMinimumMonthInYear","getMinimumDayInMonth","DateSegmentList","segmentProps","memoOptions","dateValue","segments","limits","textValue","KeyboardArrowRightIcon","CalendarCell","currentMonth","dayOfWeek","getDayOfWeek","isActive","isHighlighted","isRangeStart","isRangeEnd","dayIsToday","isToday","sameMonth","CalendarMonth","startDate","isFirst","isLast","weeksInMonth","getWeeksInMonth","monthStart","CalendarMonthHeader","WeekdayHeader","weekIndex","dayIndex","shiftCalendars","direction","count","newDates","monthFormatter","isBackwardDisabled","isForwardDisabled","KeyboardArrowLeftIcon","dayFormatter","dateDay","weekday","Calendar","visibleMonths","Fragment","FormattedDateTimeRange","memo","preset","dates","useSettings","DateFormatPresets","castToDate","shallowEqual","parseAbsolute","DatePresetList","onPresetSelected","selectedValue","List","ListItem","Trans","useIsTabletMediaQuery","Switch","description","invalid","errorMessage","iconRight","useAutoFocus","getSizeClassName","descriptionId","useId","FormSwitch","error","useController","formProps","DateRangeComparePresets","diffInMinutes","DateRangeComparePresetList","originalRangeValue","DateRangeDialog","compareState","showInlineDatePickerField","compareVisibleDefault","isTablet","close","useDialogContext","initialStateRef","hasPlaceholder","compareVisible","setCompareVisible","footer","DialogFooter","Button","Dialog","DialogBody","Calendars","InlineDatePickerField","label","DateRangePicker","hideCalendarIcon","dialog","DialogTrigger","openOnClick","isHourSegment","FormDateRangePicker","dateRangeToAbsoluteRange","absoluteRangeToDateRange","dateRange","parseAbsoluteToLocal","absoluteRange","timestampFilter","createdAtFilter","updatedAtFilter","BackendFiltersUrlKey","decodeBackendFilters","encodedFilters","filtersFromQuery","filterValue","encodeBackendFilters","filterValues","filters","item","transformValue","fm","filterConfig","f","option","useBackendFilterUrlParams","pinnedFilters","searchParams","useSearchParams","navigate","useNavigate","decodedFilters","decoded","config","getDecodedWithoutKeys","values","newFilters","replaceAll","add","remove","isCtrlKeyPressed","isMac","useGridNavigation","cellCount","rowCount","focusSiblingCell","focusFirstElementAfterGrid","operations","grid","currentCell","row","rowIndex","cellIndex","rowOpCount","_d","cellOpCount","_e","_f","_g","nextCell","nextFocusableElement","getFocusableTreeWalker","walker","next","last","focusWithoutScrolling","TableContext","useTableCellStyle","isHeader","columns","cellHeight","headerCellHeight","column","userPadding","justify","TableCell","rowIsHovered","id","rowContext","usePointerEvents","onMoveStart","onMove","onMoveEnd","minimumMovement","preventDefault","stopPropagation","onPress","onLongPress","useGlobalListeners","onPointerMove","deltaX","deltaY","longPressTriggered","createEventHandler","isCtrlOrShiftPressed","useTableRowStyle","isSelected","isDarkMode","useIsDarkMode","hideBorder","enableSelection","collapseOnMobile","onAction","interactableElements","TableRow","renderAs","selectedRows","toggleRow","selectRow","selectRowOnContextMenu","selectionStyle","hideHeaderRow","isTouchDevice","isHovered","setIsHovered","clickedOnInteractable","doubleClickHandler","anyRowsSelected","handleRowTap","keyboardHandler","contextMenuHandler","styleClassName","RowElement","CheckboxColumnConfig","SelectAllCheckbox","Skeleton","SelectRowCheckbox","Checkbox","trans","useTrans","data","onSelectionChange","allRowsSelected","someRowsSelected","ArrowDownwardIcon","HeaderCell","sortDescriptor","onSortChange","enableSorting","sortingKey","allowSorting","orderBy","orderDir","sortActive","ariaSort","toggleSorting","newSort","sortVisible","sortVariants","TableHeaderRow","columnIndex","Table","userColumns","propsSelectedRows","propsDefaultSelectedRows","propsOnSelectionChange","propsSortDescriptor","propsOnSortChange","onDelete","ariaLabelledBy","renderRowAs","tableBody","meta","propsTableRef","closeOnInteractOutside","isCollapsedMode","newValues","merge","filteredColumns","c","visibleInMode","contextValue","navProps","tableBodyProps","BasicTableBody","tableRef","useInteractOutside","SelectFilterPanel","filter","FormSelect","Item","DateRangeFilterPanel","Avatar","forwardRef","circle","src","link","fallback","lazy","renderedAvatar","AvatarPlaceholderIcon","Tooltip","Link","useNormalizedModels","endpoint","queryParams","queryOptions","useQuery","fetchModels","keepPreviousData","params","apiClient","r","useNormalizedModel","fetchModel","NormalizedModelField","background","defaultValue","placeholder","searchPlaceholder","disabled","required","inputValue","setInputValue","query","SelectedModelPreview","Select","model","modelId","onEditClick","isLoading","LoadingSkeleton","opacityAnimation","EditIcon","FormNormalizedModelField","clearErrors","useFormContext","NormalizedModelFilterPanel","FilterOperatorNames","InputFilterPanel","control","operator","FormTextField","ChipList","color","radius","selectable","wrap","Children","chip","isValidElement","stringToChipValue","ChipFieldInner","fieldRef","displayWith","v","validateWith","suggestions","onInputValueChange","onItemSelected","onOpenChange","chipSize","openMenuOnFocus","showEmptyMessage","propsValue","propsOnChange","valueKey","isAsync","allowCustomValue","showDropdownArrow","onChipClick","inputFieldProps","useChipFieldValueState","listboxIsOpen","setListboxIsOpen","loadingIndicator","ProgressCircle","dropdownArrow","KeyboardArrowDownIcon","ListWrapper","ChipInput","items","setItems","displayChipUsing","manager","removeItem","cr","newItems","Chip","setChips","chips","addItems","listbox","useListbox","handleItemSelection","activeIndex","setActiveIndex","isOpen","setIsOpen","refs","listboxId","collection","onInputChange","useLayoutEffect","handleTriggerKeyDown","handleListboxKeyboardNavigation","useListboxKeyboardNavigation","handleFocusAndClick","Listbox","Popover","emails","selection","email","input","mixedValueToChipValue","propsDefaultValue","handleChange","ChipField","FormChipField","ChipFieldFilterPanel","o","FilterListTriggerButton","isInactive","InactiveFilterButton","ActiveFilterButton","isBoolean","FilterListItemDialogTrigger","onValueChange","FilterListControlDialog","panel","form","useForm","formId","DialogHeader","Form","formValue","FormattedNumber","useNumberFormatter","FilterListControl","DatePickerControl","BooleanToggleControl","SelectControl","ChipFieldControl","InputControl","SelectModelControl","Control","valueLabel","MultipleValues","maxShownCount","notShownCount","names","operatorLabel","formattedValue","skeleton","modelPreview","FilterList","field","handleValueChange","payload","CloseIcon","AddIcon","FileDownloadIcon","downloadFileFromUrl","url","useDatePickerState","DatePicker","showCalendarFooter","FormDatePicker","format","parsedValue","DeleteIcon","draggables","droppables","dragMonitors","dragSession","interactableEvent","rect","activeInteraction","setActiveInteraction","domRectToObj","updateRects","targets","observer","entries","entry","width","left","top","useDraggable","preview","hidePreview","dragHandleRef","optionsRef","notifyMonitors","callback","monitor","onDragStart","draggable","el","clickedOnHandle","hideNativeGhostImage","ie","node","onDragOver","newRect","emptyImage","readFilesFromDataTransfer","dataTransfer","file","getEntryFile","UploadedFile","getEntriesFromDirectory","reader","resolve","reject","asyncIterableToArray","iterator","DROP_ACTIVATE_TIMEOUT","useDroppable","canDrop","allowEventsOnSelf","fireDragLeave","getDraggable","dropResult","USER_MODEL","LinkIcon","MoreVertIcon","getDeps","opts","deps","result","depTime","newDeps","dep","resultTime","depEndTime","resultEndTime","resultFpsPercentage","pad","num","notUndefined","msg","approxEqual","debounce","targetWindow","ms","timeoutId","defaultKeyExtractor","defaultRangeExtractor","arr","observeElementRect","instance","cb","handler","box","addEventListenerOptions","supportsScrollend","observeElementOffset","offset","createHandler","isScrolling","endHandler","measureElement","elementScroll","adjustments","behavior","toOffset","Virtualizer","_ro","get","opts2","force","sync","startIndex","endIndex","scrollElement","prevIsScrolling","paddingStart","scrollMargin","getItemKey","measurements","furthestMeasurementsFound","furthestMeasurements","measurement","previousFurthestMeasurement","itemSizeCache","furthestMeasurement","measuredSize","lane","outerSize","scrollOffset","calculateRange","rangeExtractor","overscan","attributeName","indexStr","cached","prevNode","measuredItemSize","itemSize","delta","virtualItems","k","len","findNearestBinarySearch","align","scrollSizeProp","maxOffset","initialAlign","toOffset2","low","high","getCurrentValue","middle","currentValue","useIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","useVirtualizerBase","rerender","React.useReducer","resolvedOptions","instance2","flushSync","React.useState","useVirtualizer","FileEntryUrlsContext","useFileEntryUrls","base_url","urlSearchParams","previewUrl","isAbsoluteUrl","urls","addParams","urlString","baseUrl","FilePreviewContext","DefaultFilePreview","allowDownload","activeEntry","content","downloadUrl","ImageFilePreview","FIVE_MB","TextFilePreview","tooLarge","setTooLarge","setIsLoading","isFailed","setIsFailed","contents","setContents","getFileContents","response","VideoFilePreview","mediaInvalid","setMediaInvalid","AudioFilePreview","PdfFilePreview","WordDocumentFilePreview","showDefault","setShowDefault","buildPreviewUrl","buildOfficeLivePreviewUrl","AvailablePreviews","getPreviewForEntry","mime","ChevronLeftIcon","TwoMB","FileThumbnail","iconClassName","showImage","alt","FileTypeIcon","FilePreviewContainer","onClose","showHeader","headerActionsLeft","Preview","canOpenNext","openNext","canOpenPrevious","openPrevious","Header","onNext","onPrevious","actionsLeft","downloadButton","ChevronRightIcon","FilePreviewDialog","Content","FILE_ENTRY_TYPE_FILTER","FILE_ENTRY_INDEX_FILTERS","ArrowBackIcon","InfoIcon"],"mappings":"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","x_google_ignoreList":[0,1,2,99,100,101]}