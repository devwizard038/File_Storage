{"version":3,"file":"use-resume-subscription-32e75494.js","sources":["../../../common/resources/client/ui/forms/radio-group/radio.tsx","../../../common/resources/client/ui/forms/radio-group/radio-group.tsx","../../../common/resources/client/billing/billing-page/requests/use-cancel-subscription.ts","../../../common/resources/client/billing/billing-page/requests/use-resume-subscription.ts"],"sourcesContent":["import React, {ComponentPropsWithoutRef, forwardRef} from 'react';\nimport clsx from 'clsx';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {useController} from 'react-hook-form';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ntype RadioSize = 'xs' | 'sm' | 'md' | 'lg' | undefined;\n\nexport interface RadioProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: RadioSize;\n  value: string;\n  invalid?: boolean;\n  isFirst?: boolean;\n}\nexport const Radio = forwardRef<HTMLInputElement, RadioProps>((props, ref) => {\n  const {children, autoFocus, size, invalid, isFirst, ...domProps} = props;\n\n  const inputRef = useObjectRef(ref);\n  useAutoFocus({autoFocus}, inputRef);\n\n  const sizeClassNames = getSizeClassNames(size);\n\n  return (\n    <label\n      className={clsx(\n        'inline-flex gap-8 select-none items-center whitespace-nowrap align-middle',\n        sizeClassNames.label,\n        props.disabled && 'text-disabled pointer-events-none',\n        props.invalid && 'text-danger'\n      )}\n    >\n      <input\n        type=\"radio\"\n        className={clsx(\n          'focus-visible:ring outline-none',\n          'rounded-full transition-button border-2 appearance-none',\n          'border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark',\n          'before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark',\n          'before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200',\n          'checked:before:scale-[.65] checked:before:opacity-100',\n          sizeClassNames.circle\n        )}\n        ref={inputRef}\n        {...domProps}\n      />\n      {children && <span>{children}</span>}\n    </label>\n  );\n});\n\nexport function FormRadio(props: RadioProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid},\n  } = useController({\n    name: props.name!,\n  });\n\n  const formProps: Partial<RadioProps> = {\n    onChange,\n    onBlur,\n    checked: props.value === value,\n    invalid: props.invalid || invalid,\n  };\n\n  return <Radio ref={ref} {...mergeProps(formProps, props)} />;\n}\n\nfunction getSizeClassNames(size?: RadioSize): {\n  circle: string;\n  label: string;\n} {\n  switch (size) {\n    case 'xs':\n      return {circle: 'h-12 w-12', label: 'text-xs'};\n    case 'sm':\n      return {circle: 'h-16 w-16', label: 'text-sm'};\n    case 'lg':\n      return {circle: 'h-24 w-24', label: 'text-lg'};\n    default:\n      return {circle: 'h-20 w-20', label: 'text-base'};\n  }\n}\n","import {\n  Children,\n  cloneElement,\n  forwardRef,\n  isValidElement,\n  ReactNode,\n  useId,\n} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {Orientation} from '../orientation';\nimport {RadioProps} from './radio';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\n\nexport interface RadioGroupProps {\n  children: ReactNode;\n  orientation?: Orientation;\n  size?: 'xs' | 'sm' | 'md' | 'lg';\n  className?: string;\n  label?: ReactNode;\n  disabled?: boolean;\n  name?: string;\n  errorMessage?: ReactNode;\n  description?: ReactNode;\n  invalid?: boolean;\n  required?: boolean;\n}\nexport const RadioGroup = forwardRef<HTMLFieldSetElement, RadioGroupProps>(\n  (props, ref) => {\n    const style = getInputFieldClassNames(props);\n    const {\n      label,\n      children,\n      size,\n      className,\n      orientation = 'horizontal',\n      disabled,\n      required,\n      invalid,\n      errorMessage,\n      description,\n    } = props;\n\n    const labelProps = {};\n    const id = useId();\n    const name = props.name || id;\n\n    return (\n      <fieldset\n        aria-describedby={description ? `${id}-description` : undefined}\n        ref={ref}\n        className={clsx('text-left', className)}\n      >\n        {label && (\n          <legend className={style.label} {...labelProps}>\n            {label}\n          </legend>\n        )}\n        <div\n          className={clsx(\n            'flex',\n            label ? 'mt-6' : 'mt-0',\n            orientation === 'vertical' ? 'flex-col gap-10' : 'flex-row gap-16'\n          )}\n        >\n          {Children.map(children, child => {\n            if (isValidElement<RadioProps>(child)) {\n              return cloneElement<RadioProps>(child, {\n                name,\n                size,\n                invalid: child.props.invalid || invalid || undefined,\n                disabled: child.props.disabled || disabled,\n                required: child.props.required || required,\n              });\n            }\n          })}\n        </div>\n        {description && !errorMessage && (\n          <div className={style.description} id={`${id}-description`}>\n            {description}\n          </div>\n        )}\n        {errorMessage && <div className={style.error}>{errorMessage}</div>}\n      </fieldset>\n    );\n  }\n);\n\ninterface FormRadioGroupProps extends RadioGroupProps {\n  name: string;\n}\nexport function FormRadioGroup({children, ...props}: FormRadioGroupProps) {\n  const {\n    fieldState: {error},\n  } = useController({\n    name: props.name!,\n  });\n  return (\n    <RadioGroup errorMessage={error?.message} {...props}>\n      {children}\n    </RadioGroup>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '../../../http/query-client';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\nimport {toast} from '../../../ui/toast/toast';\nimport {message} from '../../../i18n/message';\nimport {User} from '../../../auth/user';\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  subscriptionId: number;\n  delete?: boolean;\n}\n\nexport function useCancelSubscription() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => cancelSubscription(props),\n    onSuccess: (response, payload) => {\n      toast(\n        payload.delete\n          ? trans(message('Subscription deleted.'))\n          : trans(message('Subscription cancelled.')),\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction cancelSubscription({\n  subscriptionId,\n  ...payload\n}: Payload): Promise<Response> {\n  return apiClient\n    .post(`billing/subscriptions/${subscriptionId}/cancel`, payload)\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '../../../http/query-client';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\nimport {toast} from '../../../ui/toast/toast';\nimport {message} from '../../../i18n/message';\nimport {User} from '../../../auth/user';\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  subscriptionId: number;\n}\n\nexport function useResumeSubscription() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => resumeSubscription(props),\n    onSuccess: () => {\n      toast(trans(message('Subscription renewed.')));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction resumeSubscription({subscriptionId}: Payload): Promise<Response> {\n  return apiClient\n    .post(`billing/subscriptions/${subscriptionId}/resume`)\n    .then(r => r.data);\n}\n"],"names":["Radio","forwardRef","props","ref","children","autoFocus","size","invalid","isFirst","domProps","inputRef","useObjectRef","useAutoFocus","sizeClassNames","getSizeClassNames","jsxs","clsx","jsx","FormRadio","onChange","onBlur","value","useController","formProps","mergeProps","RadioGroup","style","getInputFieldClassNames","label","className","orientation","disabled","required","errorMessage","description","labelProps","id","useId","name","Children","child","isValidElement","cloneElement","FormRadioGroup","error","useCancelSubscription","trans","useTrans","useMutation","cancelSubscription","response","payload","toast","message","err","showHttpErrorToast","subscriptionId","apiClient","useResumeSubscription","resumeSubscription","r"],"mappings":"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"}