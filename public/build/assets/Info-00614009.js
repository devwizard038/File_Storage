import{r as f,bW as ys,ae as ws,bP as et,bu as gt,$ as Z,s as Ft,j as a,c as E,A as je,bX as js,o as ue,h as H,bw as ks,g as W,aL as Xe,bU as Cs,bT as At,m as D,bY as Ee,bZ as Ds,b_ as xe,b$ as be,c0 as xt,c1 as bt,R as fe,i as Is,a7 as Re,aa as Te,aW as Ot,aX as Lt,a9 as ne,c2 as Ss,c3 as Ps,c4 as tt,c5 as le,c6 as Ve,c7 as _e,c8 as ge,c9 as ve,ca as Vt,e as ke,cb as Me,l as ze,cc as ce,cd as Es,ce as $s,cf as Ns,cg as Rs,ch as Ts,ci as Ms,K as _t,u as Ht,aS as zs,bN as Bt,cj as Fs,aj as Ut,ak as Kt,T as F,ck as As,ac as Ce,p as st,Y as nt,B as J,D as Fe,t as rt,x as at,cl as $e,bM as Os,aA as Ls,ba as Vs,aR as Wt,cm as _s,ab as ae,cn as Hs,J as ie,w as Gt,y as G,ao as qt,I as Ae,a3 as Bs,co as Us,a5 as Yt,a as Xt,k as Ks,b as Oe,ag as Ws,S as Gs,H as ot,_ as qs,a2 as Ys,cp as Xs,aQ as Qs,cq as Zs,cr as Js,az as it,bb as lt,cs as en,v as tn,q as sn,F as nn,f as rn,a1 as Qt,bC as Zt,ct as an,cu as on,b5 as ln}from"./main-830f9198.js";import{$ as vt,E as cn,C as un}from"./Edit-3a26609b.js";function Jt(){let e=f.useRef(new Map),s=f.useCallback((r,o,i,l)=>{let c=l!=null&&l.once?(...d)=>{e.current.delete(i),i(...d)}:i;e.current.set(i,{type:o,eventTarget:r,fn:c,options:l}),r.addEventListener(o,i,l)},[]),t=f.useCallback((r,o,i,l)=>{var c;let d=((c=e.current.get(i))===null||c===void 0?void 0:c.fn)||i;r.removeEventListener(o,d,l),e.current.delete(i)},[]),n=f.useCallback(()=>{e.current.forEach((r,o)=>{t(r.eventTarget,r.type,o,r.options)})},[t]);return f.useEffect(()=>n,[n]),{addGlobalListener:s,removeGlobalListener:t,removeAllGlobalListeners:n}}function dn(e){let{ref:s,onInteractOutside:t,isDisabled:n,onInteractOutsideStart:r}=e,o=f.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),i=vt(c=>{t&&Ie(c,s)&&(r&&r(c),o.current.isPointerDown=!0)}),l=vt(c=>{t&&t(c)});f.useEffect(()=>{let c=o.current;if(n)return;const d=s.current,u=ys(d);if(typeof PointerEvent<"u"){let p=h=>{c.isPointerDown&&Ie(h,s)&&l(h),c.isPointerDown=!1};return u.addEventListener("pointerdown",i,!0),u.addEventListener("pointerup",p,!0),()=>{u.removeEventListener("pointerdown",i,!0),u.removeEventListener("pointerup",p,!0)}}else{let p=m=>{c.ignoreEmulatedMouseEvents?c.ignoreEmulatedMouseEvents=!1:c.isPointerDown&&Ie(m,s)&&l(m),c.isPointerDown=!1},h=m=>{c.ignoreEmulatedMouseEvents=!0,c.isPointerDown&&Ie(m,s)&&l(m),c.isPointerDown=!1};return u.addEventListener("mousedown",i,!0),u.addEventListener("mouseup",p,!0),u.addEventListener("touchstart",i,!0),u.addEventListener("touchend",h,!0),()=>{u.removeEventListener("mousedown",i,!0),u.removeEventListener("mouseup",p,!0),u.removeEventListener("touchstart",i,!0),u.removeEventListener("touchend",h,!0)}}},[s,n,i,l])}function Ie(e,s){if(e.button>0)return!1;if(e.target){const t=e.target.ownerDocument;if(!t||!t.documentElement.contains(e.target)||e.target.closest("[data-react-aria-top-layer]"))return!1}return s.current&&!s.current.contains(e.target)}const fn=new RegExp("^.*\\(.*\\).*$"),hn=["latn","arab","hanidec"];class es{parse(s){return He(this.locale,this.options,s).parse(s)}isValidPartialNumber(s,t,n){return He(this.locale,this.options,s).isValidPartialNumber(s,t,n)}getNumberingSystem(s){return He(this.locale,this.options,s).options.numberingSystem}constructor(s,t={}){this.locale=s,this.options=t}}const yt=new Map;function He(e,s,t){let n=wt(e,s);if(!e.includes("-nu-")&&!n.isValidPartialNumber(t)){for(let r of hn)if(r!==n.options.numberingSystem){let o=wt(e+(e.includes("-u-")?"-nu-":"-u-nu-")+r,s);if(o.isValidPartialNumber(t))return o}}return n}function wt(e,s){let t=e+(s?Object.entries(s).sort((r,o)=>r[0]<o[0]?-1:1).join():""),n=yt.get(t);return n||(n=new mn(e,s),yt.set(t,n)),n}class mn{parse(s){let t=this.sanitize(s);if(this.symbols.group&&(t=Se(t,this.symbols.group,"")),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(t=t.replace(this.symbols.minusSign,"-")),t=t.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let i=t.indexOf("-");t=t.replace("-","");let l=t.indexOf(".");l===-1&&(l=t.length),t=t.replace(".",""),l-2===0?t=`0.${t}`:l-2===-1?t=`0.0${t}`:l-2===-2?t="0.00":t=`${t.slice(0,l-2)}.${t.slice(l-2)}`,i>-1&&(t=`-${t}`)}let n=t?+t:NaN;if(isNaN(n))return NaN;if(this.options.style==="percent"){var r,o;let i={...this.options,style:"decimal",minimumFractionDigits:Math.min(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)+2,20),maximumFractionDigits:Math.min(((o=this.options.maximumFractionDigits)!==null&&o!==void 0?o:0)+2,20)};return new es(this.locale,i).parse(new ws(this.locale,i).format(n))}return this.options.currencySign==="accounting"&&fn.test(s)&&(n=-1*n),n}sanitize(s){return s=s.replace(this.symbols.literals,""),this.symbols.minusSign&&(s=s.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(s=s.replace(",",this.symbols.decimal),s=s.replace(String.fromCharCode(1548),this.symbols.decimal)),this.symbols.group&&(s=Se(s,".",this.symbols.group))),this.options.locale==="fr-FR"&&(s=Se(s,".",String.fromCharCode(8239))),s}isValidPartialNumber(s,t=-1/0,n=1/0){return s=this.sanitize(s),this.symbols.minusSign&&s.startsWith(this.symbols.minusSign)&&t<0?s=s.slice(this.symbols.minusSign.length):this.symbols.plusSign&&s.startsWith(this.symbols.plusSign)&&n>0&&(s=s.slice(this.symbols.plusSign.length)),this.symbols.group&&s.startsWith(this.symbols.group)||this.symbols.decimal&&s.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(s=Se(s,this.symbols.group,"")),s=s.replace(this.symbols.numeral,""),this.symbols.decimal&&(s=s.replace(this.symbols.decimal,"")),s.length===0)}constructor(s,t={}){this.locale=s,this.formatter=new Intl.NumberFormat(s,t),this.options=this.formatter.resolvedOptions(),this.symbols=gn(s,this.formatter,this.options,t);var n,r;this.options.style==="percent"&&(((n=this.options.minimumFractionDigits)!==null&&n!==void 0?n:0)>18||((r=this.options.maximumFractionDigits)!==null&&r!==void 0?r:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const jt=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),pn=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function gn(e,s,t,n){var r,o,i,l;let c=new Intl.NumberFormat(e,{...t,minimumSignificantDigits:1,maximumSignificantDigits:21}),d=c.formatToParts(-10000.111),u=c.formatToParts(10000.111),p=pn.map(S=>c.formatToParts(S));var h;let m=(h=(r=d.find(S=>S.type==="minusSign"))===null||r===void 0?void 0:r.value)!==null&&h!==void 0?h:"-",g=(o=u.find(S=>S.type==="plusSign"))===null||o===void 0?void 0:o.value;!g&&((n==null?void 0:n.signDisplay)==="exceptZero"||(n==null?void 0:n.signDisplay)==="always")&&(g="+");let b=(i=new Intl.NumberFormat(e,{...t,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(S=>S.type==="decimal"))===null||i===void 0?void 0:i.value,x=(l=d.find(S=>S.type==="group"))===null||l===void 0?void 0:l.value,y=d.filter(S=>!jt.has(S.type)).map(S=>kt(S.value)),k=p.flatMap(S=>S.filter(I=>!jt.has(I.type)).map(I=>kt(I.value))),C=[...new Set([...y,...k])].sort((S,I)=>I.length-S.length),N=C.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${C.join("|")}|[\\p{White_Space}]`,"gu"),M=[...new Intl.NumberFormat(t.locale,{useGrouping:!1}).format(9876543210)].reverse(),v=new Map(M.map((S,I)=>[S,I])),P=new RegExp(`[${M.join("")}]`,"g");return{minusSign:m,plusSign:g,decimal:b,group:x,literals:N,numeral:P,index:S=>String(v.get(S))}}function Se(e,s,t){return e.replaceAll?e.replaceAll(s,t):e.split(s).join(t)}function kt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const ct=f.createContext(null);function xn(e=!1){f.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function Ra({children:e,leftSidenavStatus:s,onLeftSidenavChange:t,rightSidenavStatus:n,initialRightSidenavStatus:r,onRightSidenavChange:o,name:i,leftSidenavCanBeCompact:l,height:c="h-screen",className:d,gridClassName:u="dashboard-grid",blockBodyOverflow:p=!0,...h}){xn(!p);const m=et("(max-width: 1024px)"),w=f.useMemo(()=>i?gt(`${i}.sidenav.compact`):!1,[i])?"compact":"open",[b,x]=Z(s,m?"closed":w,t),y=f.useMemo(()=>{if(m)return"closed";if(r!=null)return r;const v=gt(`${i}.sidenav.right.position`,"open");return v??(r||"closed")},[m,i,r]),[k,C]=Z(n,y,o),N=f.useCallback(v=>{C(v),Ft(`${i}.sidenav.right.position`,v)},[C,i]),M=m&&(b==="open"||k==="open");return a.jsx(ct.Provider,{value:{leftSidenavStatus:b,setLeftSidenavStatus:x,rightSidenavStatus:k,setRightSidenavStatus:N,leftSidenavCanBeCompact:l,name:i,isMobileMode:m},children:a.jsxs("div",{...h,className:E("relative isolate",u,d,c),children:[e,a.jsx(je,{children:M&&a.jsx(js,{position:"fixed",onClick:()=>{x("closed"),N("closed")}},"dashboard-underlay")})]})})}function Ta({children:e,isScrollable:s=!0}){return f.cloneElement(e,{className:E(e.props.className,s&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function Ma({className:e,position:s,children:t,size:n="md",mode:r,overlayPosition:o="fixed",display:i="flex",overflow:l="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:d,leftSidenavStatus:u,setLeftSidenavStatus:p,rightSidenavStatus:h,setRightSidenavStatus:m}=f.useContext(ct),g=s==="left"?u:h,w=d||r==="overlay",b={open:{display:i,width:null},compact:{display:i,width:null},closed:{width:0,transitionEnd:{display:"none"}}},x=bn(g==="compact"?"compact":n);return a.jsx(ue.div,{variants:b,initial:!1,animate:c?"closed":g,transition:{type:"tween",duration:.15},onClick:y=>{const k=y.target;d&&(k.closest("button")||k.closest("a"))&&(p("closed"),m("closed"))},className:E(e,s==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",l,x,w&&`${o} bottom-0 top-0 z-20 shadow-2xl`,w&&s==="left"&&"left-0",w&&s==="right"&&"right-0"),children:f.cloneElement(t,{className:E(t.props.className,"w-full h-full",g==="compact"&&"compact-scrollbar"),isCompactMode:g==="compact"})})}function bn(e){switch(e){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}const vn=H(a.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function za({children:e,className:s,hideToggleButton:t,...n}){const{isMobileMode:r,leftSidenavStatus:o,setLeftSidenavStatus:i,name:l,leftSidenavCanBeCompact:c}=f.useContext(ct),d=c&&!r,u=!t&&(r||c),p=()=>{i(o==="open"?"closed":"open")},h=()=>{const m=o==="compact"?"open":"compact";Ft(`${l}.sidenav.compact`,m==="compact"),i(m)};return a.jsx(ks,{className:E("dashboard-grid-navbar",s),border:"border-b",size:"sm",toggleButton:u?a.jsx(W,{size:"md",onClick:()=>{d?h():p()},children:a.jsx(vn,{})}):void 0,...n,children:e})}var _=(e=>(e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e))(_||{}),ye=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e))(ye||{});function ts(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function U(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function yn(){var t,n,r;const e=(t=Xe())==null?void 0:t.settings.dates.default_timezone,s=((r=(n=Xe())==null?void 0:n.user)==null?void 0:r.timezone)||e||"auto";return!s||s==="auto"?Cs():s}const O=ts(At(yn()));var Mt,zt;const Be=((zt=(Mt=Xe())==null?void 0:Mt.i18n)==null?void 0:zt.language)||"en",ut=[{key:0,label:D("Today"),getRangeValue:()=>({preset:0,start:O,end:U(O)})},{key:1,label:D("Yesterday"),getRangeValue:()=>({preset:1,start:O.subtract({days:1}),end:U(O).subtract({days:1})})},{key:2,label:D("This week"),getRangeValue:()=>({preset:2,start:Ee(O,Be),end:Ds(U(O),Be)})},{key:3,label:D("Last week"),getRangeValue:()=>{const e=Ee(O,Be).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:D("Last 7 days"),getRangeValue:()=>({preset:4,start:O.subtract({days:7}),end:U(O)})},{key:6,label:D("Last 30 days"),getRangeValue:()=>({preset:6,start:O.subtract({days:30}),end:U(O)})},{key:7,label:D("Last 3 months"),getRangeValue:()=>({preset:7,start:O.subtract({months:3}),end:U(O)})},{key:8,label:D("Last 12 months"),getRangeValue:()=>({preset:8,start:O.subtract({months:12}),end:U(O)})},{key:9,label:D("This month"),getRangeValue:()=>({preset:9,start:xe(O),end:be(U(O))})},{key:10,label:D("This year"),getRangeValue:()=>({preset:10,start:xt(O),end:bt(U(O))})},{key:11,label:D("Last year"),getRangeValue:()=>({preset:11,start:xt(O).subtract({years:1}),end:bt(U(O)).subtract({years:1})})}],ss=H(a.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),ns=fe.forwardRef((e,s)=>{const{children:t,inputProps:n,wrapperProps:r,className:o,autoFocus:i,style:l,onClick:c}=e;return a.jsx("div",{...r,onClick:c,children:a.jsx("div",{...n,role:"group",className:E(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:s,style:l,children:a.jsx(Is,{autoFocus:i,children:t})})})}),dt=fe.forwardRef(({inputRef:e,wrapperProps:s,children:t,onBlur:n,...r},o)=>{const i=Re(r),l=Te(o),{fieldProps:c,inputProps:d}=Ot({...r,focusRef:l,labelElementType:"span"});return i.wrapper=E(i.wrapper,r.disabled&&"pointer-events-none"),a.jsx(Lt,{wrapperProps:ne(s,{onBlur:u=>{var p;(p=l.current)!=null&&p.contains(u.relatedTarget)||n==null||n(u)},onClick:()=>{const u=Ss(l);u==null||u.focusFirst()}}),fieldClassNames:i,ref:l,...c,children:a.jsx(ns,{inputProps:d,className:E(i.input,"gap-10"),ref:e,children:t})})});function wn(e){return e instanceof Ps?"day":"minute"}function Qe(e,s,t){return s!=null&&e.compare(s)<0||t!=null&&e.compare(t)>0}function rs(e,s){const t=tt(),[n,r]=f.useState(!1),o=s.closeDialogOnSelection??!0,i=s.granularity||wn(e),l=s.min?le(s.min,t):void 0,c=s.max?le(s.max,t):void 0;return{timezone:t,granularity:i,min:l,max:c,calendarIsOpen:n,setCalendarIsOpen:r,closeDialogOnSelection:o}}function ft(){const e=tt();return f.useMemo(()=>At(e),[e])}function jn(e){var se,X;const s=ft(),[t,n]=f.useState({start:(!e.value||!e.value.start)&&!((se=e.defaultValue)!=null&&se.start),end:(!e.value||!e.value.end)&&!((X=e.defaultValue)!=null&&X.end)}),r=e.onChange,[o,i]=Z(e.value?Ke(e.value,s):void 0,e.value?void 0:Ke(e.defaultValue,s),j=>{n({start:!1,end:!1}),r==null||r(j)}),{min:l,max:c,granularity:d,timezone:u,calendarIsOpen:p,setCalendarIsOpen:h,closeDialogOnSelection:m}=rs(o.start,e),g=f.useCallback(()=>{n({start:!0,end:!0}),i(Ke(null,s)),r==null||r(null),h(!1)},[s,i,r,h]),[w,b]=f.useState(null),[x,y]=f.useState(!1),[k,C]=f.useState(o),[N,M]=f.useState(()=>Ct(o,c)),v=f.useCallback(j=>{let $=j.start,z=j.end;l&&($=Ve($,l));const V=c?_e(c,z):z;$=_e($,V);const re=l?Ve(l,$):$;return z=Ve(z,re),c&&(z=_e(z,c)),{start:le($,u),end:le(z,u)}},[l,c,u]),P=f.useCallback(j=>{const $={...v(j),preset:j.preset};i($),C($),M(Ct($,c)),n({start:!1,end:!1})},[i,v,c]),R=f.useCallback(j=>!t.start&&ge(j,k.start)||!t.end&&ge(j,k.end),[k,t]),S=f.useCallback(j=>(x||!t.start&&!t.end)&&j.compare(k.start)>=0&&j.compare(k.end)<=0,[k,t,x]),I=f.useCallback(j=>ge(j,k.start),[k]),T=f.useCallback(j=>ge(j,k.end),[k]),L=f.useCallback((j,$)=>({onPointerEnter:()=>{x&&$&&C(Ue({start:w,end:j,timezone:u}))},onClick:()=>{if(!x)y(!0),b(j),C(Ue({start:j,end:j,timezone:u}));else{const z=Ue({start:w,end:j,timezone:u});z.start=ts(z.start),z.end=U(z.end),y(!1),b(null),P==null||P(z),m&&(h==null||h(!1))}}}),[w,x,P,h,m,u]);return{selectedValue:o,setSelectedValue:P,calendarIsOpen:p,setCalendarIsOpen:h,dayIsActive:R,dayIsHighlighted:S,dayIsRangeStart:I,dayIsRangeEnd:T,getCellProps:L,calendarDates:N,setIsPlaceholder:n,isPlaceholder:t,clear:g,setCalendarDates:M,min:l,max:c,granularity:d,timezone:u,closeDialogOnSelection:m}}function Ct(e,s){let t=ve(xe(e.start)),n=ve(be(e.end));return Vt(t,n)&&(n=be(n.add({months:1}))),s&&n.compare(s)>0&&(n=t,t=xe(t.subtract({months:1}))),[t,n]}function Ue(e){const s=le(e.start,e.timezone),t=le(e.end,e.timezone);return s.compare(t)>0?{start:t,end:s}:{start:s,end:t}}function Ke(e,s){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:s,end:s.add({months:1})}}const as=H(a.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function kn(e,s,t,n){switch(s){case"era":case"year":case"month":case"day":return e.cycle(s,t,{round:s==="year"})}if("hour"in e)switch(s){case"dayPeriod":{const r=e.hour,o=r>=12;return e.set({hour:o?r-12:r+12})}case"hour":case"minute":case"second":return e.cycle(s,t,{round:s!=="hour",hourCycle:n.hour12?12:24})}return e}function Cn(e,s,t,n){switch(s){case"day":case"month":case"year":return e.set({[s]:t})}if("hour"in e)switch(s){case"dayPeriod":{const r=e.hour,o=r>=12;return t>=12===o?e:e.set({hour:o?r-12:r+12})}case"hour":if(n.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[s]:t})}return e}const Dt={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function Dn({segment:e,domProps:s,value:t,onChange:n,isPlaceholder:r,state:{timezone:o,calendarIsOpen:i,setCalendarIsOpen:l}}){const c=ke(),d=f.useRef(""),{localeCode:u}=Me(),p=ze(),h=ce({timeZone:o}),m=f.useMemo(()=>new es(u,{maximumFractionDigits:0}),[u]),g=v=>{n(Cn(t,e.type,v,h.resolvedOptions()))},w=v=>{n(kn(t,e.type,v,h.resolvedOptions()))},b=()=>{if(m.isValidPartialNumber(e.text)){const v=e.text.slice(0,-1),P=m.parse(v);if(v.length===0||P===0){const R=Es(o);e.type in R&&g(R[e.type])}else g(P);d.current=v}else e.type==="dayPeriod"&&w(-1)},x=v=>{var P;if(!(v.ctrlKey||v.metaKey||v.shiftKey||v.altKey)){switch(v.key){case"ArrowLeft":v.preventDefault(),v.stopPropagation(),p==null||p.focusPrevious();break;case"ArrowRight":v.preventDefault(),v.stopPropagation(),p==null||p.focusNext();break;case"Enter":(P=v.target.closest("form"))==null||P.requestSubmit(),l(!i);break;case"Tab":break;case"Backspace":case"Delete":{v.preventDefault(),v.stopPropagation(),b();break}case"ArrowUp":v.preventDefault(),d.current="",w(1);break;case"ArrowDown":v.preventDefault(),d.current="",w(-1);break;case"PageUp":v.preventDefault(),d.current="",w(Dt[e.type]||1);break;case"PageDown":v.preventDefault(),d.current="",w(-(Dt[e.type]||1));break;case"Home":v.preventDefault(),d.current="",g(e.maxValue);break;case"End":v.preventDefault(),d.current="",g(e.minValue);break}N(v.key)}},y=ce({hour:"numeric",hour12:!0}),k=f.useMemo(()=>{const v=new Date;return v.setHours(0),y.formatToParts(v).find(P=>P.type==="dayPeriod").value},[y]),C=f.useMemo(()=>{const v=new Date;return v.setHours(12),y.formatToParts(v).find(P=>P.type==="dayPeriod").value},[y]),N=v=>{const P=d.current+v;switch(e.type){case"dayPeriod":if(k.toLowerCase().startsWith(v))g(0);else if(C.toLowerCase().startsWith(v))g(12);else break;p==null||p.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!m.isValidPartialNumber(P))return;let R=m.parse(P),S=R,I=e.minValue===0;if(e.type==="hour"&&h.resolvedOptions().hour12){switch(h.resolvedOptions().hourCycle){case"h11":R>11&&(S=m.parse(v));break;case"h12":I=!1,R>12&&(S=m.parse(v));break}e.value>=12&&R>1&&(R+=12)}else R>e.maxValue&&(S=m.parse(v));if(Number.isNaN(R))return;const T=S!==0||I;T&&g(S),+`${R}0`>e.maxValue||P.length>=String(e.maxValue).length?(d.current="",T&&(p==null||p.focusNext())):d.current=P;break}}},M=c?{}:{"aria-label":e.type,"aria-valuetext":r?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":r?void 0:e.value,tabIndex:0,onKeyDown:x};return a.jsx("div",{...ne(s,{...M,onFocus:v=>{d.current="",v.target.scrollIntoView({block:"nearest"})},onClick:v=>{v.preventDefault(),v.stopPropagation()}}),className:"box-content cursor-default select-none whitespace-nowrap rounded p-2 text-center tabular-nums caret-transparent outline-none focus:bg-primary focus:text-on-primary",children:e.text.padStart(e.minLength,"0")})}function In({segment:e,domProps:s}){const t=ze();return a.jsx("div",{...s,onPointerDown:n=>{n.pointerType==="mouse"&&(n.preventDefault(),t!=null&&t.focusNext({from:n.target})||t==null||t.focusPrevious({from:n.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function Sn(e,s,t){switch(s){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:Ns(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:$s(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(s){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const n=e.hour>=12;return{value:e.hour,minValue:n?12:0,maxValue:n?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function we({segmentProps:e,state:s,value:t,onChange:n,isPlaceholder:r}){const{granularity:o}=s,i=f.useMemo(()=>{const u={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(u.hour="numeric",u.minute="numeric"),u},[o]),l=ce(i),c=f.useMemo(()=>t.toDate(),[t]),d=f.useMemo(()=>l.formatToParts(c).map(u=>{const p=Sn(t,u.type,l.resolvedOptions()),h=r&&u.type!=="literal"?p.placeholder:u.value;return{type:u.type,text:u.value===", "?" ":h,...p,minLength:u.type!=="literal"?String(p.maxValue).length:1}}),[c,l,r,t]);return a.jsx("div",{className:"flex items-center",children:d.map((u,p)=>u.type==="literal"?a.jsx(In,{domProps:e,segment:u},p):a.jsx(Dn,{isPlaceholder:r,domProps:e,state:s,value:t,onChange:n,segment:u},p))})}const os=H(a.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function Pn({date:e,currentMonth:s,state:{dayIsActive:t,dayIsHighlighted:n,dayIsRangeStart:r,dayIsRangeEnd:o,getCellProps:i,timezone:l,min:c,max:d}}){const{localeCode:u}=Me(),p=Rs(e,u),h=t(e),m=n(e),g=r(e),w=o(e),b=Ts(e,l),x=Vt(e,s),y=Qe(e,c,d);return a.jsxs("div",{role:"button","aria-disabled":y,className:E("w-40 h-40 text-sm relative isolate flex-shrink-0",y&&"text-disabled pointer-events-none",!x&&"invisible pointer-events-none"),...i(e,x),children:[a.jsx("span",{className:E("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!h&&!b&&"hover:bg-hover",h&&"bg-primary text-on-primary font-semibold",b&&!h&&"bg-chip"),children:e.day}),m&&x&&a.jsx("span",{className:E("absolute w-full h-full inset-0 bg-primary/focus",(g||p===0||e.day===1)&&"rounded-l-full",(w||p===6||e.day===s.calendar.getDaysInMonth(s))&&"rounded-r-full")})]})}function En({startDate:e,state:s,isFirst:t,isLast:n}){const{localeCode:r}=Me(),o=Ms(e,r),i=Ee(e,r);return a.jsxs("div",{className:"w-280 flex-shrink-0",children:[a.jsx($n,{isFirst:t,isLast:n,state:s,currentMonth:e}),a.jsxs("div",{className:"block",role:"grid",children:[a.jsx(Nn,{state:s,startDate:e}),[...new Array(o).keys()].map(l=>a.jsx(ue.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(c=>a.jsx(Pn,{date:i.add({weeks:l,days:c}),currentMonth:e,state:s},c))},l))]})]})}function $n({currentMonth:e,isFirst:s,isLast:t,state:{calendarDates:n,setCalendarDates:r,timezone:o,min:i,max:l}}){const c=h=>{const m=n.length;let g;h==="forward"?g=n.map(w=>be(w.add({months:m}))):g=n.map(w=>be(w.subtract({months:m}))),r(g)},d=ce({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),u=Qe(e.subtract({days:1}),i,l),p=Qe(xe(e.add({months:1})),i,l);return a.jsxs("div",{className:"flex items-center justify-between gap-10",children:[a.jsx(W,{size:"md",className:E("text-muted",!s&&"invisible"),disabled:!s||u,"aria-hidden":!s,onClick:()=>{c("backward")},children:a.jsx(_t,{})}),a.jsx("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),a.jsx(W,{size:"md",className:E("text-muted",!t&&"invisible"),disabled:!t||p,"aria-hidden":!t,onClick:()=>{c("forward")},children:a.jsx(os,{})})]})}function Nn({state:{timezone:e},startDate:s}){const{localeCode:t}=Me(),n=ce({weekday:"short"}),r=Ee(s,t);return a.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const l=r.add({days:o}).toDate(e),c=n.format(l);return a.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:a.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:c})},o)})})}function is({state:e,visibleMonths:s=1}){return ke()&&(s=1),a.jsx(f.Fragment,{children:[...new Array(s).keys()].map(n=>{const r=ve(xe(e.calendarDates[n])),o=n===0,i=n===s-1;return a.jsx(En,{state:e,startDate:r,isFirst:o,isLast:i},n)})})}const ls=f.memo(({start:e,end:s,options:t,preset:n})=>{const{dates:r}=Ht(),o=tt(),i=ce(t||zs[n||(r==null?void 0:r.format)]);if(!e||!s)return null;let l;try{l=i.formatRange(It(e,o),It(s,o))}catch{l=""}return a.jsx(f.Fragment,{children:l})},Bt);function It(e,s){return typeof e=="string"?Fs(e,s).toDate():"toDate"in e?e.toDate(s):e}function Rn({onPresetSelected:e,selectedValue:s}){return a.jsx(Ut,{children:ut.map(t=>a.jsx(Kt,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(s==null?void 0:s.preset)===t.key,onSelected:()=>{const n=t.getRangeValue();e(n)},children:a.jsx(F,{...t.label})},t.key))})}function Tn(e){return et("(max-width: 1024px)",e)}const cs=fe.forwardRef((e,s)=>{const{children:t,size:n="sm",description:r,className:o,invalid:i,autoFocus:l,errorMessage:c,iconRight:d,...u}=e,p=Te(s);As({autoFocus:l},p);const h=Mn(n),m=Re(e),g=f.useId();return a.jsxs("div",{className:E(o,"isolate"),children:[a.jsxs("label",{className:"flex select-none items-center",children:[a.jsx("input",{...u,type:"checkbox",role:"switch","aria-invalid":i||void 0,"aria-describedby":r?g:void 0,ref:p,"aria-checked":u.checked,className:E(h,!i&&"checked:border-primary checked:bg-primary dark:checked:border-primary-dark dark:checked:bg-primary-dark",i&&"checked:border-danger checked:bg-danger","relative flex flex-shrink-0 cursor-pointer appearance-none items-center overflow-hidden rounded-3xl border border-chip bg-chip p-0 outline-none transition-colors checked:border-primary checked:bg-primary","before:z-10 before:block before:translate-x-2 before:rounded-3xl before:border before:bg-white before:transition-transform","checked:before:border-white","focus-visible:ring",e.disabled&&"cursor-not-allowed opacity-80")}),t&&a.jsx("span",{className:E(m.size.font,"ml-12",i&&"text-danger",e.disabled&&"text-disabled"),children:t}),d]}),r&&!c&&a.jsx("div",{id:g,className:m.description,children:r}),c&&a.jsx("div",{id:g,className:m.error,children:c})]})});function Fa(e){const{field:{onChange:s,onBlur:t,value:n=!1,ref:r},fieldState:{invalid:o,error:i}}=Ce({name:e.name}),l={onChange:c=>{c.target.value&&c.target.value!=="on"?s(c.target.checked?c.target.value:!1):s(c)},onBlur:t,checked:!!n,invalid:o,errorMessage:i==null?void 0:i.message,name:e.name};return a.jsx(cs,{ref:r,...ne(e,l)})}function Mn(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-18 before:w-12 before:h-12 checked:before:translate-x-14";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const zn=[{key:0,label:D("Preceding period"),getRangeValue:e=>{const s=e.start,r=(e.end.toDate().getTime()-s.toDate().getTime())/(1e3*60);return{preset:0,start:s.subtract({minutes:r}),end:s}}},{key:1,label:D("Same period last year"),getRangeValue:e=>({start:e.start.subtract({years:1}),end:e.end.subtract({years:1}),preset:1})},{key:2,label:D("Custom"),getRangeValue:e=>({start:e.start.subtract({weeks:1}),end:e.end.subtract({weeks:1}),preset:2})}];function Fn({originalRangeValue:e,onPresetSelected:s,selectedValue:t}){return a.jsx(Ut,{children:zn.map(n=>a.jsx(Kt,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(t==null?void 0:t.preset)===n.key,onSelected:()=>{const r=n.getRangeValue(e);s(r)},children:a.jsx(F,{...n.label})},n.key))})}function An({state:e,compareState:s,showInlineDatePickerField:t=!1,compareVisibleDefault:n=!1}){const r=Tn(),{close:o}=st(),i=f.useRef(e),l=e.isPlaceholder.start||e.isPlaceholder.end,[c,d]=f.useState(n),u=a.jsxs(nt,{dividerTop:!0,startAction:!l&&!r?a.jsx("div",{className:"text-xs",children:a.jsx(ls,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[a.jsx(J,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(i.current.selectedValue),e.setIsPlaceholder(i.current.isPlaceholder),o()},children:a.jsx(F,{message:"Cancel"})}),a.jsx(J,{variant:"flat",color:"primary",size:"xs",onClick:()=>{const p=e.selectedValue;s&&c&&(p.compareStart=s.selectedValue.start,p.compareEnd=s.selectedValue.end),o(p)},children:a.jsx(F,{message:"Select"})})]});return a.jsxs(Fe,{size:"auto",children:[a.jsxs(rt,{className:"flex",padding:"p-0",children:[!r&&a.jsxs("div",{className:"min-w-192 py-14",children:[a.jsx(Rn,{selectedValue:e.selectedValue,onPresetSelected:p=>{e.setSelectedValue(p),e.closeDialogOnSelection&&o(p)}}),!!s&&a.jsxs(f.Fragment,{children:[a.jsx(cs,{className:"mx-20 mb-10 mt-14",checked:c,onChange:p=>d(p.target.checked),children:a.jsx(F,{message:"Compare"})}),c&&a.jsx(Fn,{originalRangeValue:e.selectedValue,selectedValue:s.selectedValue,onPresetSelected:p=>{s.setSelectedValue(p)}})]})]}),a.jsx(je,{initial:!1,children:a.jsx(On,{state:e,compareState:s,showInlineDatePickerField:t,compareVisible:c})})]}),!e.closeDialogOnSelection&&u]})}function On({state:e,compareState:s,showInlineDatePickerField:t,compareVisible:n}){return a.jsxs(ue.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pb-20 pt-10",children:[t&&a.jsxs("div",{children:[a.jsx(St,{state:e}),!!s&&n&&a.jsx(St,{state:s,label:a.jsx(F,{message:"Compare"})})]}),a.jsx("div",{className:"flex items-start gap-36",children:a.jsx(is,{state:e,visibleMonths:2})})]})}function St({state:e,label:s}){const{selectedValue:t,setSelectedValue:n}=e;return a.jsxs(dt,{className:"mb-20 mt-10",label:s,children:[a.jsx(we,{state:e,value:t.start,onChange:r=>{n({...t,start:r})}}),a.jsx(as,{className:"block flex-shrink-0 text-muted",size:"md"}),a.jsx(we,{state:e,value:t.end,onChange:r=>{n({...t,end:r})}})]})}function Ln(e){var h,m;const{granularity:s,closeDialogOnSelection:t,...n}=e,r=jn(e),o=f.useRef(null),l=ke()&&s!=="day",c=a.jsx(at,{offset:8,placement:"bottom-start",isOpen:r.calendarIsOpen,onOpenChange:r.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:a.jsx(An,{state:r})}),d={onClick:g=>{g.stopPropagation(),g.preventDefault(),Vn(g)?r.setCalendarIsOpen(!1):r.setCalendarIsOpen(!0)}},u=r.selectedValue,p=r.setSelectedValue;return a.jsxs(f.Fragment,{children:[a.jsxs(dt,{ref:o,wrapperProps:d,endAdornment:l?void 0:a.jsx(ss,{}),...n,children:[a.jsx(we,{isPlaceholder:(h=r.isPlaceholder)==null?void 0:h.start,state:r,segmentProps:d,value:u.start,onChange:g=>{p({start:g,end:u.end})}}),a.jsx(as,{className:"block flex-shrink-0 text-muted",size:"md"}),a.jsx(we,{isPlaceholder:(m=r.isPlaceholder)==null?void 0:m.end,state:r,segmentProps:d,value:u.end,onChange:g=>{p({start:u.start,end:g})}})]}),c]})}function Vn(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function _n(e){const{field:{onChange:s,onBlur:t,value:n,ref:r},fieldState:{invalid:o,error:i}}=Ce({name:e.name}),l={onChange:c=>{s(c?us(c):null)},onBlur:t,value:Hn(n),invalid:o,errorMessage:i==null?void 0:i.message,inputRef:r};return a.jsx(Ln,{...ne(l,e)})}function Hn(e){const{start:s,end:t,preset:n}=e||{},r={preset:n};try{s&&(r.start=typeof s=="string"?$e(s):s),t&&(r.end=typeof t=="string"?$e(t):t)}catch{}return r}function us({start:e,end:s,preset:t}={}){const n={preset:t};return e&&(n.start=e.toAbsoluteString()),s&&(n.end=s.toAbsoluteString()),n}function ds(e){var s;return{...e,defaultOperator:ye.between,control:{type:_.DateRangePicker,defaultValue:((s=e.control)==null?void 0:s.defaultValue)||us(ut[3].getRangeValue())}}}function Bn(e){return ds({key:"created_at",label:D("Date created"),...e})}function Un(e){return ds({key:"updated_at",label:D("Last updated"),...e})}const We="filters";function Kn(e){if(!e)return[];let s=[];try{s=JSON.parse(atob(decodeURIComponent(e))),s.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return s}function Wn(e,s){return!e||(e=s?e.filter(t=>t.value!=="").map(t=>Gn(t,s)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Gn(e,s){var n;const t=s.find(r=>r.key===e.key);if((t==null?void 0:t.control.type)==="select"){const r=(t.control.options||[]).find(o=>o.key===e.value);if(r)return{...e,value:r.value,valueKey:r.key}}return(n=t==null?void 0:t.extraFilters)!=null&&n.length&&(e.extraFilters=t.extraFilters),e}function qn(e,s){const[t]=Os(),n=Ls(),r=t.get(We),o=f.useMemo(()=>{if(!e)return[];const u=Kn(r);return(s||[]).forEach(p=>{if(!u.find(h=>h.key===p)){const h=e.find(m=>m.key===p);u.push({key:p,value:h.control.defaultValue,operator:h.defaultOperator,isInactive:!0})}}),u.sort((p,h)=>e.findIndex(m=>m.key===p.key)-e.findIndex(m=>m.key===h.key)),u},[r,s,e]),i=f.useCallback(u=>{const p=[...o];return u.forEach(h=>{const m=typeof h=="object"?h.key:h,g=p.findIndex(w=>w.key===m);g>-1&&p.splice(g,1)}),p},[o]),l=f.useCallback(u=>{const p=Wn(u,e);p?t.set(We,p):t.delete(We),n({search:`?${t}`},{replace:!0})},[e,n,t]),c=f.useCallback(u=>{const h=[...i(u),...u];l(h)},[i,l]),d=f.useCallback(u=>l(i([u])),[i,l]);return{add:c,remove:d,replaceAll:l,decodedFilters:o,encodedFilters:r}}function Ne(e){return Vs()?e.metaKey:e.ctrlKey}function Yn(e){const{cellCount:s,rowCount:t}=e;return{onKeyDown:r=>{switch(r.key){case"ArrowLeft":q(r,{cell:{op:"decrement"}},e);break;case"ArrowRight":q(r,{cell:{op:"increment"}},e);break;case"ArrowUp":q(r,{row:{op:"decrement"}},e);break;case"ArrowDown":q(r,{row:{op:"increment"}},e);break;case"PageUp":q(r,{row:{op:"decrement",count:5}},e);break;case"PageDown":q(r,{row:{op:"increment",count:5}},e);break;case"Tab":Xn(r);break;case"Home":Ne(r)?q(r,{row:{op:"decrement",count:t},cell:{op:"decrement",count:s}},e):q(r,{cell:{op:"decrement",count:s}},e);break;case"End":Ne(r)?q(r,{row:{op:"increment",count:t},cell:{op:"increment",count:s}},e):q(r,{cell:{op:"increment",count:s}},e);break}}}}function q(e,s,{cellCount:t,rowCount:n}){var g,w,b,x,y,k,C;if(((g=document.activeElement)==null?void 0:g.tagName)==="input")return;e.preventDefault();const r=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!r)return;const i=o.closest("[aria-rowindex]");if(!i)return;let l=parseInt(i.getAttribute("aria-rowindex")),c=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(l)||Number.isNaN(c))return;const d=((w=s.row)==null?void 0:w.count)??1;((b=s.row)==null?void 0:b.op)==="increment"?l=Math.min(n,l+d):((x=s.row)==null?void 0:x.op)==="decrement"&&(l=Math.max(1,l-d));const u=((y=s.cell)==null?void 0:y.count)??1;((k=s.cell)==null?void 0:k.op)==="increment"?c=Math.min(t,c+u):((C=s.cell)==null?void 0:C.op)==="decrement"&&(c=Math.max(1,c-u));const p=r.querySelector(`[aria-rowindex="${l}"] [aria-colindex="${c}"]`);if(!p)return;const m=Wt(p).nextNode()||p;o.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function Xn(e){const s=e.currentTarget;if(e.shiftKey)s.focus();else{const t=Wt(s,{tabbable:!0});let n,r;do r=t.lastChild(),r&&(n=r);while(r);n&&!n.contains(document.activeElement)&&_s(n)}}const Y=f.createContext(null);function fs({index:e,isHeader:s}){const{columns:t,cellHeight:n="h-46",headerCellHeight:r="h-46"}=f.useContext(Y),o=t[e],i=o==null?void 0:o.padding;let l="justify-start";return(o==null?void 0:o.align)==="center"?l="justify-center":(o==null?void 0:o.align)==="end"&&(l="justify-end"),E("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",s?r:n,(o==null?void 0:o.width)??"flex-1",o==null?void 0:o.maxWidth,o==null?void 0:o.minWidth,l,i,o==null?void 0:o.className)}function Qn({rowIndex:e,rowIsHovered:s,index:t,item:n,id:r}){const{columns:o}=f.useContext(Y),i=o[t],l=f.useMemo(()=>({index:e,isHovered:s,isPlaceholder:n.isPlaceholder}),[e,s,n.isPlaceholder]),c=fs({index:t,isHeader:!1});return a.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:r,className:c,children:a.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:i.body(n,l)})})}function Zn({onMoveStart:e,onMove:s,onMoveEnd:t,minimumMovement:n=0,preventDefault:r,stopPropagation:o=!0,onPress:i,onLongPress:l,...c}){const u=f.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:p,removeGlobalListener:h}=Jt(),m=x=>{!u.el||(e==null?void 0:e(x,u.el))===!1||(u.originalTouchAction=u.el.style.touchAction,u.el.style.touchAction="none",u.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",u.started=!0)},g=x=>{var y;if(x.button===0&&u.id==null){if(u.started=!1,((y=c.onPointerDown)==null?void 0:y.call(c,x))===!1)return;o&&x.stopPropagation(),r&&x.preventDefault(),u.id=x.pointerId,u.el=x.currentTarget,u.lastPosition={x:x.clientX,y:x.clientY},l&&(u.longPressTimer=setTimeout(()=>{l(x,u.el),u.longPressTriggered=!0},400)),(e||s)&&p(window,"pointermove",w,!1),p(window,"pointerup",b,!1),p(window,"pointercancel",b,!1)}},w=x=>{if(x.pointerId===u.id){const y=x.clientX-u.lastPosition.x,k=x.clientY-u.lastPosition.y;(Math.abs(y)>=n||Math.abs(k)>=n)&&!u.started&&m(x),u.started&&(s==null||s(x,y,k),u.lastPosition={x:x.clientX,y:x.clientY})}},b=x=>{var y;if(x.pointerId===u.id){u.longPressTimer&&clearTimeout(u.longPressTimer);const k=u.longPressTriggered;u.longPressTriggered=!1,u.started&&(t==null||t(x)),u.el&&(x.type!=="pointercancel"&&((y=c.onPointerUp)==null||y.call(c,x,u.el),x.target&&u.el.contains(x.target)&&(k?l==null||l(x,u.el):i==null||i(x,u.el))),document.documentElement.style.userSelect=u.originalUserSelect||"",u.el.style.touchAction=u.originalTouchAction||""),u.id=void 0,u.started=!1,h(window,"pointermove",w,!1),h(window,"pointerup",b,!1),h(window,"pointercancel",b,!1)}};return{domProps:{onPointerDown:ae(g)}}}function Jn(e){return e.shiftKey||Ne(e)}function er({index:e,isSelected:s,isHeader:t}){const n=Hs(),r=ke(),{hideBorder:o,enableSelection:i,collapseOnMobile:l,onAction:c}=f.useContext(Y);return E("flex gap-x-16 break-inside-avoid outline-none border border-transparent",c&&"cursor-pointer",r&&l&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",s&&!n&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",s&&n&&"bg-selected hover:bg-focus focus-visible:bg-focus",!s&&!t&&(i||c)&&"focus-visible:bg-focus hover:bg-hover")}const tr=["button","a","input","select","textarea"];function sr({item:e,index:s,renderAs:t,className:n,style:r}){const{selectedRows:o,columns:i,toggleRow:l,selectRow:c,onAction:d,selectRowOnContextMenu:u,enableSelection:p,selectionStyle:h,hideHeaderRow:m}=f.useContext(Y),g=f.useRef(!1),w=o.includes(e.id),[b,x]=f.useState(!1),y=I=>I.target.closest(tr.join(",")),k=I=>{h==="highlight"&&d&&!g.current&&!y(I)&&(I.preventDefault(),I.stopPropagation(),d(e,s))},C=!!o.length,N=I=>{y(I)||(h==="checkbox"?p&&(C||!d)?l(e):d&&d(e,s):h==="highlight"&&(g.current?p&&C?l(e):d==null||d(e,s):p&&c(e,Jn(I))))},{domProps:M}=Zn({onPointerDown:I=>{g.current=I.pointerType==="touch"},onPress:N,onLongPress:p?()=>{g.current&&l(e)}:void 0}),v=I=>{p&&I.key===" "?(I.preventDefault(),I.stopPropagation(),h==="checkbox"?l(e):c(e)):I.key==="Enter"&&!o.length&&d&&(I.preventDefault(),I.stopPropagation(),d(e,s))},P=I=>{u&&p&&(o.includes(e.id)||c(e)),g.current&&(I.preventDefault(),I.stopPropagation())},R=er({index:s,isSelected:w}),S=t||"div";return a.jsx(S,{role:"row","aria-rowindex":s+1+(m?0:1),"aria-selected":w,tabIndex:-1,className:E(n,R),item:S==="div"?void 0:e,onDoubleClick:ae(k),onKeyDown:ae(v),onContextMenu:ae(P),onPointerEnter:ae(()=>x(!0)),onPointerLeave:ae(()=>x(!1)),style:r,...M,children:i.map((I,T)=>a.jsx(Qn,{rowIndex:s,rowIsHovered:b,index:T,item:e},`${e.id}-${I.key}`))})}const nr={key:"checkbox",header:()=>a.jsx(ar,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,s)=>s.isPlaceholder?a.jsx(ie,{size:"w-24 h-24",variant:"rect"}):a.jsx(rr,{item:e})};function rr({item:e}){const{selectedRows:s,toggleRow:t}=f.useContext(Y);return a.jsx(Gt,{checked:s.includes(e.id),onChange:()=>t(e)})}function ar(){const{trans:e}=G(),{data:s,selectedRows:t,onSelectionChange:n}=f.useContext(Y),r=!!s.length&&s.length===t.length,o=!r&&!!t.length;return a.jsx(Gt,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:r,onChange:()=>{n(r?[]:s.map(i=>i.id))}})}const or=H(a.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function ir({index:e}){const{columns:s,sortDescriptor:t,onSortChange:n,enableSorting:r}=f.useContext(Y),o=s[e],i=fs({index:e,isHeader:!0}),[l,c]=f.useState(!1),d=o.sortingKey||o.key,u=o.allowsSorting&&r,{orderBy:p,orderDir:h}=t||{},m=u&&p===d;let g;m&&h==="asc"?g="ascending":m&&h==="desc"?g="descending":u&&(g="none");const w=()=>{if(!u)return;let y;m&&h==="desc"?y={orderDir:"asc",orderBy:d}:m&&h==="asc"?y={orderBy:void 0,orderDir:void 0}:y={orderDir:"desc",orderBy:d},n==null||n(y)},b=m||l,x={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return a.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":g,className:E(i,"text-muted font-medium text-xs",u&&"cursor-pointer"),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:y=>{(y.key===" "||y.key==="Enter")&&(y.preventDefault(),w())},onClick:w,children:[o.hideHeader?a.jsx("div",{className:"sr-only",children:o.header()}):o.header(),a.jsx(je,{children:u&&a.jsx(ue.span,{variants:x,animate:b?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!b,children:a.jsx(or,{size:"xs",className:E("text-muted",h==="asc"&&p===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function lr(){const{columns:e}=f.useContext(Y);return a.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((s,t)=>a.jsx(ir,{index:t},s.key))})}function Aa({className:e,columns:s,collapseOnMobile:t=!0,hideHeaderRow:n=!1,hideBorder:r=!1,data:o,selectedRows:i,defaultSelectedRows:l,onSelectionChange:c,sortDescriptor:d,onSortChange:u,enableSorting:p=!0,onDelete:h,enableSelection:m=!0,selectionStyle:g="checkbox",ariaLabelledBy:w,selectRowOnContextMenu:b,onAction:x,renderRowAs:y,tableBody:k,meta:C,tableRef:N,closeOnInteractOutside:M=!1,cellHeight:v,headerCellHeight:P,...R}){const S=ke(),I=!!S&&t;I&&(n=!0,r=!0);const[T,L]=Z(i,l||[],c),[se,X]=Z(d,void 0,u),j=f.useCallback(A=>{const B=[...T];if(!B.includes(A.id))B.push(A.id);else{const de=B.indexOf(A.id);B.splice(de,1)}L(B)},[T,L]),$=f.useCallback((A,B)=>{let de=[];A&&(de=B?[...T==null?void 0:T.filter(he=>he!==A.id),A.id]:[A.id]),L(de)},[T,L]),z=f.useMemo(()=>{const A=s.filter(de=>{const he=de.visibleInMode||"regular";if(he==="all"||he==="compact"&&I||he==="regular"&&!I)return!0});return m&&g!=="highlight"&&!S&&A.unshift(nr),A},[S,s,m,g,I]),V={isCollapsedMode:I,cellHeight:v,headerCellHeight:P,hideBorder:r,hideHeaderRow:n,selectedRows:T,onSelectionChange:L,enableSorting:p,enableSelection:m,selectionStyle:g,data:o,columns:z,sortDescriptor:se,onSortChange:X,toggleRow:j,selectRow:$,onAction:x,selectRowOnContextMenu:b,meta:C,collapseOnMobile:t},re=Yn({cellCount:m?z.length+1:z.length,rowCount:o.length+1}),mt={renderRowAs:y};k?k=f.cloneElement(k,mt):k=a.jsx(cr,{...mt});const pt=Te(N);return dn({ref:pt,onInteractOutside:A=>{M&&m&&(T!=null&&T.length)&&!A.target.closest('[role="dialog"]')&&L([])}}),a.jsx(Y.Provider,{value:V,children:a.jsxs("div",{...ne(R,re,{onKeyDown:A=>{A.key==="Escape"?(A.preventDefault(),A.stopPropagation(),T!=null&&T.length&&L([])):A.key==="Delete"?(A.preventDefault(),A.stopPropagation(),T!=null&&T.length&&(h==null||h(o.filter(B=>T==null?void 0:T.includes(B.id))))):Ne(A)&&A.key==="a"&&(A.preventDefault(),A.stopPropagation(),m&&L(o.map(B=>B.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":z.length+1,ref:pt,"aria-multiselectable":m?!0:void 0,"aria-labelledby":w,className:E(e,"isolate select-none text-sm outline-none focus-visible:ring-2"),children:[!n&&a.jsx(lr,{}),k]})})}function cr({renderRowAs:e}){const{data:s}=f.useContext(Y);return a.jsx(f.Fragment,{children:s.map((t,n)=>a.jsx(sr,{item:t,index:n,renderAs:e},t.id))})}function ur({filter:e}){const{trans:s}=G();return a.jsx(qt,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?s(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?s(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>a.jsx(Ae,{value:t.key,children:a.jsx(F,{...t.label})},t.key))})}function dr({filter:e}){return a.jsx(_n,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const Le=f.forwardRef(({className:e,circle:s,size:t="md",src:n,link:r,label:o,fallback:i="generic",lazy:l=!0,...c},d)=>{let u=n?a.jsx("img",{ref:d,src:n,alt:o,loading:l?"lazy":void 0,className:"block h-full w-full object-cover"}):a.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:a.jsx(Us,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});o&&(u=a.jsx(Yt,{label:o,children:u}));const p={...c,className:E(e,"relative block overflow-hidden select-none flex-shrink-0",fr(t),s?"rounded-full":"rounded")};return r?a.jsx(Bs,{...p,to:r,children:u}):a.jsx("div",{...p,children:u})});function fr(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}function hr(e,s,t){return Xt({queryKey:[e,s],queryFn:()=>mr(e,s),placeholderData:Ks,...t})}async function mr(e,s){return Oe.get(e,{params:s}).then(t=>t.data)}function hs(e,s,t){return Xt({queryKey:[e,s],queryFn:()=>pr(e,s),...t})}async function pr(e,s){return Oe.get(e,{params:s}).then(t=>t.data)}function gr({label:e,className:s,background:t,value:n,defaultValue:r="",placeholder:o=D("Select item..."),searchPlaceholder:i=D("Find an item..."),onChange:l,description:c,errorMessage:d,invalid:u,autoFocus:p,queryParams:h,endpoint:m,disabled:g,required:w}){var P;const b=f.useRef(null),[x,y]=f.useState(""),[k,C]=Z(n,r,l),N=hr(m,{query:x,...h}),{trans:M}=G(),v=Re({size:"md"});return k?a.jsxs("div",{className:s,children:[a.jsx("div",{className:v.label,children:e}),a.jsx("div",{className:E("rounded-input border p-8",t,u&&"border-danger"),children:a.jsx(je,{initial:!1,mode:"wait",children:a.jsx(xr,{disabled:g,endpoint:m,modelId:k,queryParams:h,onEditClick:()=>{C(""),y(""),requestAnimationFrame(()=>{var R,S;(R=b.current)==null||R.focus(),(S=b.current)==null||S.click()})}})})}),c&&!d&&a.jsx("div",{className:v.description,children:c}),d&&a.jsx("div",{className:v.error,children:d})]}):a.jsx(Gs,{className:s,showSearchField:!0,invalid:u,errorMessage:d,description:c,color:"white",isAsync:!0,background:t,placeholder:M(o),searchPlaceholder:M(i),label:e,isLoading:N.isFetching,items:(P=N.data)==null?void 0:P.results,inputValue:x,onInputValueChange:y,selectionMode:"single",selectedValue:k,onSelectionChange:C,ref:b,autoFocus:p,disabled:g,required:w,children:R=>a.jsx(Ae,{value:R.id,description:R.description,startIcon:a.jsx(Le,{src:R.image}),children:R.name},R.id)})}function xr({modelId:e,onEditClick:s,endpoint:t,disabled:n,queryParams:r}){const{data:o,isLoading:i}=hs(`${t}/${e}`,r);return i||!(o!=null&&o.model)?a.jsx(br,{},"skeleton"):a.jsxs(ue.div,{className:E("flex items-center gap-10",n&&"pointer-events-none cursor-not-allowed text-disabled"),...ot,children:[o.model.image&&a.jsx(Le,{src:o.model.image}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm leading-4",children:o.model.name}),a.jsx("div",{className:"text-xs text-muted",children:o.model.description})]}),a.jsx(Yt,{label:a.jsx(F,{message:"Change item"}),children:a.jsx(W,{className:"ml-auto text-muted",size:"sm",onClick:s,disabled:n,children:a.jsx(cn,{})})})]},"preview")}function br(){return a.jsxs(ue.div,{className:"flex items-center gap-10",...ot,children:[a.jsx(ie,{variant:"rect",size:"w-32 h-32"}),a.jsxs("div",{className:"max-h-[36px] flex-auto",children:[a.jsx(ie,{className:"text-xs"}),a.jsx(ie,{className:"max-h-8 text-xs"})]}),a.jsx(ie,{variant:"icon",size:"w-24 h-24"})]})}function vr({name:e,...s}){const{clearErrors:t}=Ws(),{field:{onChange:n,value:r=""},fieldState:{invalid:o,error:i}}=Ce({name:e});return a.jsx(gr,{value:r,onChange:l=>{n(l),t(e)},invalid:o,errorMessage:i==null?void 0:i.message,...s})}function yr({filter:e}){return a.jsx(vr,{name:`${e.key}.value`,endpoint:`normalized-models/${e.control.model}`})}const ms={"=":D("is"),"!=":D("is not"),">":D("is greater than"),">=":D("is greater than or equal to"),"<":D("is less than"),"<=":D("is less than or equal to"),has:D("Include"),doesntHave:D("Do not include"),between:D("Is between"),hasAll:D("Include all")};function wr({filter:e}){var t;const s=e.control;return a.jsxs(f.Fragment,{children:[a.jsx(qt,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(t=e.operators)==null?void 0:t.map(n=>a.jsx(Ae,{value:n,children:a.jsx(F,{...ms[n]})},n))}),a.jsx(qs,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in s?s.minValue:void 0,max:"maxValue"in s?s.maxValue:void 0,minLength:"minLength"in s?s.minLength:void 0,maxLength:"maxLength"in s?s.maxLength:void 0,required:!0})]})}function jr({className:e,children:s,size:t,color:n,radius:r,selectable:o,wrap:i=!0}){return a.jsx("div",{className:E("flex items-center gap-8",i&&"flex-wrap",e),children:f.Children.map(s,l=>{if(f.isValidElement(l))return f.cloneElement(l,{size:t,color:n,selectable:o,radius:r})})})}function Ze(e){return{id:e,name:`${e}`,description:`${e}`}}function kr(e,s){const t=f.useRef(null),n=Te(s),{displayWith:r=V=>V.name,validateWith:o,children:i,suggestions:l,isLoading:c,inputValue:d,onInputValueChange:u,onItemSelected:p,placeholder:h,onOpenChange:m,chipSize:g="sm",openMenuOnFocus:w=!0,showEmptyMessage:b,value:x,defaultValue:y,onChange:k,valueKey:C,isAsync:N,allowCustomValue:M=!0,showDropdownArrow:v,onChipClick:P,...R}=e,S=Re({...e,flexibleHeight:!0}),[I,T]=Ir(e),[L,se]=f.useState(!1),X=a.jsx(it,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),j=v?a.jsx(lt,{}):null,{fieldProps:$,inputProps:z}=Ot({...R,focusRef:n,endAdornment:c&&L?X:j});return a.jsx(Lt,{fieldClassNames:S,...$,children:a.jsxs(ns,{ref:t,className:E("flex flex-wrap items-center",S.input),onClick:()=>{var V;(V=n.current)==null||V.focus()},children:[a.jsx(Cr,{displayChipUsing:r,onChipClick:P,items:I,setItems:T,chipSize:g}),a.jsx(Dr,{size:e.size,showEmptyMessage:b,inputProps:z,inputValue:d,onInputValueChange:u,fieldRef:t,inputRef:n,chips:I,setChips:T,validateWith:o,isLoading:c,suggestions:l,placeholder:h,openMenuOnFocus:w,listboxIsOpen:L,setListboxIsOpen:se,allowCustomValue:M,children:i})]})})}function Cr({items:e,setItems:s,displayChipUsing:t,chipSize:n,onChipClick:r}){const o=ze(),i=f.useCallback(l=>{const c=e.findIndex(u=>u.id===l),d=[...e];return c>-1&&(d.splice(c,1),s(d)),d},[e,s]);return a.jsx(jr,{className:E("max-w-full flex-shrink-0 flex-wrap",n==="xs"?"my-6":"my-8"),size:n,selectable:!0,children:e.map(l=>a.jsx(Ys,{errorMessage:l.errorMessage,adornment:l.image?a.jsx(Le,{circle:!0,src:l.image}):null,onClick:()=>r==null?void 0:r(l),onRemove:()=>{i(l.id).length?o==null||o.focusPrevious({tabbable:!0}):o==null||o.focusLast()},children:t(l)},l.id))})}function Dr(e){const{inputRef:s,fieldRef:t,validateWith:n,setChips:r,chips:o,suggestions:i,inputProps:l,placeholder:c,openMenuOnFocus:d,listboxIsOpen:u,setListboxIsOpen:p,allowCustomValue:h,isLoading:m,size:g}=e,w=ze(),b=f.useCallback(j=>{j=(j||[]).filter($=>{const z=!$||!$.id||!$.name;return!(o.findIndex(re=>re.id===($==null?void 0:$.id))>-1)&&!z}),j.length&&(n&&(j=j.map($=>n($))),r([...o,...j]))},[o,r,n]),x=Xs({...e,clearInputOnItemSelection:!0,isOpen:u,onOpenChange:p,items:i,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:j=>{T(j)}}),{state:{activeIndex:y,setActiveIndex:k,isOpen:C,setIsOpen:N,inputValue:M,setInputValue:v},refs:P,listboxId:R,collection:S,onInputChange:I}=x,T=j=>{const $=S.size&&y!=null?[...S.values()][y]:null;$!=null&&$.item?b([$.item]):h&&b([Ze($?$.value:j)]),v(""),k(null),N(!1)};Qs(()=>{t.current&&P.reference.current!==t.current&&x.reference(t.current)},[t,x,P]);const{handleTriggerKeyDown:L,handleListboxKeyboardNavigation:se}=en(x),X=ae(()=>{d&&!C&&N(!0)});return a.jsx(Zs,{listbox:x,mobileOverlay:Js,isLoading:m,onPointerDown:j=>{j.preventDefault()},children:a.jsx("input",{type:"text",className:E("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",g==="xs"?"h-20":"h-30"),placeholder:c,...ne(l,{ref:s,value:M,onChange:I,onPaste:j=>{const z=j.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(z){j.preventDefault();const V=window.getSelection();V!=null&&V.rangeCount&&(V.deleteFromDocument(),b(z.map(re=>Ze(re))))}},"aria-autocomplete":"list","aria-controls":C?R:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:j=>{const $=j.target;if(j.key==="Enter"){j.preventDefault(),T($.value);return}if(j.key==="Escape"&&C&&(N(!1),v("")),j.key==="ArrowUp"&&C&&(y===0||y==null)){k(null);return}if(y!=null&&(j.key==="ArrowLeft"||j.key==="ArrowRight")){j.preventDefault();return}if((j.key==="ArrowLeft"||j.key==="Backspace"||j.key==="Delete")&&$.selectionStart===0&&y==null&&o.length){w==null||w.focusPrevious({tabbable:!0});return}L(j)||se(j)},onFocus:X,onClick:X})})})}function Ir({onChange:e,value:s,defaultValue:t,valueKey:n}){const r=f.useMemo(()=>Pt(s),[s]),o=f.useMemo(()=>Pt(t),[t]),i=f.useCallback(l=>{const c=n?l.map(d=>d[n]):l;e==null||e(c)},[e,n]);return Z(r||void 0,o||[],i)}function Pt(e){if(e!=null)return e.map(s=>typeof s!="object"?Ze(s):s)}const Sr=fe.forwardRef(kr);function Pr({children:e,...s}){const{field:{onChange:t,onBlur:n,value:r=[],ref:o},fieldState:{invalid:i,error:l}}=Ce({name:s.name}),c={onChange:t,onBlur:n,value:r,invalid:i,errorMessage:l==null?void 0:l.message};return a.jsx(Sr,{ref:o,...ne(c,s),children:e})}function Er({filter:e}){const{trans:s}=G();return a.jsx(Pr,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?s(e.control.placeholder):void 0,displayWith:t=>{var n;return(n=e.control.options.find(r=>r.key===t.id))==null?void 0:n.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:t.label.message})),children:t=>a.jsx(Ae,{value:t.id,children:a.jsx(F,{message:t.name})},t.id)})}const ps=f.forwardRef((e,s)=>{const{isInactive:t,filter:n,...r}=e;return t?a.jsx($r,{filter:n,...r,ref:s}):a.jsx(Nr,{filter:n,...r,ref:s})}),$r=f.forwardRef(({filter:e,...s},t)=>a.jsx(J,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:a.jsx(lt,{}),...s,children:a.jsx(F,{...e.label})})),Nr=f.forwardRef(({filter:e,children:s,...t},n)=>{const r=e.control.type===_.BooleanToggle;return a.jsxs(J,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!r&&a.jsx(lt,{}),ref:n,...t,children:[a.jsx("span",{className:E(!r&&"border-r border-r-primary-light mr-8 pr-8"),children:a.jsx(F,{...e.label})}),s]})});function De(e){const{onValueChange:s,isInactive:t,filter:n,label:r}=e;return a.jsxs(at,{offset:10,type:"popover",onClose:o=>{o!==void 0&&s(o)},children:[a.jsx(ps,{isInactive:t,filter:n,children:r}),a.jsx(Rr,{...e})]})}function Rr({filter:e,panel:s,value:t,operator:n}){const r=tn({defaultValues:{[e.key]:{value:t,operator:n}}}),{close:o,formId:i}=st();return a.jsxs(Fe,{size:"xs",children:[a.jsx(sn,{children:a.jsx(F,{...e.label})}),a.jsx(rt,{padding:"px-14 pt-14 pb-4 max-h-288",children:a.jsxs(nn,{form:r,id:i,onSubmit:l=>{o(l[e.key])},children:[e.description&&a.jsx("div",{className:"text-muted text-xs mb-14",children:a.jsx(F,{...e.description})}),s]})}),a.jsx(nt,{children:a.jsx(J,{form:i,type:"submit",variant:"flat",color:"primary",size:"xs",children:a.jsx(F,{message:"Apply"})})})]})}const Tr=f.memo(({value:e,...s})=>{const t=rn(s);return isNaN(e)&&(e=0),a.jsx(f.Fragment,{children:t.format(e)})},Bt);function Mr(e){switch(e.filter.control.type){case _.DateRangePicker:return a.jsx(zr,{...e});case _.BooleanToggle:return a.jsx(Fr,{...e});case _.Select:return a.jsx(Ar,{...e});case _.ChipField:return a.jsx(Or,{...e});case _.Input:return a.jsx(Vr,{...e});case _.SelectModel:return a.jsx(_r,{...e});case _.Custom:const s=e.filter.control.listItem;return a.jsx(s,{...e});default:return null}}function zr(e){const{value:s,filter:t}=e;let n;return s.preset!==void 0?n=a.jsx(F,{...ut[s.preset].label}):n=a.jsx(ls,{start:new Date(s.start),end:new Date(s.end),options:{dateStyle:"medium"}}),a.jsx(De,{...e,label:n,panel:a.jsx(dr,{filter:t})})}function Fr({filter:e,isInactive:s,onValueChange:t}){return a.jsx(ps,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:s})}function Ar(e){const{filter:s,value:t}=e,n=s.control.options.find(r=>r.key===t);return a.jsx(De,{...e,label:n?a.jsx(F,{...n.label}):null,panel:a.jsx(ur,{filter:s})})}function Or(e){return a.jsx(De,{...e,label:a.jsx(Lr,{...e}),panel:a.jsx(Er,{filter:e.filter})})}function Lr(e){const{trans:s}=G(),{filter:t,value:n}=e,r=n.map(c=>t.control.options.find(d=>d.key===c)),o=3,i=n.length-o,l=a.jsx(f.Fragment,{children:r.filter(Boolean).slice(0,o).map((c,d)=>{let u="";return d!==0&&(u+=", "),u+=s(c.label),u})});return i>0?a.jsx(F,{message:":names + :count more",values:{names:l,count:i}}):l}function Vr(e){const{filter:s,value:t,operator:n}=e,r=n?a.jsx(F,{...ms[n]}):null,o=s.control.inputType==="number"?a.jsx(Tr,{value:t}):t;return a.jsx(De,{...e,label:a.jsxs(f.Fragment,{children:[r," ",o]}),panel:a.jsx(wr,{filter:s})})}function _r(e){const{value:s,filter:t}=e,{isLoading:n,data:r}=hs(`normalized-models/${t.control.model}/${s}`,void 0,{enabled:!!s}),o=a.jsxs(f.Fragment,{children:[a.jsx(ie,{variant:"avatar",size:"w-18 h-18 mr-6"}),a.jsx(ie,{variant:"rect",size:"w-50"})]}),i=a.jsxs(f.Fragment,{children:[a.jsx(Le,{size:"xs",src:r==null?void 0:r.model.image,className:"mr-6"}),r==null?void 0:r.model.name]}),l=n||!r?o:i;return a.jsx(De,{...e,label:l,panel:a.jsx(yr,{filter:t})})}function Oa({filters:e,pinnedFilters:s,className:t}){const{decodedFilters:n,remove:r,replaceAll:o}=qn(e,s);return n.length?a.jsx("div",{className:E("flex items-center gap-6 overflow-x-auto",t),children:n.map((i,l)=>{const c=e.find(u=>u.key===i.key);if(!c)return null;const d=u=>{const p=[...n];p.splice(l,1,{key:c.key,value:u.value,isInactive:!1,operator:u.operator||c.defaultOperator}),o(p)};return a.jsxs("div",{children:[!i.isInactive&&a.jsx(W,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{r(i.key)},children:a.jsx(Qt,{})}),a.jsx(Mr,{filter:c,isInactive:i.isInactive,value:i.valueKey!=null?i.valueKey:i.value,operator:i.operator,onValueChange:d})]},i.key)})}):null}const La=H(a.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),Et=H(a.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Je(e,s){const t=document.createElement("a");t.href=e,s&&(t.download=s),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Hr(e){const s=ft(),[t,n]=f.useState(!e.value&&!e.defaultValue),r=e.onChange,[o,i]=Z(e.value||s,e.defaultValue||s,C=>{n(!1),r==null||r(C)}),{min:l,max:c,granularity:d,timezone:u,calendarIsOpen:p,setCalendarIsOpen:h,closeDialogOnSelection:m}=rs(o,e),g=f.useCallback(()=>{n(!0),i(s),r==null||r(null),h(!1)},[s,i,r,h]),[w,b]=f.useState(()=>[ve(o)]),x=f.useCallback(C=>{l&&C.compare(l)<0?C=l:c&&C.compare(c)>0&&(C=c);const N=o?o.set(C):le(C,u);i(N),b([ve(N)]),n(!1)},[i,l,c,o,u]),y=f.useCallback(C=>!t&&ge(o,C),[o,t]),k=f.useCallback(C=>({onClick:()=>{x==null||x(C),m&&(h==null||h(!1))}}),[x,h,m]);return{selectedValue:o,setSelectedValue:i,calendarIsOpen:p,setCalendarIsOpen:h,dayIsActive:y,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:k,calendarDates:w,setCalendarDates:b,isPlaceholder:t,clear:g,setIsPlaceholder:n,min:l,max:c,granularity:d,timezone:u,closeDialogOnSelection:m}}function Br({showCalendarFooter:e,...s}){const t=Hr(s),n=f.useRef(null),r=ft(),o=e&&a.jsx(nt,{padding:"px-14 pb-14",startAction:a.jsx(J,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:a.jsx(F,{message:"Clear"})}),children:a.jsx(J,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(r),t.setCalendarIsOpen(!1)},children:a.jsx(F,{message:"Today"})})}),i=a.jsx(at,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:n,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:a.jsxs(Fe,{size:"auto",children:[a.jsx(rt,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:a.jsx(is,{state:t,visibleMonths:1})}),o]})}),l={onClick:c=>{c.stopPropagation(),c.preventDefault(),Ur(c)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return a.jsxs(f.Fragment,{children:[a.jsx(dt,{ref:n,wrapperProps:l,endAdornment:a.jsx(ss,{className:E(s.disabled&&"text-disabled")}),...s,children:a.jsx(we,{segmentProps:l,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),i]})}function Va(e){const{min:s,max:t}=e,{trans:n}=G(),{format:r}=ce(),{field:{onChange:o,onBlur:i,value:l=null,ref:c},fieldState:{invalid:d,error:u}}=Ce({name:e.name,rules:{validate:m=>{if(!m)return;const g=$e(m);if(s&&g.compare(s)<0)return n({message:"Enter a date after :date",values:{date:r(m)}});if(t&&g.compare(t)>0)return n({message:"Enter a date before :date",values:{date:r(m)}})}}}),p=l?$e(l):null,h={onChange:m=>{o(m&&m.toAbsoluteString())},onBlur:i,value:p,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return a.jsx(Br,{...ne(h,e)})}function Ur(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const _a=H(a.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Q=new Map,Pe=new Map,Kr=new Map,K={status:"inactive"};function Ge({e,rect:s,deltaX:t,deltaY:n}){return{rect:s,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:n??0,nativeEvent:e}}let gs=null;function $t(e){gs=e}function Wr(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Gr(e){const s=new IntersectionObserver(t=>{t.forEach(n=>{const{width:r,height:o,left:i,top:l}=n.boundingClientRect,[c,d]=[...e].find(([,p])=>p.ref.current===n.target)||[];if(c==null||d==null)return;const u={width:r,height:o,left:i,top:l};e.set(c,{...d,rect:u})}),s.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&s.observe(t.ref.current)})}function Ha({id:e,disabled:s,ref:t,preview:n,hidePreview:r,...o}){const i=f.useRef(null),{addGlobalListener:l,removeAllGlobalListeners:c}=Jt(),d=f.useRef({lastPosition:{x:0,y:0}}).current,u=f.useRef(o);u.current=o,f.useLayoutEffect(()=>(s?Q.delete(e):Q.set(e,{...Q.get(e),id:e,ref:t,type:u.current.type,getData:u.current.getData}),()=>{Q.delete(e)}),[e,s,u,t]);const p=b=>{Kr.forEach(x=>{var y;x.type===((y=Q.get(e))==null?void 0:y.type)&&b(x)})},h=b=>{var N,M;const x=Q.get(e),y=t.current,k=!i.current||!d.clickedEl||i.current.contains(d.clickedEl);if(gs||!y||!x||!k){b.preventDefault(),b.stopPropagation();return}Gr(Pe),$t("drag"),r&&qr(b),b.dataTransfer.effectAllowed="move",d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=Wr(y.getBoundingClientRect());const C=Ge({rect:d.currentRect,e:b});n!=null&&n.current&&n.current(x,v=>{b.dataTransfer.setDragImage(v,0,0)}),K.status="dragging",K.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(M=(N=u.current).onDragStart)==null||M.call(N,C,x),requestAnimationFrame(()=>{p(v=>{var P;return(P=v.onDragStart)==null?void 0:P.call(v,C,x)})}),l(window,"dragover",m,!0)},m=b=>{var M,v;if(b.preventDefault(),!d.currentRect)return;const x=b.clientX-d.lastPosition.x,y=b.clientY-d.lastPosition.y,k={...d.currentRect,left:d.currentRect.left+x,top:d.currentRect.top+y},C=Ge({rect:k,e:b,deltaX:x,deltaY:y}),N=Q.get(e);N&&((v=(M=u.current).onDragMove)==null||v.call(M,C,N),p(P=>{var R;return(R=P.onDragMove)==null?void 0:R.call(P,C,N)})),d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=k};return{draggableProps:{draggable:!s,onDragStart:h,onDragEnd:b=>{var k,C;if(c(),!d.currentRect)return;$t(null),oe&&oe.remove();const x=Ge({rect:d.currentRect,e:b}),y=Q.get(e);y&&((C=(k=u.current).onDragEnd)==null||C.call(k,x,y),p(N=>{var M;return(M=N.onDragEnd)==null?void 0:M.call(N,x,y,K.status)})),requestAnimationFrame(()=>{K.dragTargetId=void 0,K.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:b=>{d.clickedEl=b.target}},dragHandleRef:i}}let oe;function qr(e){oe||(oe=new Image,document.body.append(oe),oe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(oe,0,0)}async function*Yr(e){const s=[];for(const t of e.items)if(t.kind==="file"){const n=t.webkitGetAsEntry();n&&s.push(n)}for(const t of s)if(t.isFile){if(t.name===".DS_Store")continue;const n=await bs(t);yield new Zt(n,t.fullPath)}else t.isDirectory&&(yield*xs(t))}async function*xs(e){const s=e.createReader();let t;do{t=await new Promise((n,r)=>{s.readEntries(n,r)});for(const n of t)if(n.isFile){if(n.name===".DS_Store")continue;const r=await bs(n);yield new Zt(r,n.fullPath)}else n.isDirectory&&(yield*xs(n))}while(t.length>0)}function bs(e){return new Promise((s,t)=>e.file(s,t))}async function Xr(e){const s=[];for await(const t of e)s.push(t);return s}const Qr=400;function Ba({id:e,disabled:s,ref:t,...n}){const r=f.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=f.useRef(n);o.current=n,f.useLayoutEffect(()=>(Pe.set(e,{...Pe.get(e),disabled:s,id:e,ref:t}),()=>{Pe.delete(e)}),[e,o,s,t]);const i=h=>{var w;const m=o.current,g=m.allowDragEventsFromItself||t.current!==((w=h.ref)==null?void 0:w.current);return!!(h!=null&&h.type&&g&&m.types.includes(h.type)&&(!m.acceptsDrop||m.acceptsDrop(h)))},l=h=>{var g,w;const m=me(h);m&&((w=(g=o.current).onDragLeave)==null||w.call(g,m))};return{droppableProps:s?{}:{onDragOver:h=>{var g,w;h.preventDefault(),h.stopPropagation();const m=me(h);m&&i(m)&&((w=(g=o.current).onDragOver)==null||w.call(g,m,h))},onDragEnter:h=>{var g,w;if(h.stopPropagation(),r.dragOverElements.add(h.target),r.dragOverElements.size>1)return;const m=me(h);m&&i(m)&&((w=(g=o.current).onDragEnter)==null||w.call(g,m),clearTimeout(r.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(r.dropActivateTimer=setTimeout(()=>{var b,x;m&&((x=(b=o.current).onDropActivate)==null||x.call(b,m))},Qr)))},onDragLeave:h=>{h.stopPropagation(),r.dragOverElements.delete(h.target);for(const g of r.dragOverElements)h.currentTarget.contains(g)||r.dragOverElements.delete(g);if(r.dragOverElements.size>0)return;const m=me(h);m&&i(m)&&(l(h),clearTimeout(r.dropActivateTimer))},onDrop:async h=>{var g,w,b,x;h.preventDefault(),h.stopPropagation(),r.dragOverElements.clear(),l(h),clearTimeout(r.dropActivateTimer);const m=me(h);if(m)if((w=(g=o.current).onDragLeave)==null||w.call(g,m),!i(m))K.status!=="inactive"&&(K.status="dropFail");else{const y=(x=(b=o.current).onDrop)==null?void 0:x.call(b,m);K.status!=="inactive"&&(K.status=y===!1?"dropFail":"dropSuccess")}}}}}function me(e){if(K.dragTargetId!=null)return Q.get(K.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Xr(Yr(e.dataTransfer))}}const Zr="user",Ua=H(a.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),Ka=H(a.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");function pe(e,s,t){let n=t.initialDeps??[],r;return()=>{var o,i,l,c;let d;t.key&&((o=t.debug)!=null&&o.call(t))&&(d=Date.now());const u=e();if(!(u.length!==n.length||u.some((m,g)=>n[g]!==m)))return r;n=u;let h;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(h=Date.now()),r=s(...u),t.key&&((l=t.debug)!=null&&l.call(t))){const m=Math.round((Date.now()-d)*100)/100,g=Math.round((Date.now()-h)*100)/100,w=g/16,b=(x,y)=>{for(x=String(x);x.length<y;)x=" "+x;return x};console.info(`%c⏱ ${b(g,5)} /${b(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*w,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(c=t==null?void 0:t.onChange)==null||c.call(t,r),r}}function qe(e,s){if(e===void 0)throw new Error(`Unexpected undefined${s?`: ${s}`:""}`);return e}const Jr=(e,s)=>Math.abs(e-s)<1,ea=(e,s,t)=>{let n;return function(...r){e.clearTimeout(n),n=e.setTimeout(()=>s.apply(this,r),t)}},ta=e=>e,sa=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let r=s;r<=t;r++)n.push(r);return n},na=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const r=i=>{const{width:l,height:c}=i;s({width:Math.round(l),height:Math.round(c)})};if(r(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const o=new n.ResizeObserver(i=>{const l=i[0];if(l!=null&&l.borderBoxSize){const c=l.borderBoxSize[0];if(c){r({width:c.inlineSize,height:c.blockSize});return}}r(t.getBoundingClientRect())});return o.observe(t,{box:"border-box"}),()=>{o.unobserve(t)}},Nt={passive:!0},ra=typeof window>"u"?!0:"onscrollend"in window,aa=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let r=0;const o=ra?()=>{}:ea(n,()=>{s(r,!1)},e.options.isScrollingResetDelay),i=d=>()=>{r=t[e.options.horizontal?"scrollLeft":"scrollTop"],o(),s(r,d)},l=i(!0),c=i(!1);return c(),t.addEventListener("scroll",l,Nt),t.addEventListener("scrollend",c,Nt),()=>{t.removeEventListener("scroll",l),t.removeEventListener("scrollend",c)}},oa=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const n=s.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},ia=(e,{adjustments:s=0,behavior:t},n)=>{var r,o;const i=e+s;(o=(r=n.scrollElement)==null?void 0:r.scrollTo)==null||o.call(r,{[n.options.horizontal?"left":"top"]:i,behavior:t})};class la{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(o=>{this._measureElement(o.target,o)})}));return{disconnect:()=>{var r;return(r=n())==null?void 0:r.disconnect()},observe:r=>{var o;return(o=n())==null?void 0:o.observe(r,{box:"border-box"})},unobserve:r=>{var o;return(o=n())==null?void 0:o.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,r])=>{typeof r>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ta,rangeExtractor:sa,onChange:()=>{},measureElement:oa,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...t}},this.notify=(t,n)=>{var r,o;const{startIndex:i,endIndex:l}=this.range??{startIndex:void 0,endIndex:void 0},c=this.calculateRange();(t||i!==(c==null?void 0:c.startIndex)||l!==(c==null?void 0:c.endIndex))&&((o=(r=this.options).onChange)==null||o.call(r,this,n))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var t;const n=this.options.getScrollElement();this.scrollElement!==n&&(this.cleanup(),this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(r,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.scrollOffset<r?"forward":"backward":null,this.scrollOffset=r;const i=this.isScrolling;this.isScrolling=o,this.notify(i!==o,o)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=pe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(t,n,r,o)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:r,getItemKey:o}),{key:!1}),this.getFurthestMeasurement=(t,n)=>{const r=new Map,o=new Map;for(let i=n-1;i>=0;i--){const l=t[i];if(r.has(l.lane))continue;const c=o.get(l.lane);if(c==null||l.end>c.end?o.set(l.lane,l):l.end<c.end&&r.set(l.lane,!0),r.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((i,l)=>i.end===l.end?i.index-l.index:i.end-l.end)[0]:void 0},this.getMeasurements=pe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:r,getItemKey:o},i)=>{const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<t;d++){const u=o(d),p=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),h=p?p.end+this.options.gap:n+r,m=i.get(u),g=typeof m=="number"?m:this.options.estimateSize(d),w=h+g,b=p?p.lane:d%this.options.lanes;c[d]={index:d,start:h,size:g,end:w,key:u,lane:b}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=pe(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(t,n,r)=>this.range=t.length>0&&n>0?ca({measurements:t,outerSize:n,scrollOffset:r}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=pe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,n,r,o)=>n===null?[]:t({startIndex:n.startIndex,endIndex:n.endIndex,overscan:r,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,r=t.getAttribute(n);return r?parseInt(r,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const r=this.measurementsCache[this.indexFromElement(t)];if(!r||!t.isConnected){this.measureElementCache.forEach((l,c)=>{l===t&&(this.observer.unobserve(t),this.measureElementCache.delete(c))});return}const o=this.measureElementCache.get(r.key);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.measureElementCache.set(r.key,t));const i=this.options.measureElement(t,n,this);this.resizeItem(r,i)},this.resizeItem=(t,n)=>{const r=this.itemSizeCache.get(t.key)??t.size,o=n-r;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,o,this):t.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,n)),this.notify(!0,!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=pe(()=>[this.getIndexes(),this.getMeasurements()],(t,n)=>{const r=[];for(let o=0,i=t.length;o<i;o++){const l=t[o],c=n[l];r.push(c)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();return qe(n[vs(0,n.length-1,r=>qe(n[r]).start,t)])},this.getOffsetForAlignment=(t,n)=>{const r=this.getSize();n==="auto"&&(t<=this.scrollOffset?n="start":t>=this.scrollOffset+r?n="end":n="start"),n==="start"?t=t:n==="end"?t=t-r:n==="center"&&(t=t-r/2);const o=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-this.getSize();return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=qe(this.getMeasurements()[t]);if(n==="auto")if(r.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)n="end";else if(r.start<=this.scrollOffset+this.options.scrollPaddingStart)n="start";else return[this.scrollOffset,n];const o=n==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n),n]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:n="auto",behavior:r}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[o,i]=this.getOffsetForIndex(t,n);this._scrollToOffset(o,{adjustments:void 0,behavior:r}),r!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(t))){const[c]=this.getOffsetForIndex(t,i);Jr(c,this.scrollOffset)||this.scrollToIndex(t,{align:i,behavior:r})}else this.scrollToIndex(t,{align:i,behavior:r})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let r;return n.length===0?r=this.options.paddingStart:r=this.options.lanes===1?((t=n[n.length-1])==null?void 0:t.end)??0:Math.max(...n.slice(-this.options.lanes).map(o=>o.end)),r-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:n,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:n},this)},this.measure=()=>{var t,n;this.itemSizeCache=new Map,(n=(t=this.options).onChange)==null||n.call(t,this,!1)},this.setOptions(s),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(t=>{this.itemSizeCache.set(t.key,t.size)}),this.notify(!1,!1)}}const vs=(e,s,t,n)=>{for(;e<=s;){const r=(e+s)/2|0,o=t(r);if(o<n)e=r+1;else if(o>n)s=r-1;else return r}return e>0?e-1:0};function ca({measurements:e,outerSize:s,scrollOffset:t}){const n=e.length-1,o=vs(0,n,l=>e[l].start,t);let i=o;for(;i<n&&e[i].end<t+s;)i++;return{startIndex:o,endIndex:i}}const ua=typeof document<"u"?f.useLayoutEffect:f.useEffect;function da(e){const s=f.useReducer(()=>({}),{})[1],t={...e,onChange:(r,o)=>{var i;o?an.flushSync(s):s(),(i=e.onChange)==null||i.call(e,r,o)}},[n]=f.useState(()=>new la(t));return n.setOptions(t),f.useEffect(()=>n._didMount(),[]),ua(()=>n._willUpdate()),n}function Wa(e){return da({observeElementRect:na,observeElementOffset:aa,scrollToFn:ia,...e})}const fa=fe.createContext(null);function te(e,s){const{base_url:t}=Ht(),n=f.useContext(fa);return f.useMemo(()=>{if(!e)return{};let r;e.url&&(r=on(e.url)?e.url:`${t}/${e.url}`);const o={previewUrl:r,downloadUrl:`${t}/api/v1/file-entries/download/${(s==null?void 0:s.downloadHashes)||e.hash}`};return n&&(o.previewUrl&&(o.previewUrl=Rt(o.previewUrl,{...n,thumbnail:s!=null&&s.thumbnail?"true":""},t)),o.downloadUrl=Rt(o.downloadUrl,n,t)),o},[t,e,s==null?void 0:s.downloadHashes,s==null?void 0:s.thumbnail,n])}function Rt(e,s,t){const n=new URL(e,t);return Object.entries(s).forEach(([r,o])=>{n.searchParams.append(r,o)}),n.toString()}const ht=fe.createContext(null);function ee({message:e,className:s,allowDownload:t}){const{entries:n,activeIndex:r}=f.useContext(ht),o=n[r],i=e||a.jsx(F,{message:"No file preview available"}),{downloadUrl:l}=te(o);return a.jsxs("div",{className:E(s,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[a.jsx("div",{className:"text-lg",children:i}),t&&a.jsx("div",{className:"block mt-20 text-center",children:a.jsx(J,{variant:"flat",color:"primary",onClick:()=>{l&&Je(l)},children:a.jsx(F,{message:"Download"})})})]})}function ha(e){const{entry:s,className:t}=e,{trans:n}=G(),{previewUrl:r}=te(s);return r?a.jsx("img",{className:E(t,"shadow"),src:r,alt:n({message:"Preview for :name",values:{name:s.name}})}):a.jsx(ee,{...e})}const ma=5242880;function pa(e){const{entry:s,className:t}=e,{trans:n}=G(),[r,o]=f.useState(!1),[i,l]=f.useState(!0),[c,d]=f.useState(!1),[u,p]=f.useState(null),{previewUrl:h}=te(s);return f.useEffect(()=>{s&&(h?s.file_size>=ma?(o(!0),l(!1)):ga(h).then(m=>{p(m.data)}).catch(()=>{d(!0)}).finally(()=>{l(!1)}):d(!0))},[s,h]),i?a.jsx(it,{isIndeterminate:!0,"aria-label":n({message:"Loading file contents"})}):r?a.jsx(ee,{...e,message:a.jsx(F,{message:"This file is too large to preview."})}):c?a.jsx(ee,{...e,message:a.jsx(F,{message:"There was an issue previewing this file"})}):a.jsx("pre",{className:E("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",t),children:a.jsx("div",{className:"container mx-auto",children:`${u}`})})}function ga(e){return Oe.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function xa(e){const{entry:s,className:t}=e,{previewUrl:n}=te(s),r=f.useRef(null),[o,i]=f.useState(!1);return f.useEffect(()=>{var l;i(!((l=r.current)!=null&&l.canPlayType(s.mime)))},[s]),o||!n?a.jsx(ee,{...e}):a.jsx("video",{className:t,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:a.jsx("source",{src:n,type:s.mime,onError:()=>{i(!0)}})})}function ba(e){const{entry:s,className:t}=e,{previewUrl:n}=te(s),r=f.useRef(null),[o,i]=f.useState(!1);return f.useEffect(()=>{var l;i(!((l=r.current)!=null&&l.canPlayType(s.mime)))},[s]),o||!n?a.jsx(ee,{...e}):a.jsx("audio",{className:t,ref:r,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:a.jsx("source",{src:n,type:s.mime,onError:()=>{i(!0)}})})}function va(e){const{entry:s,className:t}=e,{trans:n}=G(),{previewUrl:r}=te(s);return r?a.jsx("iframe",{title:n({message:"Preview for :name",values:{name:s.name}}),className:E(t,"w-full h-full"),src:`${r}#toolbar=0`}):a.jsx(ee,{...e})}function Ye(e){const{entry:s,className:t}=e,{trans:n}=G(),r=f.useRef(null),[o,i]=f.useState(!1),l=f.useRef(),[c,d]=f.useState(!1),{previewUrl:u}=te(s);return f.useEffect(()=>{u?s.file_size&&s.file_size>25e6?i(!0):r.current&&(r.current.onload=()=>{clearTimeout(l.current),d(!1)},ya(u,s).then(p=>{r.current&&(r.current.src=p)}),l.current=setTimeout(()=>{i(!0)},5e3)):i(!0)},[s,u]),o?a.jsx(ee,{...e}):a.jsxs("div",{className:E(t,"w-full h-full"),children:[c&&a.jsx(it,{}),a.jsx("iframe",{ref:r,title:n({message:"Preview for :name",values:{name:s.name}}),className:E("w-full h-full",c&&"hidden")})]})}async function ya(e,s){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:n}=await Oe.post(`file-entries/${s.id}/add-preview-token`);t.searchParams.append("preview_token",n.preview_token)}return wa(t)}function wa(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const Tt={text:pa,video:xa,audio:ba,image:ha,pdf:va,spreadsheet:Ye,powerPoint:Ye,word:Ye,"text/rtf":ee};function ja(e){const s=e==null?void 0:e.mime,t=e==null?void 0:e.type;return Tt[s]||Tt[t]||ee}const ka=H(a.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined"),Ca=2*1024*1024;function Da({file:e,className:s,iconClassName:t,showImage:n=!0}){const{trans:r}=G(),{previewUrl:o}=te(e,{thumbnail:!0});if(e.file_size&&e.file_size>Ca&&!e.thumbnail&&(n=!1),n&&e.type==="image"&&o){const i=r({message:":fileName thumbnail",values:{fileName:e.name}});return a.jsx("img",{className:E(s,"object-cover"),src:o,alt:i,draggable:!1})}return a.jsx(ln,{className:t,type:e.type})}function Ia({entries:e,onClose:s,showHeader:t=!0,className:n,headerActionsLeft:r,allowDownload:o=!0,...i}){const l=et("(max-width: 1024px)"),[c,d]=Z(i.activeIndex,i.defaultActiveIndex||0,i.onActiveIndexChange),u=e[c],p=f.useMemo(()=>({entries:e,activeIndex:c}),[e,c]),h=ja(u);if(!u)return s==null||s(),null;const m=e.length-1>c,g=()=>{d(c+1)},w=c>0,b=()=>{d(c-1)};return a.jsxs(ht.Provider,{value:p,children:[t&&a.jsx(Sa,{actionsLeft:r,isMobile:l,onClose:s,onNext:m?g:void 0,onPrevious:w?b:void 0,allowDownload:o}),a.jsxs("div",{className:E("overflow-hidden relative flex-auto",n),children:[l&&a.jsx(W,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!w,onClick:b,children:a.jsx(_t,{})}),a.jsx(je,{initial:!1,children:a.jsx(ue.div,{className:"absolute inset-0 flex items-center justify-center",...ot,children:a.jsx(h,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:o})},u.id)}),l&&a.jsx(W,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!m,onClick:g,children:a.jsx(os,{})})]})]})}function Sa({onNext:e,onPrevious:s,onClose:t,isMobile:n,actionsLeft:r,allowDownload:o}){const{entries:i,activeIndex:l}=f.useContext(ht),c=i[l],{downloadUrl:d}=te(c),h=n?a.jsx(W,{onClick:()=>{d&&Je(d)},children:a.jsx(Et,{})}):a.jsx(J,{startIcon:a.jsx(Et,{}),variant:"text",onClick:()=>{d&&Je(d)},children:a.jsx(F,{message:"Download"})});return a.jsxs("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[a.jsxs("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[r,o?h:void 0]}),a.jsxs("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[a.jsx(Da,{file:c,iconClassName:"w-16 h-16",showImage:!1}),a.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:c.name})]}),a.jsxs("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!n&&a.jsxs(f.Fragment,{children:[a.jsx(W,{disabled:!s,onClick:s,children:a.jsx(ka,{})}),a.jsx("div",{children:l+1}),a.jsx("div",{children:"/"}),a.jsx("div",{children:i.length}),a.jsx(W,{disabled:!e,onClick:e,children:a.jsx(un,{})}),a.jsx("div",{className:"bg-divider w-1 h-24 mx-20"})]}),a.jsx(W,{radius:"rounded-none",onClick:t,children:a.jsx(Qt,{})})]})]})}function Ga(e){return a.jsx(Fe,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:a.jsx(Pa,{...e})})}function Pa(e){const{close:s}=st();return a.jsx(Ia,{onClose:s,...e})}const Ea={key:"type",label:D("Type"),description:D("Type of the file"),defaultOperator:ye.eq,control:{type:_.Select,defaultValue:"05",options:[{key:"02",label:D("Text"),value:"text"},{key:"03",label:D("Audio"),value:"audio"},{key:"04",label:D("Video"),value:"video"},{key:"05",label:D("Image"),value:"image"},{key:"06",label:D("PDF"),value:"pdf"},{key:"07",label:D("Spreadsheet"),value:"spreadsheet"},{key:"08",label:D("Word Document"),value:"word"},{key:"09",label:D("Photoshop"),value:"photoshop"},{key:"10",label:D("Archive"),value:"archive"},{key:"11",label:D("Folder"),value:"folder"}]}},qa=[Ea,{key:"public",label:D("Visibility"),description:D("Whether file is publicly accessible"),defaultOperator:ye.eq,control:{type:_.Select,defaultValue:"01",options:[{key:"01",label:D("Private"),value:!1},{key:"02",label:D("Public"),value:!0}]}},Bn({description:D("Date file was uploaded")}),Un({description:D("Date file was last changed")}),{key:"owner_id",label:D("Uploader"),description:D("User that this file was uploaded by"),defaultOperator:ye.eq,control:{type:_.SelectModel,model:Zr}}],Ya=H(a.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Xa=H(a.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");export{Jt as $,La as A,We as B,Er as C,Ra as D,hr as E,ye as F,qa as G,Ga as H,wr as I,ds as J,os as K,Ua as L,Ka as M,yr as N,vr as O,Ya as P,Tr as Q,Xa as R,ur as S,Aa as T,Zr as U,te as V,Da as W,Y as X,Ia as Y,fa as Z,Ea as _,za as a,ct as a0,gs as a1,Jn as a2,Ne as a3,Kr as a4,ss as a5,ls as a6,jn as a7,zn as a8,An as a9,ut as aa,or as ab,as as ac,ka as ad,vn as ae,Ma as b,Ta as c,_ as d,Bn as e,qn as f,dr as g,Oa as h,Je as i,Et as j,Le as k,Va as l,Fa as m,jr as n,Zn as o,cs as p,Pr as q,Pe as r,Ha as s,Ba as t,Un as u,Gr as v,_a as w,Sr as x,ft as y,Wa as z};
//# sourceMappingURL=Info-00614009.js.map
