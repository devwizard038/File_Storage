{"version":3,"file":"swagger-api-docs-page-92703601.mjs","sources":["../../../common/resources/client/swagger/swagger-api-docs-page.tsx"],"sourcesContent":["import SwaggerUI from 'swagger-ui-react';\r\nimport 'swagger-ui-react/swagger-ui.css';\r\nimport {Settings} from '../core/settings/settings';\r\nimport {useMemo} from 'react';\r\nimport {Navbar} from '../ui/navigation/navbar/navbar';\r\nimport {Footer} from '../ui/footer/footer';\r\nimport {useSettings} from '../core/settings/use-settings';\r\n\r\nexport default function SwaggerApiDocsPage() {\r\n  const settings = useSettings();\r\n\r\n  const plugins = useMemo(() => {\r\n    return getPluginsConfig(settings);\r\n  }, [settings]);\r\n\r\n  return (\r\n    <div className=\"h-full overflow-y-auto bg-alt\">\r\n      <Navbar size=\"sm\" />\r\n      <div className=\"container mx-auto\">\r\n        <SwaggerUI\r\n          url={`${settings.base_url}/swagger.yaml`}\r\n          plugins={plugins}\r\n          onComplete={system => {\r\n            //scroll to Tickets/incomingEmail\r\n            const hash = location.hash.slice(1);\r\n            if (hash) {\r\n              const el = document.querySelector(\r\n                `#operations-${hash.replace(/\\//g, '-')}`,\r\n              );\r\n              if (el) {\r\n                el.scrollIntoView();\r\n                el.querySelector('button')?.click();\r\n              }\r\n            }\r\n          }}\r\n        />\r\n        <Footer className=\"px-20\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getPluginsConfig(settings: Settings) {\r\n  return [\r\n    {\r\n      statePlugins: {\r\n        spec: {\r\n          wrapActions: {\r\n            updateSpec: (oriAction: any) => {\r\n              return (spec: any) => {\r\n                // Replace site name\r\n                spec = spec.replaceAll(\r\n                  'SITE_NAME',\r\n                  settings.branding.site_name.replace(':', ''),\r\n                );\r\n                // Replace site url\r\n                spec = spec.replaceAll('SITE_URL', settings.base_url);\r\n                return oriAction(spec);\r\n              };\r\n            },\r\n            // Add current server url to docs\r\n            updateJsonSpec: (oriAction: any) => {\r\n              return (spec: any) => {\r\n                spec.servers = [{url: `${settings.base_url}/api/v1`}];\r\n                return oriAction(spec);\r\n              };\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  ];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,SAAwB,qBAAqB;AAC3C,QAAM,WAAW;AAEX,QAAA,UAAU,QAAQ,MAAM;AAC5B,WAAO,iBAAiB,QAAQ;AAAA,EAAA,GAC/B,CAAC,QAAQ,CAAC;AAGX,SAAA,qBAAC,OAAI,EAAA,WAAU,iCACb,UAAA;AAAA,IAAC,oBAAA,QAAA,EAAO,MAAK,KAAK,CAAA;AAAA,IAClB,qBAAC,OAAI,EAAA,WAAU,qBACb,UAAA;AAAA,MAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,KAAK,GAAG,SAAS,QAAQ;AAAA,UACzB;AAAA,UACA,YAAY,CAAU,WAAA;;AAEpB,kBAAM,OAAO,SAAS,KAAK,MAAM,CAAC;AAClC,gBAAI,MAAM;AACR,oBAAM,KAAK,SAAS;AAAA,gBAClB,eAAe,KAAK,QAAQ,OAAO,GAAG,CAAC;AAAA,cAAA;AAEzC,kBAAI,IAAI;AACN,mBAAG,eAAe;AACf,yBAAA,cAAc,QAAQ,MAAtB,mBAAyB;AAAA,cAC9B;AAAA,YACF;AAAA,UACF;AAAA,QAAA;AAAA,MACF;AAAA,MACA,oBAAC,QAAO,EAAA,WAAU,QAAQ,CAAA;AAAA,IAAA,GAC5B;AAAA,EACF,EAAA,CAAA;AAEJ;AAEA,SAAS,iBAAiB,UAAoB;AACrC,SAAA;AAAA,IACL;AAAA,MACE,cAAc;AAAA,QACZ,MAAM;AAAA,UACJ,aAAa;AAAA,YACX,YAAY,CAAC,cAAmB;AAC9B,qBAAO,CAAC,SAAc;AAEpB,uBAAO,KAAK;AAAA,kBACV;AAAA,kBACA,SAAS,SAAS,UAAU,QAAQ,KAAK,EAAE;AAAA,gBAAA;AAG7C,uBAAO,KAAK,WAAW,YAAY,SAAS,QAAQ;AACpD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA;AAAA,YAEA,gBAAgB,CAAC,cAAmB;AAClC,qBAAO,CAAC,SAAc;AACf,qBAAA,UAAU,CAAC,EAAC,KAAK,GAAG,SAAS,QAAQ,WAAU;AACpD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EAAA;AAEJ;"}