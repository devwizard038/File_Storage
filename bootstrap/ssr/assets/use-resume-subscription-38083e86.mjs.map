{"version":3,"file":"use-resume-subscription-38083e86.mjs","sources":["../../../common/resources/client/ui/forms/radio-group/radio.tsx","../../../common/resources/client/ui/forms/radio-group/radio-group.tsx","../../../common/resources/client/billing/billing-page/requests/use-cancel-subscription.ts","../../../common/resources/client/billing/billing-page/requests/use-resume-subscription.ts"],"sourcesContent":["import React, {ComponentPropsWithoutRef, forwardRef} from 'react';\nimport clsx from 'clsx';\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\nimport {useController} from 'react-hook-form';\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\n\ntype RadioSize = 'xs' | 'sm' | 'md' | 'lg' | undefined;\n\nexport interface RadioProps\n  extends AutoFocusProps,\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\n  size?: RadioSize;\n  value: string;\n  invalid?: boolean;\n  isFirst?: boolean;\n}\nexport const Radio = forwardRef<HTMLInputElement, RadioProps>((props, ref) => {\n  const {children, autoFocus, size, invalid, isFirst, ...domProps} = props;\n\n  const inputRef = useObjectRef(ref);\n  useAutoFocus({autoFocus}, inputRef);\n\n  const sizeClassNames = getSizeClassNames(size);\n\n  return (\n    <label\n      className={clsx(\n        'inline-flex gap-8 select-none items-center whitespace-nowrap align-middle',\n        sizeClassNames.label,\n        props.disabled && 'text-disabled pointer-events-none',\n        props.invalid && 'text-danger'\n      )}\n    >\n      <input\n        type=\"radio\"\n        className={clsx(\n          'focus-visible:ring outline-none',\n          'rounded-full transition-button border-2 appearance-none',\n          'border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark',\n          'before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark',\n          'before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200',\n          'checked:before:scale-[.65] checked:before:opacity-100',\n          sizeClassNames.circle\n        )}\n        ref={inputRef}\n        {...domProps}\n      />\n      {children && <span>{children}</span>}\n    </label>\n  );\n});\n\nexport function FormRadio(props: RadioProps) {\n  const {\n    field: {onChange, onBlur, value, ref},\n    fieldState: {invalid},\n  } = useController({\n    name: props.name!,\n  });\n\n  const formProps: Partial<RadioProps> = {\n    onChange,\n    onBlur,\n    checked: props.value === value,\n    invalid: props.invalid || invalid,\n  };\n\n  return <Radio ref={ref} {...mergeProps(formProps, props)} />;\n}\n\nfunction getSizeClassNames(size?: RadioSize): {\n  circle: string;\n  label: string;\n} {\n  switch (size) {\n    case 'xs':\n      return {circle: 'h-12 w-12', label: 'text-xs'};\n    case 'sm':\n      return {circle: 'h-16 w-16', label: 'text-sm'};\n    case 'lg':\n      return {circle: 'h-24 w-24', label: 'text-lg'};\n    default:\n      return {circle: 'h-20 w-20', label: 'text-base'};\n  }\n}\n","import {\n  Children,\n  cloneElement,\n  forwardRef,\n  isValidElement,\n  ReactNode,\n  useId,\n} from 'react';\nimport clsx from 'clsx';\nimport {useController} from 'react-hook-form';\nimport {Orientation} from '../orientation';\nimport {RadioProps} from './radio';\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\n\nexport interface RadioGroupProps {\n  children: ReactNode;\n  orientation?: Orientation;\n  size?: 'xs' | 'sm' | 'md' | 'lg';\n  className?: string;\n  label?: ReactNode;\n  disabled?: boolean;\n  name?: string;\n  errorMessage?: ReactNode;\n  description?: ReactNode;\n  invalid?: boolean;\n  required?: boolean;\n}\nexport const RadioGroup = forwardRef<HTMLFieldSetElement, RadioGroupProps>(\n  (props, ref) => {\n    const style = getInputFieldClassNames(props);\n    const {\n      label,\n      children,\n      size,\n      className,\n      orientation = 'horizontal',\n      disabled,\n      required,\n      invalid,\n      errorMessage,\n      description,\n    } = props;\n\n    const labelProps = {};\n    const id = useId();\n    const name = props.name || id;\n\n    return (\n      <fieldset\n        aria-describedby={description ? `${id}-description` : undefined}\n        ref={ref}\n        className={clsx('text-left', className)}\n      >\n        {label && (\n          <legend className={style.label} {...labelProps}>\n            {label}\n          </legend>\n        )}\n        <div\n          className={clsx(\n            'flex',\n            label ? 'mt-6' : 'mt-0',\n            orientation === 'vertical' ? 'flex-col gap-10' : 'flex-row gap-16'\n          )}\n        >\n          {Children.map(children, child => {\n            if (isValidElement<RadioProps>(child)) {\n              return cloneElement<RadioProps>(child, {\n                name,\n                size,\n                invalid: child.props.invalid || invalid || undefined,\n                disabled: child.props.disabled || disabled,\n                required: child.props.required || required,\n              });\n            }\n          })}\n        </div>\n        {description && !errorMessage && (\n          <div className={style.description} id={`${id}-description`}>\n            {description}\n          </div>\n        )}\n        {errorMessage && <div className={style.error}>{errorMessage}</div>}\n      </fieldset>\n    );\n  }\n);\n\ninterface FormRadioGroupProps extends RadioGroupProps {\n  name: string;\n}\nexport function FormRadioGroup({children, ...props}: FormRadioGroupProps) {\n  const {\n    fieldState: {error},\n  } = useController({\n    name: props.name!,\n  });\n  return (\n    <RadioGroup errorMessage={error?.message} {...props}>\n      {children}\n    </RadioGroup>\n  );\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '../../../http/query-client';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\nimport {toast} from '../../../ui/toast/toast';\nimport {message} from '../../../i18n/message';\nimport {User} from '../../../auth/user';\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  subscriptionId: number;\n  delete?: boolean;\n}\n\nexport function useCancelSubscription() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => cancelSubscription(props),\n    onSuccess: (response, payload) => {\n      toast(\n        payload.delete\n          ? trans(message('Subscription deleted.'))\n          : trans(message('Subscription cancelled.')),\n      );\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction cancelSubscription({\n  subscriptionId,\n  ...payload\n}: Payload): Promise<Response> {\n  return apiClient\n    .post(`billing/subscriptions/${subscriptionId}/cancel`, payload)\n    .then(r => r.data);\n}\n","import {useMutation} from '@tanstack/react-query';\nimport {apiClient} from '../../../http/query-client';\nimport {useTrans} from '../../../i18n/use-trans';\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\nimport {toast} from '../../../ui/toast/toast';\nimport {message} from '../../../i18n/message';\nimport {User} from '../../../auth/user';\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\n\ninterface Response extends BackendResponse {\n  user: User;\n}\n\ninterface Payload {\n  subscriptionId: number;\n}\n\nexport function useResumeSubscription() {\n  const {trans} = useTrans();\n  return useMutation({\n    mutationFn: (props: Payload) => resumeSubscription(props),\n    onSuccess: () => {\n      toast(trans(message('Subscription renewed.')));\n    },\n    onError: err => showHttpErrorToast(err),\n  });\n}\n\nfunction resumeSubscription({subscriptionId}: Payload): Promise<Response> {\n  return apiClient\n    .post(`billing/subscriptions/${subscriptionId}/resume`)\n    .then(r => r.data);\n}\n"],"names":[],"mappings":"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"}