{"version":3,"file":"use-resume-subscription-38083e86.mjs","sources":["../../../common/resources/client/ui/forms/radio-group/radio.tsx","../../../common/resources/client/ui/forms/radio-group/radio-group.tsx","../../../common/resources/client/billing/billing-page/requests/use-cancel-subscription.ts","../../../common/resources/client/billing/billing-page/requests/use-resume-subscription.ts"],"sourcesContent":["import React, {ComponentPropsWithoutRef, forwardRef} from 'react';\r\nimport clsx from 'clsx';\r\nimport {mergeProps, useObjectRef} from '@react-aria/utils';\r\nimport {useController} from 'react-hook-form';\r\nimport {AutoFocusProps, useAutoFocus} from '../../focus/use-auto-focus';\r\n\r\ntype RadioSize = 'xs' | 'sm' | 'md' | 'lg' | undefined;\r\n\r\nexport interface RadioProps\r\n  extends AutoFocusProps,\r\n    Omit<ComponentPropsWithoutRef<'input'>, 'size'> {\r\n  size?: RadioSize;\r\n  value: string;\r\n  invalid?: boolean;\r\n  isFirst?: boolean;\r\n}\r\nexport const Radio = forwardRef<HTMLInputElement, RadioProps>((props, ref) => {\r\n  const {children, autoFocus, size, invalid, isFirst, ...domProps} = props;\r\n\r\n  const inputRef = useObjectRef(ref);\r\n  useAutoFocus({autoFocus}, inputRef);\r\n\r\n  const sizeClassNames = getSizeClassNames(size);\r\n\r\n  return (\r\n    <label\r\n      className={clsx(\r\n        'inline-flex gap-8 select-none items-center whitespace-nowrap align-middle',\r\n        sizeClassNames.label,\r\n        props.disabled && 'text-disabled pointer-events-none',\r\n        props.invalid && 'text-danger'\r\n      )}\r\n    >\r\n      <input\r\n        type=\"radio\"\r\n        className={clsx(\r\n          'focus-visible:ring outline-none',\r\n          'rounded-full transition-button border-2 appearance-none',\r\n          'border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark',\r\n          'before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark',\r\n          'before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200',\r\n          'checked:before:scale-[.65] checked:before:opacity-100',\r\n          sizeClassNames.circle\r\n        )}\r\n        ref={inputRef}\r\n        {...domProps}\r\n      />\r\n      {children && <span>{children}</span>}\r\n    </label>\r\n  );\r\n});\r\n\r\nexport function FormRadio(props: RadioProps) {\r\n  const {\r\n    field: {onChange, onBlur, value, ref},\r\n    fieldState: {invalid},\r\n  } = useController({\r\n    name: props.name!,\r\n  });\r\n\r\n  const formProps: Partial<RadioProps> = {\r\n    onChange,\r\n    onBlur,\r\n    checked: props.value === value,\r\n    invalid: props.invalid || invalid,\r\n  };\r\n\r\n  return <Radio ref={ref} {...mergeProps(formProps, props)} />;\r\n}\r\n\r\nfunction getSizeClassNames(size?: RadioSize): {\r\n  circle: string;\r\n  label: string;\r\n} {\r\n  switch (size) {\r\n    case 'xs':\r\n      return {circle: 'h-12 w-12', label: 'text-xs'};\r\n    case 'sm':\r\n      return {circle: 'h-16 w-16', label: 'text-sm'};\r\n    case 'lg':\r\n      return {circle: 'h-24 w-24', label: 'text-lg'};\r\n    default:\r\n      return {circle: 'h-20 w-20', label: 'text-base'};\r\n  }\r\n}\r\n","import {\r\n  Children,\r\n  cloneElement,\r\n  forwardRef,\r\n  isValidElement,\r\n  ReactNode,\r\n  useId,\r\n} from 'react';\r\nimport clsx from 'clsx';\r\nimport {useController} from 'react-hook-form';\r\nimport {Orientation} from '../orientation';\r\nimport {RadioProps} from './radio';\r\nimport {getInputFieldClassNames} from '../input-field/get-input-field-class-names';\r\n\r\nexport interface RadioGroupProps {\r\n  children: ReactNode;\r\n  orientation?: Orientation;\r\n  size?: 'xs' | 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n  label?: ReactNode;\r\n  disabled?: boolean;\r\n  name?: string;\r\n  errorMessage?: ReactNode;\r\n  description?: ReactNode;\r\n  invalid?: boolean;\r\n  required?: boolean;\r\n}\r\nexport const RadioGroup = forwardRef<HTMLFieldSetElement, RadioGroupProps>(\r\n  (props, ref) => {\r\n    const style = getInputFieldClassNames(props);\r\n    const {\r\n      label,\r\n      children,\r\n      size,\r\n      className,\r\n      orientation = 'horizontal',\r\n      disabled,\r\n      required,\r\n      invalid,\r\n      errorMessage,\r\n      description,\r\n    } = props;\r\n\r\n    const labelProps = {};\r\n    const id = useId();\r\n    const name = props.name || id;\r\n\r\n    return (\r\n      <fieldset\r\n        aria-describedby={description ? `${id}-description` : undefined}\r\n        ref={ref}\r\n        className={clsx('text-left', className)}\r\n      >\r\n        {label && (\r\n          <legend className={style.label} {...labelProps}>\r\n            {label}\r\n          </legend>\r\n        )}\r\n        <div\r\n          className={clsx(\r\n            'flex',\r\n            label ? 'mt-6' : 'mt-0',\r\n            orientation === 'vertical' ? 'flex-col gap-10' : 'flex-row gap-16'\r\n          )}\r\n        >\r\n          {Children.map(children, child => {\r\n            if (isValidElement<RadioProps>(child)) {\r\n              return cloneElement<RadioProps>(child, {\r\n                name,\r\n                size,\r\n                invalid: child.props.invalid || invalid || undefined,\r\n                disabled: child.props.disabled || disabled,\r\n                required: child.props.required || required,\r\n              });\r\n            }\r\n          })}\r\n        </div>\r\n        {description && !errorMessage && (\r\n          <div className={style.description} id={`${id}-description`}>\r\n            {description}\r\n          </div>\r\n        )}\r\n        {errorMessage && <div className={style.error}>{errorMessage}</div>}\r\n      </fieldset>\r\n    );\r\n  }\r\n);\r\n\r\ninterface FormRadioGroupProps extends RadioGroupProps {\r\n  name: string;\r\n}\r\nexport function FormRadioGroup({children, ...props}: FormRadioGroupProps) {\r\n  const {\r\n    fieldState: {error},\r\n  } = useController({\r\n    name: props.name!,\r\n  });\r\n  return (\r\n    <RadioGroup errorMessage={error?.message} {...props}>\r\n      {children}\r\n    </RadioGroup>\r\n  );\r\n}\r\n","import {useMutation} from '@tanstack/react-query';\r\nimport {apiClient} from '../../../http/query-client';\r\nimport {useTrans} from '../../../i18n/use-trans';\r\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\r\nimport {toast} from '../../../ui/toast/toast';\r\nimport {message} from '../../../i18n/message';\r\nimport {User} from '../../../auth/user';\r\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\r\n\r\ninterface Response extends BackendResponse {\r\n  user: User;\r\n}\r\n\r\ninterface Payload {\r\n  subscriptionId: number;\r\n  delete?: boolean;\r\n}\r\n\r\nexport function useCancelSubscription() {\r\n  const {trans} = useTrans();\r\n  return useMutation({\r\n    mutationFn: (props: Payload) => cancelSubscription(props),\r\n    onSuccess: (response, payload) => {\r\n      toast(\r\n        payload.delete\r\n          ? trans(message('Subscription deleted.'))\r\n          : trans(message('Subscription cancelled.')),\r\n      );\r\n    },\r\n    onError: err => showHttpErrorToast(err),\r\n  });\r\n}\r\n\r\nfunction cancelSubscription({\r\n  subscriptionId,\r\n  ...payload\r\n}: Payload): Promise<Response> {\r\n  return apiClient\r\n    .post(`billing/subscriptions/${subscriptionId}/cancel`, payload)\r\n    .then(r => r.data);\r\n}\r\n","import {useMutation} from '@tanstack/react-query';\r\nimport {apiClient} from '../../../http/query-client';\r\nimport {useTrans} from '../../../i18n/use-trans';\r\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\r\nimport {toast} from '../../../ui/toast/toast';\r\nimport {message} from '../../../i18n/message';\r\nimport {User} from '../../../auth/user';\r\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\r\n\r\ninterface Response extends BackendResponse {\r\n  user: User;\r\n}\r\n\r\ninterface Payload {\r\n  subscriptionId: number;\r\n}\r\n\r\nexport function useResumeSubscription() {\r\n  const {trans} = useTrans();\r\n  return useMutation({\r\n    mutationFn: (props: Payload) => resumeSubscription(props),\r\n    onSuccess: () => {\r\n      toast(trans(message('Subscription renewed.')));\r\n    },\r\n    onError: err => showHttpErrorToast(err),\r\n  });\r\n}\r\n\r\nfunction resumeSubscription({subscriptionId}: Payload): Promise<Response> {\r\n  return apiClient\r\n    .post(`billing/subscriptions/${subscriptionId}/resume`)\r\n    .then(r => r.data);\r\n}\r\n"],"names":[],"mappings":"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"}